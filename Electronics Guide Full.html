<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Electronics Learning Hub</title>
    <style>
        /* --- Global Styles & Color Palette --- */
        :root {
            --bg-color: #1a1a2e; /* Dark Navy Blue */
            --primary-color: #16213e; /* Slightly Lighter Navy */
            --secondary-color: #0f3460; /* Richer Blue */
            --accent-color: #e94560; /* Vibrant Pink/Red */
            --text-color: #e0e0e0; /* Light Gray */
            --highlight-color: #537895; /* Muted Blue for highlights */
            --code-bg: #2a2a40;
            --border-color: #4a4a6a;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
        }

        /* --- Navigation --- */
        nav {
            width: 280px;
            background-color: var(--primary-color);
            padding: 20px;
            height: 100vh;
            overflow-y: auto;
            position: fixed;
            border-right: 2px solid var(--border-color);
        }

        nav h2 {
            color: var(--accent-color);
            margin-bottom: 15px;
            font-size: 1.4em;
            text-align: center;
        }

        nav ul {
            list-style: none;
        }

        nav ul li a {
            display: block;
            padding: 8px 12px;
            text-decoration: none;
            color: var(--text-color);
            border-radius: 4px;
            transition: background-color 0.3s ease, color 0.3s ease;
            font-size: 0.95em;
        }

        nav ul li a:hover, nav ul li a.active {
            background-color: var(--accent-color);
            color: white;
        }

        /* --- Main Content --- */
        main {
            margin-left: 280px; /* Same as nav width */
            padding: 30px 40px;
            width: calc(100% - 280px);
            overflow-y: auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        header h1 {
            color: var(--accent-color);
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            color: var(--highlight-color);
        }

        section {
            margin-bottom: 40px;
            padding: 25px;
            background-color: var(--secondary-color);
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        section h2 {
            color: var(--accent-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--highlight-color);
            font-size: 1.8em;
        }
        
        section h3 {
            color: var(--highlight-color);
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.4em;
        }

        p, li {
            margin-bottom: 10px;
            color: var(--text-color);
        }

        ul, ol {
            margin-left: 20px;
        }

        code {
            background-color: var(--code-bg);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            color: #f0a0a0; /* Light reddish for code */
        }

        pre {
            background-color: var(--code-bg);
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 15px;
        }

        /* --- Interactive Simulator Styles --- */
        .simulator-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: flex-start;
        }

        .controls, .circuit-diagram-area, .results {
            background-color: var(--primary-color);
            padding: 20px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .controls {
            flex: 1;
            min-width: 250px;
        }
        .circuit-diagram-area {
            flex: 2;
            min-width: 300px;
            height: 250px; /* Fixed height for canvas or SVG */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .results {
            flex: 1;
            min-width: 200px;
        }

        .controls label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--highlight-color);
        }

        .controls input[type="number"], .controls select {
            width: calc(100% - 20px);
            padding: 8px 10px;
            margin-bottom: 15px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background-color: var(--code-bg);
            color: var(--text-color);
            font-size: 1em;
        }
        
        .controls button {
            padding: 10px 15px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
        }
        .controls button:hover {
            background-color: #c7304a; /* Darker accent */
        }

        .results p {
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        .results span {
            font-weight: bold;
            color: var(--accent-color);
        }

        /* Simple Canvas Circuit Diagram */
        #circuitCanvas {
            background-color: #2c3e50; /* Slightly different blue for canvas */
            border-radius: 4px;
        }

        /* Component Styles */
        .component-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .component-item {
            background-color: var(--primary-color);
            padding: 15px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        .component-item h4 {
            color: var(--accent-color);
            margin-bottom: 8px;
        }
        .component-item img {
            max-width: 50px;
            float: right; /* Basic symbol placeholder */
            margin-left: 10px;
            filter: invert(80%) sepia(30%) saturate(500%) hue-rotate(300deg); /* Make symbols visible */
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            nav {
                width: 100%;
                height: auto;
                position: static;
                border-right: none;
                border-bottom: 2px solid var(--border-color);
            }
            main {
                margin-left: 0;
                width: 100%;
                padding: 20px;
            }
            .simulator-container {
                flex-direction: column;
            }
            .controls, .circuit-diagram-area, .results {
                width: 100%;
            }
        }

    </style>
</head>
<body>
    <nav id="tableOfContents">
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#intro">Introduction</a></li>
            <li><a href="#components">Electronic Components</a></li>
            <li><a href="#simulator">Circuit Simulator Demo</a></li>
            <li><a href="#topic1">1: Basic Concepts</a></li>
            <li><a href="#topic2">2: Basic Laws</a></li>
            <li><a href="#topic3">3: Methods of Analysis</a></li>
            <li><a href="#topic4">4: Circuit Theorems</a></li>
            <li><a href="#topic5">5: Operational Amplifiers</a></li>
            <li><a href="#topic6">6: Capacitors and Inductors</a></li>
            <li><a href="#topic7">7: First-Order Circuits</a></li>
            <li><a href="#topic8">8: Second-Order Circuits</a></li>
            <li><a href="#topic9">9: Sinusoids and Phasors</a></li>
            <li><a href="#topic10">10: Sinusoidal Steady-State Analysis</a></li>
            <li><a href="#topic11">11: AC Power Analysis</a></li>
            <li><a href="#topic12">12: Three-Phase Circuits</a></li>
            <li><a href="#topic13">13: Magnetically Coupled Circuits</a></li>
            <li><a href="#topic14">14: Frequency Response</a></li>
            <li><a href="#topic15">15: Introduction to the Laplace Transform</a></li>
            <li><a href="#topic16">16: Applications of the Laplace Transform</a></li>
            <li><a href="#topic17">17: The Fourier Series</a></li>
            <li><a href="#topic18">18: Fourier Transform</a></li>
            <li><a href="#topic19">19: Two-Port Networks</a></li>
            <li><a href="#appendixA">A: Simultaneous Equations & Matrix Inversion</a></li>
            <li><a href="#appendixB">B: Complex Numbers</a></li>
            <li><a href="#appendixC">C: Mathematical Formulas</a></li>
        </ul>
    </nav>

    <main>
        <header>
            <h1>Interactive Electronics Learning Hub</h1>
            <p>Explore the fascinating world of electronic circuits and systems!</p>
        </header>

        <section id="intro">
            <h2>Welcome!</h2>
            <p>This page is your interactive guide to understanding electronic systems. From fundamental concepts to advanced analysis techniques, we'll cover a wide range of topics. Use the navigation panel to jump to specific sections. Explore component descriptions and try out the simple circuit simulator to see laws like Ohm's Law in action.</p>
            <p><strong>Note:</strong> The simulator provided is a simplified demonstration tool and not a replacement for professional simulation software like MultiSIM. Its purpose is to illustrate basic principles.</p>
        </section>

        <section id="components">
            <h2>Electronic Components</h2>
            <p>Understanding the role of each component is crucial. Here are some common ones:</p>
            <div class="component-list">
                <div class="component-item">
                    <!-- Placeholder for resistor symbol -->
                    <div style="width:60px; height:24px; float:right; margin-left:10px;">
                        <svg viewBox="0 0 60 24" xmlns="http://www.w3.org/2000/svg" style="display: block; stroke: var(--text-color); stroke-width:1.5; fill:none;">
                            <path d="M0 12 L10 12 L15 6 L25 18 L35 6 L45 18 L50 12 L60 12"/>
                        </svg>
                    </div>                   
                    <p>Opposes the flow of electric current. Measured in Ohms (Ω).</p>
                </div>
                <div class="component-item">
                     <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAxMDAgNDAiPjxwYXRoIGQ9Ik0wIDIwIEw0MCAyME00MCA1IEw0MCAzNU02MCA1IEw2MCAzNU02MCAyMCBMMTAwIDIwIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+PC9zdmc+" alt="Capacitor Symbol">
                    <h4>Capacitor</h4>
                    <p>Stores electrical energy in an electric field. Measured in Farads (F).</p>
                </div>
                <div class="component-item">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAxMDAgNDAiPjxwYXRoIGQ9Ik0wIDIwIEwxNSAyMEEyMCAyMCAwIDAgMCA1NSAyMEEyMCAyMCAwIDAgMCA5NSAyMEwxMDAgMjAiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvc3ZnPg==" alt="Inductor Symbol">
                    <h4>Inductor</h4>
                    <p>Stores energy in a magnetic field when electric current flows through it. Measured in Henries (H).</p>
                </div>
                <div class="component-item">
                     <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAxMDAgNDAiPjxwYXRoIGQ9Ik0wIDIwIEwzMCAyMEw1MCA1IEw1MCAzNSBMMzAgMjBNNTAgMjAgTDEwMCAyMCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==" alt="Diode Symbol">
                    <h4>Diode</h4>
                    <p>Allows current to flow in one direction primarily.</p>
                </div>
                <div class="component-item">
                    <!-- Placeholder for Transistor symbol (BJT) -->
                     <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAxMDAgNDAiPjxnIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiPjxjaXJjbGUgY3g9IjUwIiBjeT0iMjAiIHI9IjE4Ii8+PHBhdGggZD0iTTUwIDIwIEwyMCAyME01MCAyIEw3MCAxME01MCAzOCBMNzAgMzBNNzAgMTUgTDcwIDI1IiAvPjxwYXRoIGQ9Ik02NSAxMiBMNzAgMTAgTDc1IDEyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PC9zdmc+" alt="Transistor Symbol">
                    <h4>Transistor (BJT/FET)</h4>
                    <p>Amplifies or switches electronic signals and electrical power.</p>
                </div>
                <div class="component-item">
                     <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCAxMDAgNzAiPjxwYXRoIGQ9Ik0yMCA1IEw4MCAzNUwyMCA2NUwyMCA1WiIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0yNSAxNSBMMzUgMTVNMzAgMTBMMzAgMjBNNzIgMzAgTDc4IDMwTTI1IDU1IEwzNSA1NU04MCAzNSBMMTAwIDM1IiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+" alt="Op-Amp Symbol">
                    <h4>Operational Amplifier (Op-Amp)</h4>
                    <p>A high-gain voltage amplifier with differential input. Basis for many analog circuits.</p>
                </div>
                 <div class="component-item">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDYwIDQwIj48cmVjdCB4PSI1IiB5PSI1IiB3aWR0aD0iNTAiIGhlaWdodD0iMzAiIHJ4PSI1IiByeT0iNSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0wIDEwIEw1IDEwTTYwIDEwIEw1NSAxME0wIDIwIEw1IDIwTTYwIDIwIEw1NSAyME0wIDMwIEw1IDMwTTYwIDMwIEw1NSAzMCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg==" alt="IC Symbol">
                    <h4>Integrated Circuit (IC)</h4>
                    <p>A set of electronic circuits on one small flat piece (chip) of semiconductor material.</p>
                </div>
                <div class="component-item">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDgwIDQwIj48cGF0aCBkPSJNMCAyMCBMMjAgMjBNMjAgMTIgTDIwIDI4TTMwIDEyIEwzMCAyOE02MCAyMCBMODAgMjBNMjAgMTIgQzI1IDEgMzUgMSAzMCAxMk0yMCAyOEMyNSAzOSAzNSAzOSAzMCAyOCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==" alt="Voltage Source Symbol">
                    <h4>Voltage Source (DC/AC)</h4>
                    <p>Provides a potential difference (voltage). Can be DC (direct current) or AC (alternating current).</p>
                </div>
            </div>
        </section>

        <section id="simulator">
            <h2>Circuit Simulator Demo (Ohm's Law)</h2>
            <p>This is a very basic interactive tool to demonstrate Ohm's Law (V = IR) in a simple DC circuit with one resistor. Adjust the voltage and resistance to see the current change.</p>
            <div class="simulator-container">
                <div class="controls">
                    <h3>Controls</h3>
                    <label for="voltage">Voltage (V):</label>
                    <input type="number" id="voltage" value="12" min="0" step="0.1">
                    
                    <label for="resistance">Resistance (R1 in Ω):</label>
                    <input type="number" id="resistance" value="100" min="1" step="1">
                    
                    <!-- For a more advanced version, you could add more components -->
                    <!-- <label for="resistance2">Resistance (R2 in Ω):</label>
                    <input type="number" id="resistance2" value="0" min="0" step="1">
                    <label for="connectionType">Connection:</label>
                    <select id="connectionType">
                        <option value="series">Series</option>
                        <option value="parallel">Parallel</option>
                    </select> -->
                    <button id="simulateBtn">Simulate</button>
                </div>

                <div class="circuit-diagram-area">
                    <h3>Circuit Diagram</h3>
                    <canvas id="circuitCanvas" width="280" height="200"></canvas>
                </div>

                <div class="results">
                    <h3>Results</h3>
                    <p>Current (I): <span id="currentVal">0 A</span></p>
                    <p>Power (P): <span id="powerVal">0 W</span></p>
                    <!-- <p>Total Resistance (Rt): <span id="totalResistanceVal">0 Ω</span></p> -->
                </div>
            </div>
        </section>

        <!-- Topic Sections (Content Placeholders - TO BE FILLED) -->
        <section id="topic1">
            <h2>1: Basic Concepts</h2>
            <h3>📚 Overview:</h3>
<p>This chapter introduces the fundamental physical quantities used throughout electrical engineering: <strong>charge, current, voltage, power</strong>, and <strong>energy</strong>. Understanding these is essential for analyzing any electrical system.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Charge (Q)</strong></h4>
<ul>
    <li>Measured in <strong>coulombs (C)</strong></li>
    <li><code>Q = n ⋅ e</code>, where <code>e = 1.6 × 10<sup>-19</sup> C</code> is the elementary charge.</li>
</ul>

<h4>2. <strong>Current (I)</strong></h4>
<ul>
    <li>Rate of flow of electric charge</li>
    <li><code>I = dQ/dt</code>, measured in <strong>amperes (A)</strong></li>
</ul>

<h4>3. <strong>Voltage (V)</strong></h4>
<ul>
    <li>Electrical potential difference between two points</li>
    <li><code>V = W/Q</code>, measured in <strong>volts (V)</strong> (W here is Work/Energy)</li>
</ul>

<h4>4. <strong>Power (P)</strong></h4>
<ul>
    <li>Rate at which energy is transferred</li>
    <li><code>P = V ⋅ I</code>, measured in <strong>watts (W)</strong></li>
</ul>

<h4>5. <strong>Energy (W or E)</strong></h4>
<ul>
    <li>Total work done over time</li>
    <li><code>W = ∫ P dt</code> (or <code>E = P ⋅ t</code> for constant power)</li>
</ul>

<h4>6. <strong>Passive Sign Convention</strong>:</h4>
<p>If current enters the positive terminal of a component, it is absorbing power.</p>
<pre><code>P = +VI (absorbing)
P = -VI (supplying)</code></pre>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Charge Calculation</h4>
<p><strong>Problem</strong>: A battery supplies a constant current of 2 A for 10 seconds. How much charge flows through it?</p>
<p><strong>Solution</strong>:</p>
<pre><code>Q = I ⋅ t = 2 A ⋅ 10 s = 20 C</code></pre>

<h4>🔸 Example 2: Power Absorption</h4>
<p><strong>Problem</strong>: A resistor has a current of 3 A flowing into its positive terminal, with a voltage drop of 12 V. Is it absorbing or supplying power?</p>
<p><strong>Solution</strong>: Using passive sign convention:</p>
<pre><code>P = +VI = 12 V ⋅ 3 A = 36 W ⇒ Absorbing</code></pre>

<h4>🔸 Example 3: Energy Over Time</h4>
<p><strong>Problem</strong>: If a device consumes 100 W for 2 hours, how much energy does it use?</p>
<p><strong>Solution</strong>:</p>
<pre><code>t = 2 hours = 2 ⋅ 3600 seconds = 7200 s
W = P ⋅ t = 100 W ⋅ 7200 s = 720,000 J = 720 kJ</code></pre>

<h3>📝 Practice Problems (with Solutions):</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>What is the current if 50 C passes through a wire in 10 seconds?
        <br><strong>Answer</strong>: <code>I = Q/t = 50 C / 10 s = 5 A</code></li>
    <li>A 9 V battery delivers 2 A. What is the power supplied?
        <br><strong>Answer</strong>: <code>P = VI = 9 V ⋅ 2 A = 18 W</code></li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>A lightbulb uses 60 W at 120 V. What is the current drawn?
        <br><strong>Answer</strong>: <code>I = P/V = 60 W / 120 V = 0.5 A</code></li>
    <li>A capacitor is charged with 200 mC when a voltage of 10 V is applied. What is its capacitance? (Note: Capacitance C=Q/V is introduced later, but this tests basic manipulation if known)
        <br><strong>Answer</strong>: <code>C = Q/V = 0.2 C / 10 V = 0.02 F</code></li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="5">
    <li>A motor draws 10 A at 240 V. It runs for 30 minutes. How much energy is consumed in MJ?
        <br><strong>Answer</strong>:
        <pre><code>P = VI = 240 V ⋅ 10 A = 2400 W
t = 30 minutes = 30 ⋅ 60 seconds = 1800 s
W = P ⋅ t = 2400 W ⋅ 1800 s = 4,320,000 J = 4.32 MJ</code></pre>
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Always label units in your calculations.</li>
    <li>Use dimensional analysis to verify formulas.</li>
    <li>Understand the <strong>passive sign convention</strong> deeply—it’s crucial in later chapters.</li>
    <li>Know the relationship between <strong>power, voltage, and current</strong> like the back of your hand.</li>
</ul>
        </section>




        <section id="topic2">
            <h2>2: Basic Laws</h2>
            <h3>📚 Overview:</h3>
<p>This chapter introduces the foundational laws governing all linear circuits: <strong>Ohm’s Law</strong> and <strong>Kirchhoff’s Laws</strong>. These are tools for solving resistive networks and form the basis of nodal and mesh analysis.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Ohm’s Law</strong>:</h4>
<pre><code>V = IR</code></pre>
<p>Where:</p>
<ul>
    <li><code>V</code> = Voltage across resistor (Volts)</li>
    <li><code>I</code> = Current through resistor (Amperes)</li>
    <li><code>R</code> = Resistance (Ohms, Ω)</li>
</ul>

<h4>2. <strong>Kirchhoff’s Current Law (KCL)</strong>:</h4>
<p>The algebraic sum of currents entering a node equals the sum of currents leaving it:</p>
<pre><code>Σ I<sub>in</sub> = Σ I<sub>out</sub></code></pre>

<h4>3. <strong>Kirchhoff’s Voltage Law (KVL)</strong>:</h4>
<p>The algebraic sum of voltage drops around any closed loop is zero:</p>
<pre><code>Σ V = 0</code></pre>

<h4>4. <strong>Series Resistors</strong>:</h4>
<p>The equivalent resistance of resistors in series is the sum of their individual resistances:</p>
<pre><code>R<sub>eq</sub> = R<sub>1</sub> + R<sub>2</sub> + … + R<sub>n</sub></code></pre>

<h4>5. <strong>Parallel Resistors</strong>:</h4>
<p>The reciprocal of the equivalent resistance of resistors in parallel is the sum of the reciprocals of their individual resistances:</p>
<pre><code>1/R<sub>eq</sub> = 1/R<sub>1</sub> + 1/R<sub>2</sub> + … + 1/R<sub>n</sub></code></pre>
<p>For two resistors in parallel:</p>
<pre><code>R<sub>eq</sub> = (R<sub>1</sub> * R<sub>2</sub>) / (R<sub>1</sub> + R<sub>2</sub>)</code></pre>

<h4>6. <strong>Voltage Divider Rule</strong>:</h4>
<p>For two or more resistors in series connected to a voltage source V<sub>s</sub>, the voltage V<sub>x</sub> across a specific resistor R<sub>x</sub> is:</p>
<pre><code>V<sub>x</sub> = V<sub>s</sub> ⋅ (R<sub>x</sub> / R<sub>total</sub>)</code></pre>
<p>Where R<sub>total</sub> is the total series resistance.</p>

<h4>7. <strong>Current Divider Rule</strong>:</h4>
<p>For two resistors R<sub>1</sub> and R<sub>2</sub> in parallel, with a total current I<sub>s</sub> entering the combination, the current I<sub>1</sub> through R<sub>1</sub> is:</p>
<pre><code>I<sub>1</sub> = I<sub>s</sub> ⋅ (R<sub>2</sub> / (R<sub>1</sub> + R<sub>2</sub>))</code></pre>
<p>And the current I<sub>2</sub> through R<sub>2</sub> is:</p>
<pre><code>I<sub>2</sub> = I<sub>s</sub> ⋅ (R<sub>1</sub> / (R<sub>1</sub> + R<sub>2</sub>))</code></pre>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Ohm’s Law</h4>
<p><strong>Problem</strong>: A 10 Ω resistor has 2 A flowing through it. What is the voltage across it?</p>
<p><strong>Solution</strong>:</p>
<pre><code>V = IR = 2 A ⋅ 10 Ω = 20 V</code></pre>

<h4>🔸 Example 2: KCL</h4>
<p><strong>Problem</strong>: At a node, three currents enter: 2 A, 3 A, and 1 A. Two currents leave: 4 A and X A. Find X.</p>
<p><strong>Solution</strong>:</p>
<pre><code>Σ I<sub>in</sub> = Σ I<sub>out</sub>
2 A + 3 A + 1 A = 4 A + X A
6 A = 4 A + X A
X A = 6 A - 4 A = 2 A
So, X = 2 A</code></pre>

<h4>🔸 Example 3: Series Resistors</h4>
<p><strong>Problem</strong>: Three resistors (2 Ω, 3 Ω, 5 Ω) are in series. What is the total equivalent resistance?</p>
<p><strong>Solution</strong>:</p>
<pre><code>R<sub>eq</sub> = R<sub>1</sub> + R<sub>2</sub> + R<sub>3</sub> = 2 Ω + 3 Ω + 5 Ω = 10 Ω</code></pre>

<h3>📝 Practice Problems (with Solutions):</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>A 12 V battery powers a 4 Ω resistor. What is the current?
        <br><strong>Answer</strong>: <code>I = V/R = 12 V / 4 Ω = 3 A</code></li>
    <li>Four 10 Ω resistors are connected in parallel. What is their equivalent resistance R<sub>eq</sub>?
        <br><strong>Answer</strong>:
        <pre><code>1/R<sub>eq</sub> = 1/10 + 1/10 + 1/10 + 1/10 = 4/10
R<sub>eq</sub> = 10/4 = 2.5 Ω</code></pre>
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>A 24 V source feeds two resistors in series: R<sub>1</sub> = 6 Ω and R<sub>2</sub> = 12 Ω. Find the voltage across the 12 Ω resistor (V<sub>R2</sub>).
        <br><strong>Answer</strong>: Using the voltage divider rule:
        <pre><code>R<sub>total</sub> = R<sub>1</sub> + R<sub>2</sub> = 6 Ω + 12 Ω = 18 Ω
V<sub>R2</sub> = V<sub>s</sub> ⋅ (R<sub>2</sub> / R<sub>total</sub>) = 24 V ⋅ (12 Ω / 18 Ω) = 24 V ⋅ (2/3) = 16 V</code></pre>
    </li>
    <li>Apply KVL to a loop with voltage sources of +10 V (rise), -5 V (rise, or a drop if polarity reversed), and an unknown voltage drop V<sub>x</sub> across a resistor. Find V<sub>x</sub> assuming the -5V means a source opposing the 10V source in the loop.
        <br><strong>Answer</strong>: Assuming a loop direction where 10V is a rise and 5V is a drop (connected with opposite polarity in the loop path):
        <pre><code>KVL: Σ V = 0
+10 V - 5 V - V<sub>x</sub> = 0
5 V - V<sub>x</sub> = 0
V<sub>x</sub> = 5 V</code></pre>
        (Note: The interpretation of "-5V" matters. If it's a source aiding the 10V but its marked negative terminal is encountered first, it's a drop. If it's opposing, it acts as a drop of 5V).
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="5">
    <li>Design a current divider using 3 resistors in parallel (R<sub>1</sub>, R<sub>2</sub>, R<sub>3</sub>) such that the current through each resistor is 1 A, 2 A, and 3 A respectively, when the total current entering the parallel combination (I<sub>s</sub>) is 6 A.
        <br><strong>Hint</strong>: The voltage across all parallel resistors is the same. Use I<sub>x</sub> = V/R<sub>x</sub> and the current divider rule principles. You can choose one resistor value (or the common voltage) and determine the others. For example, if V = 6 Volts, then R<sub>1</sub> = 6Ω (for 1A), R<sub>2</sub> = 3Ω (for 2A), R<sub>3</sub> = 2Ω (for 3A).
    </li>
</ol>

    <!-- ... existing Basic Laws theory content (Ohm's Law, KVL, KCL definitions) ... -->
    <hr style="margin: 20px 0; border-color: var(--border-color);">
    <h3>Interactive Demo: Kirchhoff's Current Law (KCL) at a Node</h3>
    <p>Observe KCL: The sum of currents entering a node equals the sum of currents leaving it.
        Adjust the source currents (I<sub>s1</sub>, I<sub>s2</sub>) and see how the current through the resistor (I<sub>R</sub>) changes to maintain balance.
    </p>
    <div class="simulator-container" style="background-color: var(--primary-color); padding:15px; border-radius:5px;">
        <div class="controls" style="flex-basis: 100%; margin-bottom: 15px; display:grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap:10px;">
            <div>
                <label for="kclIs1">Source I<sub>s1</sub> (A):</label>
                <input type="number" id="kclIs1" value="2" step="0.1" style="width:80px;">
            </div>
            <div>
                <label for="kclIs2">Source I<sub>s2</sub> (A):</label>
                <input type="number" id="kclIs2" value="1" step="0.1" style="width:80px;">
            </div>
            <div>
                <label for="kclR1">Resistor R1 (Ω):</label>
                <input type="number" id="kclR1" value="10" min="1" step="1" style="width:80px;">
            </div>
            <button id="kclSimulateBtn" style="grid-column: 1 / -1; margin-top:10px;">Analyze Node</button>
        </div>
        <div class="circuit-diagram-area" style="flex-basis:48%; min-width:250px; height:auto; min-height:200px;">
            <h4>Node Diagram:</h4>
            <canvas id="kclCanvas" width="280" height="180" style="background-color:#2c3e50; border:1px solid var(--highlight-color);"></canvas>
        </div>
        <div class="results" id="kclResults" style="flex-basis:48%; min-width:220px; background-color:var(--code-bg); padding:10px; border-radius:4px;">
            <p><strong>Node Voltage (V<sub>node</sub>):</strong> <span id="kclVnode">N/A</span> V</p>
            <p><strong>Current thru R1 (I<sub>R1</sub>):</strong> <span id="kclIr1">N/A</span> A (Leaving)</p>
            <hr style="margin:5px 0; border-color: var(--highlight-color);">
            <p><strong>KCL Check:</strong></p>
            <p>∑I<sub>in</sub> = <span id="kclSumIn">N/A</span> A</p>
            <p>∑I<sub>out</sub> = <span id="kclSumOut">N/A</span> A</p>
            <p>Balance: <span id="kclBalance">N/A</span></p>
        </div>
    </div>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Draw clear diagrams for every problem.</li>
    <li>Label nodes and assumed current directions consistently before applying KCL/KVL.</li>
    <li>Master the <strong>voltage and current divider rules</strong>—they are extremely useful shortcuts.</li>
    <li>Remember that KCL deals with currents at a node, and KVL deals with voltages in a closed loop.</li>
</ul>
        </section>




        <section id="topic3">
            <h2>3: Methods of Analysis</h2>
            <h3>📚 Overview:</h3>
<p>This chapter teaches systematic techniques to solve complex linear circuits using <strong>nodal analysis</strong> and <strong>mesh analysis</strong>. These methods provide a structured approach to find all unknown voltages and currents in a circuit, and they are essential for both theoretical understanding and setting up problems for computer simulation.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Nodal Analysis</strong>:</h4>
<p>Nodal analysis is based on Kirchhoff's Current Law (KCL). The steps are:</p>
<ol>
    <li>Select a <strong>reference node</strong> (usually ground, denoted as 0V). All other node voltages are measured with respect to this reference.</li>
    <li>Identify and label the voltages at all other <strong>essential nodes</strong> (nodes where three or more circuit elements meet). Let these be V<sub>1</sub>, V<sub>2</sub>, ..., V<sub>n</sub>.</li>
    <li>Apply KCL at each non-reference essential node. Express the currents in terms of the node voltages and component values (e.g., current through a resistor R between nodes A and B is (V<sub>A</sub> - V<sub>B</sub>)/R, assuming current flows from A to B).</li>
    <li>Solve the resulting system of simultaneous linear equations for the unknown node voltages.</li>
</ol>
<p>Formula for KCL at a node: <code>Σ I<sub>leaving</sub> = 0</code>  or <code>Σ I<sub>entering</sub> = 0</code>.</p>

<h4>2. <strong>Supernode</strong>:</h4>
<p>A supernode is formed when a voltage source (dependent or independent) is connected between two non-reference essential nodes. A supernode effectively treats the voltage source and the two nodes it connects as a single larger node.</p>
<ul>
    <li>Write a KCL equation for the supernode, summing currents entering or leaving the entire supernode boundary.</li>
    <li>Write a constraint equation based on the voltage source within the supernode (e.g., V<sub>A</sub> - V<sub>B</sub> = V<sub>source</sub> if the positive terminal of V<sub>source</sub> is at node A).</li>
</ul>

<h4>3. <strong>Mesh Analysis</strong>:</h4>
<p>Mesh analysis (or loop analysis) is based on Kirchhoff's Voltage Law (KVL). It's typically used for planar circuits (circuits that can be drawn on a plane without wires crossing).</p>
<ol>
    <li>Identify all <strong>meshes</strong> (independent loops that do not contain any other loops within them).</li>
    <li>Assign a <strong>mesh current</strong> (e.g., I<sub>1</sub>, I<sub>2</sub>, ..., I<sub>m</sub>) to each mesh, usually assumed to flow in a clockwise direction.</li>
    <li>Apply KVL around each mesh. Express the voltages in terms of the mesh currents and component values (e.g., voltage across resistor R with mesh current I is IR. If a resistor is shared by two meshes, the current through it is the algebraic sum/difference of the mesh currents).</li>
    <li>Solve the resulting system of simultaneous linear equations for the unknown mesh currents.</li>
</ol>
<p>Formula for KVL around a mesh: <code>Σ V<sub>drops</sub> = Σ V<sub>rises</sub></code> or <code>Σ V = 0</code>.</p>

<h4>4. <strong>Supermesh</strong>:</h4>
<p>A supermesh is formed when a current source (dependent or independent) is shared between two meshes. The current source itself is excluded from the KVL path of the supermesh.</p>
<ul>
    <li>Write a KVL equation around the larger loop (supermesh) formed by the two meshes, excluding the current source and any elements in series with it.</li>
    <li>Write a constraint equation based on the current source (e.g., I<sub>1</sub> - I<sub>2</sub> = I<sub>source</sub> if I<sub>source</sub> flows in the direction of I<sub>1</sub>).</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Nodal Analysis (Simple)</h4>
<p><strong>Problem</strong>: Consider a circuit with a reference node (ground). Node A is connected to ground via a 5 Ω resistor. A 1 A current source injects current into Node A. Another resistor of 10 Ω connects Node A to Node B. Node B is connected to ground via a 2 Ω resistor. Find V<sub>A</sub> and V<sub>B</sub>.</p>
<p><strong>Solution Sketch</strong>:
    <br>KCL at Node A: <code>1A = (V<sub>A</sub> - 0V)/5Ω + (V<sub>A</sub> - V<sub>B</sub>)/10Ω</code>
    <br>KCL at Node B: <code>(V<sub>A</sub> - V<sub>B</sub>)/10Ω = (V<sub>B</sub> - 0V)/2Ω</code>
    <br>Solve these two simultaneous equations.
</p>

<h4>🔸 Example 2: Mesh Analysis (Simple)</h4>
<p><strong>Problem</strong>: A circuit contains a 12 V source in series with a 2 Ω resistor (R1) and a 4 Ω resistor (R2), forming a single loop. Find the mesh current I.</p>
<p><strong>Solution</strong>:
    <br>Assign mesh current I (clockwise).
    <br>Apply KVL: <code>+12V - I*R1 - I*R2 = 0</code>
    <br><code>12V - I*(2Ω) - I*(4Ω) = 0</code>
    <br><code>12V - I*(6Ω) = 0</code>
    <br><code>I = 12V / 6Ω = 2 A</code>
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Use nodal analysis to find the voltage at a single non-reference node (Node V<sub>1</sub>) connected to ground by a 10Ω resistor. A 2A current source feeds into V<sub>1</sub>, and a 5Ω resistor connects V<sub>1</sub> to a 10V source (positive terminal at 10V, other at V<sub>1</sub>).
        <br><strong>Sketch of KCL at V<sub>1</sub></strong>: <code>2A + (10V - V<sub>1</sub>)/5Ω = V<sub>1</sub>/10Ω</code>. Solve for V<sub>1</sub>.
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="2">
    <li>Analyze a circuit with two essential non-reference nodes and a voltage source between them (requiring a supernode). The circuit also includes several resistors connected to these nodes and to ground. Write down the supernode KCL and the constraint equation.
    </li>
    <li>Use mesh analysis to solve a two-mesh circuit containing a shared resistor. Assume a voltage source in the first mesh and no source in the second. Write the KVL equations for both meshes.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>Solve a 3-node circuit using nodal analysis where one of the nodes is connected to a dependent voltage source whose value depends on a voltage elsewhere in the circuit. Set up the system of equations.
    </li>
    <li>Analyze a circuit with two meshes and a current source shared between them (requiring a supermesh). Write down the supermesh KVL and the constraint equation.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Always clearly label your reference node (ground), other node voltages for nodal analysis, and mesh current directions for mesh analysis.</li>
    <li>Be meticulous with signs when writing KCL and KVL equations. A consistent convention for current direction (e.g., always leaving the node for KCL sum = 0) helps.</li>
    <li>When a resistor R is between nodes A and B, the current from A to B is (V<sub>A</sub> - V<sub>B</sub>)/R. The voltage drop from A to B is I*R.</li>
    <li>For dependent sources, express their controlling variable in terms of the node voltages (for nodal) or mesh currents (for mesh) before solving.</li>
    <li>Practice setting up the matrix form of the equations (e.g., [G][V] = [I] for nodal, [R][I] = [V] for mesh) as this is how computer simulators solve them. (This is expanded in Appendix A).</li>
</ul>
        </section>




        <section id="topic4">
            <h2>4: Circuit Theorems</h2>
            <h3>📚 Overview:</h3>
<p>This chapter introduces powerful circuit theorems that simplify the analysis of complex linear circuits. These theorems allow us to reduce parts of a circuit to much simpler equivalents or to analyze circuits with multiple sources more easily. Key theorems include <strong>Superposition</strong>, <strong>Thevenin's Theorem</strong>, <strong>Norton's Theorem</strong>, and the <strong>Maximum Power Transfer Theorem</strong>. Also, <strong>Source Transformation</strong> is a useful technique.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Linearity and Superposition Theorem</strong>:</h4>
<p>A circuit is linear if its output is directly proportional to its input. The <strong>Superposition Theorem</strong> states that in any linear circuit containing multiple independent sources, the current through or voltage across an element can be determined by summing algebraically the effects due to each independent source acting alone, with all other independent sources turned off (voltage sources replaced by short circuits, current sources by open circuits).</p>
<ul>
    <li>Dependent sources are left active.</li>
    <li>Useful for circuits with sources of different types (e.g., DC and AC) or frequencies.</li>
</ul>

<h4>2. <strong>Source Transformation</strong>:</h4>
<p>A practical voltage source (a voltage source V<sub>s</sub> in series with a resistor R<sub>s</sub>) can be replaced by an equivalent practical current source (a current source I<sub>s</sub> in parallel with a resistor R<sub>p</sub>), and vice-versa, without affecting the circuit external to their terminals.</p>
<ul>
    <li>The relationships are: <code>I<sub>s</sub> = V<sub>s</sub> / R<sub>s</sub></code> and <code>R<sub>p</sub> = R<sub>s</sub></code>.</li>
    <li>From current source to voltage source: <code>V<sub>s</sub> = I<sub>s</sub> * R<sub>p</sub></code> and <code>R<sub>s</sub> = R<sub>p</sub></code>.</li>
</ul>

<h4>3. <strong>Thevenin's Theorem</strong>:</h4>
<p>Thevenin's Theorem states that any linear two-terminal circuit can be replaced by an equivalent circuit consisting of a single voltage source (V<sub>Th</sub>) in series with a single resistor (R<sub>Th</sub>).</p>
<ul>
    <li><strong>V<sub>Th</sub> (Thevenin Voltage)</strong>: The open-circuit voltage measured at the two terminals of interest (A-B).</li>
    <li><strong>R<sub>Th</sub> (Thevenin Resistance)</strong>: The equivalent resistance looking back into the circuit from terminals A-B, with all independent sources turned off (voltage sources shorted, current sources opened). If dependent sources are present, R<sub>Th</sub> can be found by applying a test source (voltage or current) at A-B and measuring V<sub>test</sub>/I<sub>test</sub>, or by calculating V<sub>Th</sub>/I<sub>SC</sub> (where I<sub>SC</sub> is the short-circuit current).</li>
</ul>

<h4>4. <strong>Norton's Theorem</strong>:</h4>
<p>Norton's Theorem states that any linear two-terminal circuit can be replaced by an equivalent circuit consisting of a single current source (I<sub>N</sub>) in parallel with a single resistor (R<sub>N</sub>).</p>
<ul>
    <li><strong>I<sub>N</sub> (Norton Current)</strong>: The short-circuit current flowing through a short placed across the two terminals of interest (A-B).</li>
    <li><strong>R<sub>N</sub> (Norton Resistance)</strong>: Identical to the Thevenin resistance (R<sub>N</sub> = R<sub>Th</sub>).</li>
</ul>
<p>The Norton equivalent is related to the Thevenin equivalent: <code>I<sub>N</sub> = V<sub>Th</sub> / R<sub>Th</sub></code>.</p>

<h4>5. <strong>Maximum Power Transfer Theorem</strong>:</h4>
<p>For a given source (which can be represented by its Thevenin equivalent V<sub>Th</sub> and R<sub>Th</sub>), maximum power is transferred to a load resistor R<sub>L</sub> when the load resistance is equal to the Thevenin resistance of the source (<code>R<sub>L</sub> = R<sub>Th</sub></code>).</p>
<ul>
    <li>The maximum power transferred is: <code>P<sub>max</sub> = V<sub>Th</sub><sup>2</sup> / (4R<sub>Th</sub>)</code>.</li>
    <li>For AC circuits with complex impedances, maximum power transfer occurs when the load impedance Z<sub>L</sub> is the complex conjugate of the Thevenin impedance Z<sub>Th</sub> (<code>Z<sub>L</sub> = Z<sub>Th</sub><sup>*</sup></code>).</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Superposition</h4>
<p><strong>Problem</strong>: A circuit has a 10V DC source and a 2A DC current source, with several resistors. Find the voltage across a specific resistor using superposition.</p>
<p><strong>Solution Sketch</strong>:
    <br>1. Turn off the 2A current source (open circuit). Calculate the voltage across the resistor due to the 10V source alone.
    <br>2. Turn off the 10V voltage source (short circuit). Calculate the voltage across the resistor due to the 2A source alone.
    <br>3. Algebraically add the voltages found in steps 1 and 2 to get the total voltage.
</p>

<h4>🔸 Example 2: Thevenin Equivalent</h4>
<p><strong>Problem</strong>: A circuit has a 12 V source in series with a 4 Ω resistor (R1), and this combination is in parallel with a 6 Ω resistor (R2). Find the Thevenin equivalent circuit as seen by a load connected across R2.</p>
<p><strong>Solution Sketch for finding V<sub>Th</sub> and R<sub>Th</sub> "looking into" the network excluding R2, for terminals across R2</strong>:
    <br>V<sub>Th</sub> (open circuit voltage across R2's original position): If R2 is removed, it's a voltage divider with 12V across R1. This interpretation might be confusing.
    <br>A more common Thevenin problem: "Find Thevenin equivalent for the network supplying R_L".
    <br>Let's consider a simpler Thevenin setup for clarity: A 12V source in series with R1=3Ω, and terminals A-B are across R2=6Ω which is in series with R1.
    This doesn't make sense. Rephrasing:
    A 12V source is in series with R1=2Ω. Terminals A-B are taken after R1, to which a load would be connected. Find Thevenin as seen by the load.
    V<sub>Th</sub> = 12V (if A-B are directly after the source+R1 series branch open circuited, with nothing else).
    R<sub>Th</sub> = 2Ω.

    A better Thevenin Example: A 12V source is in series with R1 (2Ω). This combination feeds a parallel branch made of R2 (3Ω) and R3 (6Ω). Find Thevenin looking into the parallel branch from the source's side terminals. This is not how Thevenin is typically used.

    **Corrected Example for Thevenin**: A circuit consists of a 12V source, R1 = 4Ω in series with it. Then, R2 = 6Ω is connected in parallel with the terminals where a load R<sub>L</sub> would be. Find the Thevenin equivalent at the terminals of R<sub>L</sub> if R<sub>L</sub> were to be connected in parallel with R2. (The original problem in JSON had "across the 6Ω resistor" which is a bit ambiguous if it means "if 6Ω *is* the load" or "across points where 6Ω *was*").
    Let's assume the example from JSON implies finding Thevenin equivalent of the source part for a load. If R1=4Ω, R2=6Ω form a voltage divider fed by 12V, and we want Thevenin across R2:
    <br>V<sub>Th</sub>: Voltage across R2 = <code>12V * (6Ω / (4Ω + 6Ω)) = 12V * (6/10) = 7.2 V</code>.
    <br>R<sub>Th</sub>: Looking back from R2's terminals, short the 12V source. R1 is now in parallel with where the source was, effectively R1 is seen. R<sub>Th</sub> = <code>(R1 * (resistance of shorted source branch)) / (R1 + ...)</code> is not right.
    To find R<sub>Th</sub>: Short the voltage source. R1 and R2 are effectively in parallel when viewed from the terminals where a load *across* R2 would be, or if R2 *is* the section we are replacing.
    The example <code>V<sub>th</sub> = 12 ⋅ (6/(4+6)) = 7.2V, R<sub>th</sub> = (4⋅6)/(4+6) = 2.4Ω</code> implies finding the Thevenin equivalent of the network formed by the 12V source and the 4Ω resistor, *as seen by the 6Ω resistor* (if the 6Ω resistor is considered the load).
    So, terminals A-B are across where the 6Ω load would connect.
    V<sub>Th</sub> (open circuit voltage at A-B): If load is removed, A-B are across nothing or a very specific part.
    The problem in the JSON: "A 12V source in series with a 4 Ω resistor and a 6 Ω resistor. Find V<sub>th</sub> and R<sub>th</sub> across the 6 Ω resistor." implies the 6Ω is the load. So network is 12V -- 4Ω -- Terminals A-B -- (load 6Ω).
    V<sub>Th</sub> across A-B (6Ω removed): 12V. (Incorrect interpretation, it implies 4Ω and 6Ω are not directly in series to form the 'network')
    The JSON example interpretation implies the network being simplified is a voltage source of 12V in series with a 4Ω resistor, and the "load" across which we find Thevenin terms is the 6Ω resistor *if it were connected across the terminals of this simpler source*. This is not standard.
    Let's use a standard Thevenin Example: Circuit: 12V source, series R1=2Ω, then a node. From this node, R2=3Ω goes to ground. Also from this node, R3=6Ω goes to ground. Find Thevenin for R3.
    V<sub>Th</sub> (open-circuit voltage across R3's position): voltage across R2, which is <code>12V * (3Ω / (2Ω+3Ω))</code> if R3 removed.
    R<sub>Th</sub> (source shorted): R1 in series with (R2 || (resistance of shorted source)).

    The provided JSON example <code>V<sub>Th</sub> = 12 * (6/(4+6)) = 7.2 V, R<sub>Th</sub> = (4*6)/(4+6) = 2.4 Ω</code> must refer to a configuration where:
    A 12V source.
    Two terminals A and B.
    From one source terminal to A: R_internal_source1 = 0 (ideal source)
    From A to an intermediate node C: R1 = 4Ω
    From C to B: R2 = 6Ω
    From other source terminal to B: R_internal_source2 = 0
    This implies R1 and R2 are in series across the 12V source. Then the problem "across the 6Ω resistor" implies that 6Ω *is the load*.
    Then the "network" supplying this 6Ω load is the 12V source in series with the 4Ω resistor.
    V<sub>Th</sub> for this network is 12V.
    R<sub>Th</sub> for this network is 4Ω.
    This doesn't match the JSON solution.

    The JSON solution <code>V<sub>Th</sub> = 12 * (6/(4+6)) = 7.2V</code> matches a voltage divider where the output is across the 6Ω resistor, with 4Ω and 6Ω in series across 12V.
    And <code>R<sub>Th</sub> = (4*6)/(4+6) = 2.4Ω</code> matches the resistance seen looking into the terminals of this voltage divider when the 12V source is shorted (i.e., 4Ω in parallel with 6Ω).
    So, the configuration must be: 12V source. From terminals of this source, you connect a circuit that can be simplified. The specific question "across the 6Ω resistor" implies terminals are taken across this specific resistor.
    Let's assume the circuit is: 12V source, then R1=4Ω, then R2=6Ω, ALL IN SERIES. The load is connected IN PARALLEL with R2=6Ω.
    V<sub>Th</sub> (open circuit voltage across R2, i.e., with load removed): Voltage across R2 in the 4+6 series = <code>12V * (6/(4+6)) = 7.2V</code>.
    R<sub>Th</sub> (looking into terminals parallel to R2, with 12V source shorted): R1 (4Ω) is in parallel with R2 (6Ω) = <code>(4*6)/(4+6) = 2.4Ω</code>. This matches the JSON.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Use source transformation to convert a voltage source of 10V in series with a 2Ω resistor into an equivalent current source.
        <br><strong>Answer</strong>: Current source I<sub>s</sub> = 10V / 2Ω = 5A, in parallel with a 2Ω resistor.
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="2">
    <li>Find the Norton equivalent for a simple circuit with one voltage source and two resistors. Calculate I<sub>N</sub> (short-circuit current) and R<sub>N</sub> (equivalent resistance).
    </li>
    <li>Use the superposition theorem to find the current through a resistor in a circuit with one DC voltage source and one AC voltage source. (Note: For AC, use phasor analysis, and the final sum might be time-domain if phases differ).
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>A circuit contains a dependent source. Determine its Thevenin equivalent V<sub>Th</sub> and R<sub>Th</sub> using a test voltage source at the output terminals.
    </li>
    <li>For a given Thevenin equivalent source (V<sub>Th</sub> = 20V, R<sub>Th</sub> = 50Ω), calculate the value of load resistor R<sub>L</sub> for maximum power transfer and the value of that maximum power.
        <br><strong>Answer</strong>: For max power transfer, R<sub>L</sub> = R<sub>Th</sub> = 50Ω.
        <br>P<sub>max</sub> = V<sub>Th</sub><sup>2</sup> / (4R<sub>Th</sub>) = (20V)<sup>2</sup> / (4 * 50Ω) = 400 / 200 = 2 Watts.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Clearly define the two terminals (A-B) for which you are finding the Thevenin or Norton equivalent.</li>
    <li>When turning off sources for R<sub>Th</sub>/R<sub>N</sub>: voltage sources become short circuits (0V), current sources become open circuits (0A).</li>
    <li>Superposition only applies to linear circuits and for calculating currents/voltages, not power directly (power is I<sup>2</sup>R or V<sup>2</sup>/R, which are non-linear). Calculate currents/voltages via superposition, then find power.</li>
    <li>Source transformation can simplify circuits before applying nodal/mesh analysis or other theorems.</li>
    <li>The Maximum Power Transfer Theorem is crucial for impedance matching in applications like amplifiers and antennas.</li>
</ul>
        </section>



        <section id="topic5">
            <h2>5: Operational Amplifiers</h2>
            <h3>📚 Overview:</h3>
<p>Operational amplifiers (op-amps) are versatile, high-gain, direct-coupled voltage amplifiers with a differential input and typically a single-ended output. They are fundamental building blocks in analog electronics, used in a vast array of applications including amplification, filtering, signal conditioning, mathematical operations (summing, integration, differentiation), and waveform generation.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Ideal Op-Amp Characteristics</strong>:</h4>
<p>While real op-amps have limitations, the ideal model simplifies analysis significantly and is a good approximation for many applications. The ideal op-amp has:</p>
<ul>
    <li><strong>Infinite Open-Loop Gain (A<sub>OL</sub> → ∞)</strong>: Even a tiny difference between input voltages produces a large output voltage.</li>
    <li><strong>Infinite Input Impedance (R<sub>in</sub> → ∞)</strong>: No current flows into the input terminals (i<sub>+</sub> = 0, i<sub>-</sub> = 0).</li>
    <li><strong>Zero Output Impedance (R<sub>out</sub> = 0)</strong>: The output can supply any amount of current without a voltage drop.</li>
    <li><strong>Infinite Bandwidth (BW → ∞)</strong>: The gain is constant for all frequencies.</li>
    <li><strong>Zero Offset Voltage (V<sub>os</sub> = 0)</strong>: Output is zero when input voltage difference is zero.</li>
    <li><strong>Infinite Common-Mode Rejection Ratio (CMRR → ∞)</strong>: Rejects signals common to both inputs.</li>
    <li><strong>Infinite Slew Rate (SR → ∞)</strong>: Output voltage can change instantaneously.</li>
</ul>
<p>Two key rules for analyzing circuits with ideal op-amps in negative feedback configurations:</p>
<ol>
    <li>The voltage difference between the inverting (-) and non-inverting (+) input terminals is zero: <code>V<sub>+</sub> = V<sub>-</sub></code>. This is often called the "virtual short" or "virtual ground" if V<sub>+</sub> is grounded.</li>
    <li>The currents into the input terminals are zero: <code>i<sub>+</sub> = 0</code> and <code>i<sub>-</sub> = 0</code>.</li>
</ol>

<h4>2. <strong>Common Op-Amp Configurations (with Negative Feedback)</strong>:</h4>

<h5>a. <strong>Inverting Amplifier</strong>:</h5>
<p>Input signal is applied to the inverting (-) input through R<sub>1</sub>. The non-inverting (+) input is grounded. A feedback resistor R<sub>f</sub> connects the output to the inverting input.</p>
<p>Gain Formula: <code>V<sub>out</sub> = -(R<sub>f</sub> / R<sub>1</sub>) * V<sub>in</sub></code></p>
<p>Input Impedance: <code>R<sub>in_circuit</sub> = R<sub>1</sub></code></p>

<h5>b. <strong>Non-Inverting Amplifier</strong>:</h5>
<p>Input signal is applied directly to the non-inverting (+) input. A voltage divider (R<sub>1</sub> to ground, R<sub>f</sub> from output) connects to the inverting (-) input.</p>
<p>Gain Formula: <code>V<sub>out</sub> = (1 + R<sub>f</sub> / R<sub>1</sub>) * V<sub>in</sub></code></p>
<p>Input Impedance: <code>R<sub>in_circuit</sub> → ∞</code> (ideally)</p>

<h5>c. <strong>Voltage Follower (Unity Gain Buffer)</strong>:</h5>
<p>A special case of the non-inverting amplifier where R<sub>f</sub> = 0 (short circuit) and R<sub>1</sub> → ∞ (open circuit). The output is directly connected to the inverting input. Input signal is applied to the non-inverting input.</p>
<p>Gain Formula: <code>V<sub>out</sub> = V<sub>in</sub></code> (Gain = 1)</p>
<p>Used for impedance matching (high input impedance, low output impedance).</p>

<h5>d. <strong>Summing Amplifier (Inverting)</strong>:</h5>
<p>Multiple input signals (V<sub>1</sub>, V<sub>2</sub>, ...) are applied to the inverting input through separate resistors (R<sub>1</sub>, R<sub>2</sub>, ...). A single feedback resistor R<sub>f</sub> is used.</p>
<p>Output Formula: <code>V<sub>out</sub> = - ( (R<sub>f</sub>/R<sub>1</sub>)V<sub>1</sub> + (R<sub>f</sub>/R<sub>2</sub>)V<sub>2</sub> + ... )</code></p>

<h5>e. <strong>Difference Amplifier (Differential Amplifier)</strong>:</h5>
<p>Amplifies the difference between two input signals. Requires precise resistor matching for good common-mode rejection.</p>
<p>Output Formula (with R<sub>1</sub>=R<sub>3</sub> and R<sub>2</sub>=R<sub>f</sub>): <code>V<sub>out</sub> = (R<sub>f</sub> / R<sub>1</sub>) * (V<sub>2</sub> - V<sub>1</sub>)</code> (where V<sub>2</sub> is to non-inverting path, V<sub>1</sub> to inverting path).</p>

<h5>f. <strong>Integrator (Inverting)</strong>:</h5>
<p>Input resistor R<sub>1</sub>, feedback element is a capacitor C<sub>f</sub>.</p>
<p>Output Formula: <code>V<sub>out</sub>(t) = -(1 / (R<sub>1</sub>C<sub>f</sub>)) * ∫ V<sub>in</sub>(t) dt + V<sub>out</sub>(0)</code></p>

<h5>g. <strong>Differentiator (Inverting)</strong>:</h5>
<p>Input element is a capacitor C<sub>1</sub>, feedback resistor R<sub>f</sub>.</p>
<p>Output Formula: <code>V<sub>out</sub>(t) = -R<sub>f</sub>C<sub>1</sub> * (dV<sub>in</sub>(t) / dt)</code></p>
<p>(Practical differentiators often include a small resistor in series with C<sub>1</sub> for stability).</p>

<h4>3. <strong>Real Op-Amp Limitations</strong>:</h4>
<p>Real op-amps deviate from ideal behavior:</p>
<ul>
    <li><strong>Finite Open-Loop Gain</strong>: Typically 10<sup>5</sup> to 10<sup>7</sup>.</li>
    <li><strong>Finite Input Impedance</strong>: MΩ for BJT inputs, GΩ or TΩ for FET inputs.</li>
    <li><strong>Non-Zero Output Impedance</strong>: Typically tens to hundreds of Ohms.</li>
    <li><strong>Limited Bandwidth</strong>: Characterized by Gain-Bandwidth Product (GBWP). Gain decreases with frequency.</li>
    <li><strong>Input Offset Voltage (V<sub>os</sub>)</strong>: A small DC voltage at the output when inputs are shorted.</li>
    <li><strong>Input Bias Currents (I<sub>B</sub>)</strong>: Small DC currents flowing into input terminals.</li>
    <li><strong>Input Offset Current (I<sub>os</sub>)</strong>: Difference between the two bias currents.</li>
    <li><strong>Slew Rate (SR)</strong>: Maximum rate of change of output voltage (V/μs).</li>
    <li><strong>Common-Mode Rejection Ratio (CMRR)</strong>: Ability to reject signals common to both inputs.</li>
    <li><strong>Power Supply Rejection Ratio (PSRR)</strong>: Sensitivity to power supply variations.</li>
    <li><strong>Output Voltage Swing Limits</strong>: Output cannot exceed supply rails.</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Inverting Amplifier Design</h4>
<p><strong>Problem</strong>: Design an inverting amplifier with a voltage gain of -10. If the input resistor R<sub>1</sub> is 1 kΩ, what should be the value of the feedback resistor R<sub>f</sub>?</p>
<p><strong>Solution</strong>:
    <br>Gain A<sub>v</sub> = -R<sub>f</sub> / R<sub>1</sub>
    <br>-10 = -R<sub>f</sub> / 1 kΩ
    <br>R<sub>f</sub> = 10 * 1 kΩ = 10 kΩ
</p>

<h4>🔸 Example 2: Non-Inverting Amplifier Gain</h4>
<p><strong>Problem</strong>: A non-inverting amplifier has R<sub>1</sub> = 2 kΩ and R<sub>f</sub> = 18 kΩ. Calculate its voltage gain.</p>
<p><strong>Solution</strong>:
    <br>Gain A<sub>v</sub> = 1 + (R<sub>f</sub> / R<sub>1</sub>)
    <br>A<sub>v</sub> = 1 + (18 kΩ / 2 kΩ) = 1 + 9 = 10
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>An ideal op-amp is configured as a voltage follower. If the input voltage is 3.5V, what is the output voltage?
        <br><strong>Answer</strong>: V<sub>out</sub> = V<sub>in</sub> = 3.5V.</li>
    <li>For an inverting amplifier with R<sub>1</sub> = 5 kΩ and R<sub>f</sub> = 50 kΩ, what is the voltage gain?
        <br><strong>Answer</strong>: A<sub>v</sub> = - (50 kΩ / 5 kΩ) = -10.</li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>Design a summing amplifier that produces an output V<sub>out</sub> = -(2V<sub>1</sub> + 5V<sub>2</sub>). Choose a feedback resistor R<sub>f</sub> = 10 kΩ and find R<sub>1</sub> and R<sub>2</sub>.
        <br><strong>Hint</strong>: For V<sub>out</sub> = -((R<sub>f</sub>/R<sub>1</sub>)V<sub>1</sub> + (R<sub>f</sub>/R<sub>2</sub>)V<sub>2</sub>), equate coefficients.
        <br>R<sub>f</sub>/R<sub>1</sub> = 2 ⇒ R<sub>1</sub> = R<sub>f</sub>/2 = 10k/2 = 5 kΩ.
        <br>R<sub>f</sub>/R<sub>2</sub> = 5 ⇒ R<sub>2</sub> = R<sub>f</sub>/5 = 10k/5 = 2 kΩ.
    </li>
    <li>An op-amp integrator has R<sub>1</sub> = 100 kΩ and C<sub>f</sub> = 0.1 μF. If a constant DC input V<sub>in</sub> = 1V is applied for 1 second, what is the change in output voltage, assuming V<sub>out</sub>(0) = 0V?
        <br><strong>Answer</strong>: ΔV<sub>out</sub> = -(1 / (R<sub>1</sub>C<sub>f</sub>)) * V<sub>in</sub> * Δt = -(1 / (100k * 0.1μ)) * 1V * 1s = -(1 / 0.01) * 1 = -100V. (Note: practical op-amps would saturate).
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="5">
    <li>Consider a real op-amp with a finite open-loop gain A<sub>OL</sub> = 10<sup>5</sup>. Derive the closed-loop gain for a non-inverting amplifier configuration. How does it compare to the ideal gain?
        <br><strong>Hint</strong>: V<sub>out</sub> = A<sub>OL</sub> * (V<sub>+</sub> - V<sub>-</sub>). V<sub>-</sub> = V<sub>out</sub> * (R<sub>1</sub> / (R<sub>1</sub> + R<sub>f</sub>)). V<sub>+</sub> = V<sub>in</sub>. Substitute and solve for V<sub>out</sub>/V<sub>in</sub>.
    </li>
</ol>

    <!-- ... existing Op-Amp theory content ... -->
    <hr style="margin: 20px 0; border-color: var(--border-color);">
    <h3>Interactive Demo: Basic Op-Amp Amplifiers</h3>
    <p>Explore inverting and non-inverting ideal op-amp configurations. Input V<sub>in</sub>, R1, and Rf to see the calculated output voltage and gain.</p>
    <div class="simulator-container" style="background-color: var(--primary-color); padding:15px; border-radius:5px;">
        <div class="controls" style="flex-basis: 100%; margin-bottom: 15px; display:grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap:10px;">
            <div>
                <label for="opampVin">V<sub>in</sub> (V):</label>
                <input type="number" id="opampVin" value="1" step="0.1" style="width:80px;">
            </div>
            <div>
                <label for="opampR1">R1 (kΩ):</label>
                <input type="number" id="opampR1" value="1" min="0.1" step="0.1" style="width:80px;">
            </div>
            <div>
                <label for="opampRf">R<sub>f</sub> (kΩ):</label>
                <input type="number" id="opampRf" value="10" min="0.1" step="0.1" style="width:80px;">
            </div>
            <div>
                <label for="opampConfig">Configuration:</label>
                <select id="opampConfig" style="width:150px;">
                    <option value="inverting">Inverting Amplifier</option>
                    <option value="non-inverting">Non-Inverting Amplifier</option>
                </select>
            </div>
            <button id="opampSimulateBtn" style="grid-column: 1 / -1; margin-top:10px;">Calculate</button>
        </div>
        <div class="results" style="flex-basis:48%; min-width:250px;">
            <h4>Op-Amp Diagram:</h4>
            <canvas id="opampCanvas" width="250" height="150" style="background-color:#2c3e50; border:1px solid var(--highlight-color);"></canvas>
        </div>
        <div class="results" id="opampResults" style="flex-basis:48%; min-width:200px; background-color:var(--code-bg); padding:10px; border-radius:4px;">
            <p><strong>Output Voltage (V<sub>out</sub>):</strong> <span id="opampVout">N/A</span> V</p>
            <p><strong>Voltage Gain (A<sub>v</sub>):</strong> <span id="opampGain">N/A</span></p>
            <p id="opampFormulaDisplay" style="font-size:0.9em; margin-top:10px;">Formula: N/A</p>
        </div>
    </div>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Always start ideal op-amp problems with the two golden rules: V<sub>+</sub> = V<sub>-</sub> and i<sub>+</sub> = i<sub>-</sub> = 0.</li>
    <li>Understand how negative feedback works to stabilize the gain and achieve the "virtual short."</li>
    <li>Recognize common op-amp configurations (inverting, non-inverting, follower, summer, integrator, differentiator) and their gain formulas.</li>
    <li>Be aware of real op-amp limitations (like saturation at supply rails, bandwidth, slew rate) when considering practical applications.</li>
    <li>For integrators and differentiators, consider their behavior in the frequency domain (integrator is a low-pass filter, differentiator is a high-pass filter).</li>
</ul>
        </section>



        
        <section id="topic6">
            <h2>6: Capacitors and Inductors</h2>
            <h3>📚 Overview:</h3>
<p>This chapter introduces two fundamental passive linear circuit elements: <strong>capacitors</strong> and <strong>inductors</strong>. Unlike resistors which dissipate energy, capacitors and inductors store energy – capacitors in an electric field and inductors in a magnetic field. Their behavior is time-dependent and frequency-dependent, making them crucial for circuits involving AC signals, filtering, timing, and energy storage.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Capacitor</strong>:</h4>
<p>A capacitor consists of two conductive plates separated by an insulating material called a dielectric. It stores electric charge.</p>
<ul>
    <li><strong>Capacitance (C)</strong>: The ratio of the charge (Q) on one plate to the voltage (V) across the capacitor. Unit: Farad (F).
        <br><code>C = Q / V</code></li>
    <li><strong>Current-Voltage Relationship</strong>: The current through a capacitor is proportional to the rate of change of voltage across it.
        <br><code>i(t) = C * (dv(t)/dt)</code></li>
    <li><strong>Voltage-Current Relationship (Integral form)</strong>:
        <br><code>v(t) = (1/C) * ∫<sub>t0</sub><sup>t</sup> i(τ) dτ + v(t<sub>0</sub>)</code>
        <br>where <code>v(t<sub>0</sub>)</code> is the initial voltage at time t<sub>0</sub>.</li>
    <li><strong>Energy Stored</strong>: Energy stored in the electric field of a capacitor.
        <br><code>W<sub>C</sub> = (1/2) * C * v<sup>2</sup> = (1/2) * Q * v = Q<sup>2</sup> / (2C)</code></li>
    <li><strong>DC Behavior</strong>: In a DC steady-state circuit (after transients), a capacitor acts as an <strong>open circuit</strong> (<code>dv/dt = 0 ⇒ i = 0</code>).</li>
    <li><strong>AC Impedance</strong>: <code>Z<sub>C</sub> = 1 / (jωC) = -j / (ωC)</code>
        <br>where <code>ω = 2πf</code> is the angular frequency. Reactance <code>X<sub>C</sub> = -1/(ωC)</code>.</li>
    <li><strong>Capacitors in Series</strong>:
        <br><code>1/C<sub>eq</sub> = 1/C<sub>1</sub> + 1/C<sub>2</sub> + ... + 1/C<sub>n</sub></code></li>
    <li><strong>Capacitors in Parallel</strong>:
        <br><code>C<sub>eq</sub> = C<sub>1</sub> + C<sub>2</sub> + ... + C<sub>n</sub></code></li>
</ul>

<h4>2. <strong>Inductor</strong>:</h4>
<p>An inductor is typically a coil of wire. It stores energy in a magnetic field created by the current flowing through it.</p>
<ul>
    <li><strong>Inductance (L)</strong>: A measure of an inductor's ability to store magnetic energy. Unit: Henry (H).</li>
    <li><strong>Voltage-Current Relationship</strong>: The voltage across an inductor is proportional to the rate of change of current through it.
        <br><code>v(t) = L * (di(t)/dt)</code></li>
    <li><strong>Current-Voltage Relationship (Integral form)</strong>:
        <br><code>i(t) = (1/L) * ∫<sub>t0</sub><sup>t</sup> v(τ) dτ + i(t<sub>0</sub>)</code>
        <br>where <code>i(t<sub>0</sub>)</code> is the initial current at time t<sub>0</sub>.</li>
    <li><strong>Energy Stored</strong>: Energy stored in the magnetic field of an inductor.
        <br><code>W<sub>L</sub> = (1/2) * L * i<sup>2</sup></code></li>
    <li><strong>DC Behavior</strong>: In a DC steady-state circuit, an inductor acts as a <strong>short circuit</strong> (<code>di/dt = 0 ⇒ v = 0</code>).</li>
    <li><strong>AC Impedance</strong>: <code>Z<sub>L</sub> = jωL</code>
        <br>Reactance <code>X<sub>L</sub> = ωL</code>.</li>
    <li><strong>Inductors in Series</strong>:
        <br><code>L<sub>eq</sub> = L<sub>1</sub> + L<sub>2</sub> + ... + L<sub>n</sub></code></li>
    <li><strong>Inductors in Parallel</strong>:
        <br><code>1/L<sub>eq</sub> = 1/L<sub>1</sub> + 1/L<sub>2</sub> + ... + 1/L<sub>n</sub></code></li>
</ul>

<h4>3. <strong>Important Properties</strong>:</h4>
<ul>
    <li><strong>Continuity Condition</strong>: Voltage across a capacitor cannot change instantaneously (<code>v<sub>C</sub>(0<sup>+</sup>) = v<sub>C</sub>(0<sup>-</sup>)</code>). Current through an inductor cannot change instantaneously (<code>i<sub>L</sub>(0<sup>+</sup>) = i<sub>L</sub>(0<sup>-</sup>)</code>). This is because an instantaneous change would require infinite current (for C) or infinite voltage (for L).</li>
    <li>Capacitors oppose changes in voltage; inductors oppose changes in current.</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Capacitor Current</h4>
<p><strong>Problem</strong>: The voltage across a 5 μF capacitor is <code>v(t) = 10 cos(2000t) V</code>. Find the current <code>i(t)</code> through it.</p>
<p><strong>Solution</strong>:
    <br><code>i(t) = C * (dv(t)/dt)</code>
    <br><code>dv(t)/dt = d/dt (10 cos(2000t)) = 10 * (-sin(2000t)) * 2000 = -20000 sin(2000t) V/s</code>
    <br><code>i(t) = (5 * 10<sup>-6</sup> F) * (-20000 sin(2000t) V/s)</code>
    <br><code>i(t) = -0.1 sin(2000t) A = -100 sin(2000t) mA</code>
</p>

<h4>🔸 Example 2: Inductor Voltage</h4>
<p><strong>Problem</strong>: The current through a 0.1 H inductor is <code>i(t) = 10te<sup>-5t</sup> A</code>. Find the voltage <code>v(t)</code> across it.</p>
<p><strong>Solution</strong>:
    <br><code>v(t) = L * (di(t)/dt)</code>
    <br><code>di(t)/dt = d/dt (10te<sup>-5t</sup>) = 10 * (1*e<sup>-5t</sup> + t*(-5e<sup>-5t</sup>))</code> (using product rule)
    <br><code>di(t)/dt = 10e<sup>-5t</sup>(1 - 5t) A/s</code>
    <br><code>v(t) = (0.1 H) * (10e<sup>-5t</sup>(1 - 5t) A/s)</code>
    <br><code>v(t) = e<sup>-5t</sup>(1 - 5t) V</code>
</p>

<h4>🔸 Example 3: Energy Stored in a Capacitor</h4>
<p><strong>Problem</strong>: A 20 μF capacitor is charged to 100V. How much energy is stored?</p>
<p><strong>Solution</strong>:
    <br><code>W<sub>C</sub> = (1/2) * C * v<sup>2</sup></code>
    <br><code>W<sub>C</sub> = (1/2) * (20 * 10<sup>-6</sup> F) * (100 V)<sup>2</sup></code>
    <br><code>W<sub>C</sub> = (1/2) * (20 * 10<sup>-6</sup>) * 10000 J = 0.1 J</code>
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Calculate the reactance of a 10 mH inductor at a frequency of 60 Hz.
        <br><strong>Answer</strong>: <code>X<sub>L</sub> = ωL = 2πfL = 2π * 60 * (10 * 10<sup>-3</sup>) Ω ≈ 3.77 Ω</code></li>
    <li>Three capacitors (2 μF, 3 μF, 6 μF) are connected in series. What is their equivalent capacitance C<sub>eq</sub>?
        <br><strong>Answer</strong>: <code>1/C<sub>eq</sub> = 1/2 + 1/3 + 1/6 = (3+2+1)/6 = 6/6 = 1</code>. So, <code>C<sub>eq</sub> = 1 μF</code>.</li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>A voltage <code>v(t) = 12V</code> is applied across a 2H inductor at t=0, assuming initial current i(0)=0. Find the current i(t) for t > 0.
        <br><strong>Answer</strong>: <code>i(t) = (1/L) * ∫<sub>0</sub><sup>t</sup> v(τ) dτ = (1/2H) * ∫<sub>0</sub><sup>t</sup> 12 dτ = (1/2) * [12τ]<sub>0</sub><sup>t</sup> = 6t A</code>. (Note: current would rise indefinitely in an ideal inductor, practically limited by resistance).
    </li>
    <li>Two inductors, L1 = 4H and L2 = 12H, are in parallel. Find their equivalent inductance.
        <br><strong>Answer</strong>: <code>1/L<sub>eq</sub> = 1/4 + 1/12 = (3+1)/12 = 4/12 = 1/3</code>. So, <code>L<sub>eq</sub> = 3 H</code>.</li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="5">
    <li>The current in a 0.5 F capacitor is <code>i(t) = 6|t| A</code> for all t. If <code>v(0) = -10V</code>, find <code>v(t)</code> for t > 0.
        <br><strong>Hint</strong>: For t > 0, |t| = t. Integrate <code>i(t) = 6t</code> from 0 to t and add initial voltage.
        <br><code>v(t) = (1/0.5) * ∫<sub>0</sub><sup>t</sup> 6τ dτ - 10 = 2 * [3τ<sup>2</sup>]<sub>0</sub><sup>t</sup> - 10 = 6t<sup>2</sup> - 10 V</code>, for t > 0.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Remember the fundamental i-v relationships: <code>i = C dv/dt</code> for capacitors, <code>v = L di/dt</code> for inductors. "CIVIL": In a Capacitor (C), current (I) leads voltage (V); voltage (V) leads current (I) in an inductor (L).</li>
    <li>Capacitor voltage and inductor current cannot change instantaneously. This is key for analyzing switching circuits (transients).</li>
    <li>In DC steady state: capacitors act as open circuits, inductors act as short circuits.</li>
    <li>Capacitors in series combine like resistors in parallel; inductors in series combine like resistors in series. (And vice-versa for parallel combinations).</li>
    <li>Energy stored in capacitors is related to voltage squared; energy in inductors is related to current squared.</li>
</ul>
        </section>




        <section id="topic7">
            <h2>7: First-Order Circuits</h2>
            <h3>📚 Overview:</h3>
<p>First-order circuits are those that contain only one energy storage element (either a single capacitor or a single inductor) along with resistive elements. Their behavior is described by first-order linear differential equations. This chapter focuses on analyzing the <strong>transient response</strong> of these circuits – how they react when a switch changes state or a source is applied/removed. We will look at both <strong>natural response</strong> (source-free) and <strong>step response</strong> (response to a DC source).</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Types of First-Order Circuits</strong>:</h4>
<ul>
    <li><strong>RC Circuit</strong>: Contains resistors and one capacitor.</li>
    <li><strong>RL Circuit</strong>: Contains resistors and one inductor.</li>
</ul>

<h4>2. <strong>The Concept of Time Constant (τ)</strong>:</h4>
<p>The time constant is a measure of how quickly a first-order circuit responds to a change. It characterizes the rate of exponential decay or rise of voltages and currents in the circuit.</p>
<ul>
    <li>For an <strong>RC circuit</strong>: <code>τ = R<sub>Th</sub>C</code>
        <br>(where R<sub>Th</sub> is the Thevenin resistance seen by the capacitor)</li>
    <li>For an <strong>RL circuit</strong>: <code>τ = L / R<sub>Th</sub></code>
        <br>(where R<sub>Th</sub> is the Thevenin resistance seen by the inductor)</li>
</ul>
<p>After one time constant (t = τ), the response has reached approximately 63.2% of its final change (for rising exponentials like charging) or decayed to about 36.8% of its initial value (for decaying exponentials like discharging). After 5τ, the circuit is generally considered to have reached its steady state (more than 99.3% of the change).</p>

<h4>3. <strong>Natural Response (Source-Free Response)</strong>:</h4>
<p>This describes the behavior of the circuit when any independent sources are turned off (or disconnected) after the circuit has been energized and is now discharging its stored energy through resistive elements.</p>
<ul>
    <li><strong>RC Circuit (Discharging Capacitor)</strong>:
        <br>If a capacitor C, initially charged to V<sub>0</sub>, discharges through a resistor R:
        <br><code>v<sub>C</sub>(t) = V<sub>0</sub> * e<sup>-t/τ</sup></code> for t ≥ 0 (where τ = RC)
        <br><code>i<sub>C</sub>(t) = -(V<sub>0</sub>/R) * e<sup>-t/τ</sup></code> (current direction typically out of positive terminal of C)</li>
    <li><strong>RL Circuit (Decaying Current in Inductor)</strong>:
        <br>If an inductor L, with an initial current I<sub>0</sub>, has its current decay through a resistor R:
        <br><code>i<sub>L</sub>(t) = I<sub>0</sub> * e<sup>-t/τ</sup></code> for t ≥ 0 (where τ = L/R)
        <br><code>v<sub>L</sub>(t) = -I<sub>0</sub>R * e<sup>-t/τ</sup> = -L * (d/dt)i<sub>L</sub>(t)</code></li>
</ul>

<h4>4. <strong>Step Response (Response to a DC Source)</strong>:</h4>
<p>This describes the circuit's behavior when a DC voltage or current source is suddenly applied (e.g., by closing a switch).</p>
<ul>
    <li><strong>RC Circuit (Charging Capacitor)</strong>:
        <br>A capacitor C charging towards a source voltage V<sub>s</sub> through a resistor R, with initial voltage v<sub>C</sub>(0):
        <br><code>v<sub>C</sub>(t) = V<sub>s</sub> + (v<sub>C</sub>(0) - V<sub>s</sub>) * e<sup>-t/τ</sup></code>
        <br>If v<sub>C</sub>(0) = 0 (initially uncharged): <code>v<sub>C</sub>(t) = V<sub>s</sub> * (1 - e<sup>-t/τ</sup>)</code></li>
    <li><strong>RL Circuit (Current Build-up in Inductor)</strong>:
        <br>An inductor L in series with a resistor R connected to a DC voltage source V<sub>s</sub>, with initial current i<sub>L</sub>(0):
        <br><code>i<sub>L</sub>(t) = V<sub>s</sub>/R + (i<sub>L</sub>(0) - V<sub>s</sub>/R) * e<sup>-t/τ</sup></code>
        <br>If i<sub>L</sub>(0) = 0 (initially no current): <code>i<sub>L</sub>(t) = (V<sub>s</sub>/R) * (1 - e<sup>-t/τ</sup>)</code></li>
</ul>

<h4>5. <strong>General Solution Form for First-Order Circuits</strong>:</h4>
<p>Any voltage or current x(t) in a first-order circuit can be expressed as:</p>
<p><code>x(t) = x(∞) + [x(0<sup>+</sup>) - x(∞)] * e<sup>-t/τ</sup></code> for t ≥ 0<sup>+</sup></p>
<p>Where:</p>
<ul>
    <li><code>x(0<sup>+</sup>)</code> is the value of x just after the switching event (at t=0<sup>+</sup>). Remember v<sub>C</sub> and i<sub>L</sub> continuity rules.</li>
    <li><code>x(∞)</code> is the final, steady-state value of x as t → ∞ (capacitor as open circuit, inductor as short circuit in DC steady state).</li>
    <li><code>τ</code> is the time constant of the circuit for t > 0.</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: RC Natural Response (Discharge)</h4>
<p><strong>Problem</strong>: A 10 μF capacitor is initially charged to 10 V. At t=0, it is connected across a 1 kΩ resistor. Find the voltage v<sub>C</sub>(t) across the capacitor for t ≥ 0.</p>
<p><strong>Solution</strong>:
    <br>V<sub>0</sub> = v<sub>C</sub>(0<sup>+</sup>) = 10 V.
    <br>τ = RC = (1 kΩ) * (10 μF) = (1000 Ω) * (10 * 10<sup>-6</sup> F) = 0.01 s = 10 ms.
    <br>x(∞) = v<sub>C</sub>(∞) = 0 V (capacitor fully discharges).
    <br><code>v<sub>C</sub>(t) = x(∞) + [x(0<sup>+</sup>) - x(∞)] * e<sup>-t/τ</sup></code>
    <br><code>v<sub>C</sub>(t) = 0 + [10 - 0] * e<sup>-t/0.01</sup> = 10 * e<sup>-100t</sup> V</code> for t ≥ 0.
</p>

<h4>🔸 Example 2: RL Step Response (Current Build-up)</h4>
<p><strong>Problem</strong>: A series RL circuit has R = 10 Ω, L = 5 H, and a 20 V DC source applied at t=0. Assume the initial current in the inductor is zero (i<sub>L</sub>(0<sup>-</sup>)=0). Find i<sub>L</sub>(t) for t ≥ 0.</p>
<p><strong>Solution</strong>:
    <br>i<sub>L</sub>(0<sup>+</sup>) = i<sub>L</sub>(0<sup>-</sup>) = 0 A.
    <br>τ = L/R = 5 H / 10 Ω = 0.5 s.
    <br>i<sub>L</sub>(∞) = V<sub>s</sub>/R = 20 V / 10 Ω = 2 A (inductor is a short in DC steady state).
    <br><code>i<sub>L</sub>(t) = i<sub>L</sub>(∞) + [i<sub>L</sub>(0<sup>+</sup>) - i<sub>L</sub>(∞)] * e<sup>-t/τ</sup></code>
    <br><code>i<sub>L</sub>(t) = 2 + [0 - 2] * e<sup>-t/0.5</sup> = 2 * (1 - e<sup>-2t</sup>) A</code> for t ≥ 0.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>An RC circuit has R = 2 kΩ and C = 5 μF. What is its time constant τ?
        <br><strong>Answer</strong>: τ = RC = (2000 Ω) * (5 * 10<sup>-6</sup> F) = 0.01 s = 10 ms.</li>
    <li>An RL circuit has L = 100 mH and the time constant τ = 20 ms. What is the Thevenin resistance R<sub>Th</sub> seen by the inductor?
        <br><strong>Answer</strong>: τ = L/R<sub>Th</sub> ⇒ R<sub>Th</sub> = L/τ = (0.1 H) / (0.02 s) = 5 Ω.</li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>A 1 μF capacitor, initially uncharged, is connected in series with a 5 kΩ resistor and a 12 V DC source at t=0. Write the expression for the voltage across the capacitor v<sub>C</sub>(t) for t ≥ 0. How long does it take for the capacitor voltage to reach 6V?
        <br><strong>Answer Part 1</strong>: τ = 5k * 1μ = 5ms. v<sub>C</sub>(t) = 12(1 - e<sup>-t/0.005</sup>) V.
        <br><strong>Answer Part 2</strong>: 6 = 12(1 - e<sup>-t/0.005</sup>) ⇒ 0.5 = 1 - e<sup>-200t</sup> ⇒ e<sup>-200t</sup> = 0.5 ⇒ -200t = ln(0.5) ⇒ t = -ln(0.5)/200 ≈ 3.466 ms.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>In a source-free RL circuit, the inductor current is 100 mA at t=0 and 36.8 mA at t=2s. If L = 2H, find R.
        <br><strong>Hint</strong>: Use i<sub>L</sub>(t) = I<sub>0</sub>e<sup>-t/τ</sup>. At t=τ, current is I<sub>0</sub>*e<sup>-1</sup> ≈ 0.368*I<sub>0</sub>.
        <br>So, 2s is one time constant (τ = 2s).
        <br>τ = L/R ⇒ R = L/τ = 2H / 2s = 1 Ω.
    </li>
    <li>A circuit has a switch that changes position at t=0. For t < 0, a capacitor C is charged to 5V. For t > 0, the capacitor is connected to a different resistive network and a 10V source. Find R<sub>Th</sub> for t>0, and write v<sub>C</sub>(t) for t > 0.
        <br><strong>Hint</strong>: This requires finding initial condition v<sub>C</sub>(0<sup>+</sup>) = v<sub>C</sub>(0<sup>-</sup>) = 5V. Then find the Thevenin equivalent (R<sub>Th_new</sub> and V<sub>Th_new</sub> = x(∞)) for the new circuit seen by C. Then use general formula.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Always identify the circuit conditions just before switching (t=0<sup>-</sup>) to find initial capacitor voltages or inductor currents.</li>
    <li>Remember that v<sub>C</sub>(0<sup>+</sup>) = v<sub>C</sub>(0<sup>-</sup>) and i<sub>L</sub>(0<sup>+</sup>) = i<sub>L</sub>(0<sup>-</sup>).</li>
    <li>For t > 0, simplify the circuit to find the Thevenin resistance R<sub>Th</sub> seen by the storage element. This R<sub>Th</sub> is used to calculate τ.</li>
    <li>Determine the final steady-state value x(∞) by considering the behavior of C (open circuit) or L (short circuit) as t → ∞ in the new circuit configuration.</li>
    <li>The general solution <code>x(t) = x(∞) + [x(0<sup>+</sup>) - x(∞)]e<sup>-t/τ</sup></code> is very powerful and works for all first-order circuits.</li>
</ul>
        </section>




        <section id="topic8">
            <h2>8: Second-Order Circuits</h2>
            <h3>📚 Overview:</h3>
<p>Second-order circuits contain <strong>two independent energy storage elements</strong> (e.g., an inductor and a capacitor, or two inductors, or two capacitors that cannot be combined into a single equivalent). Their behavior is described by second-order linear differential equations. This chapter primarily focuses on <strong>RLC circuits (Series RLC and Parallel RLC)</strong>. We'll analyze their <strong>natural response</strong> (source-free) and <strong>step response</strong>, leading to concepts like <strong>damping</strong> (overdamped, critically damped, underdamped) and <strong>natural/resonant frequencies</strong>.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Types of Second-Order Circuits</strong>:</h4>
<ul>
    <li><strong>Series RLC Circuit</strong>: Resistor, inductor, and capacitor connected in series.
        <br>Characteristic Equation (for current i or charge q): <code>Ls<sup>2</sup> + Rs + 1/C = 0</code> or <code>s<sup>2</sup> + (R/L)s + 1/(LC) = 0</code>.
    </li>
    <li><strong>Parallel RLC Circuit</strong>: Resistor, inductor, and capacitor connected in parallel.
        <br>Characteristic Equation (for voltage v): <code>Cs<sup>2</sup> + (1/R)s + 1/L = 0</code> or <code>s<sup>2</sup> + (1/(RC))s + 1/(LC) = 0</code>.
    </li>
</ul>

<h4>2. <strong>General Form of Second-Order Differential Equation</strong>:</h4>
<p>For many second-order systems, the homogeneous differential equation can be written as:</p>
<p><code>d<sup>2</sup>x(t)/dt<sup>2</sup> + 2α dx(t)/dt + ω<sub>0</sub><sup>2</sup> x(t) = 0</code> (for natural response)</p>
<p>Where:</p>
<ul>
    <li><code>x(t)</code> is the variable of interest (voltage or current).</li>
    <li><strong>α (Neper Frequency or Damping Factor)</strong>:
        <ul>
            <li>For Series RLC: <code>α = R / (2L)</code></li>
            <li>For Parallel RLC: <code>α = 1 / (2RC)</code></li>
        </ul>
    </li>
    <li><strong>ω<sub>0</sub> (Undamped Natural Frequency or Resonant Frequency)</strong>:
        <ul>
            <li>For both Series and Parallel RLC: <code>ω<sub>0</sub> = 1 / √(LC)</code></li>
        </ul>
    </li>
</ul>
<p>The roots of the characteristic equation (<code>s<sup>2</sup> + 2αs + ω<sub>0</sub><sup>2</sup> = 0</code>) are:
<br><code>s<sub>1,2</sub> = -α ± √(α<sup>2</sup> - ω<sub>0</sub><sup>2</sup>)</code></p>

<h4>3. <strong>Damping Conditions and Natural Response Forms</strong>:</h4>
<p>The nature of the response depends on the relationship between α and ω<sub>0</sub> (or the discriminant α<sup>2</sup> - ω<sub>0</sub><sup>2</sup>).</p>
<ul>
    <li><strong>Case 1: Overdamped (α > ω<sub>0</sub>)</strong>
        <ul>
            <li>Roots s<sub>1</sub> and s<sub>2</sub> are real, distinct, and negative.</li>
            <li>Response: <code>x(t) = A<sub>1</sub>e<sup>s<sub>1</sub>t</sup> + A<sub>2</sub>e<sup>s<sub>2</sub>t</sup></code></li>
            <li>The circuit returns to equilibrium slowly without oscillation. Constants A<sub>1</sub> and A<sub>2</sub> are found from initial conditions (x(0) and dx(0)/dt).</li>
        </ul>
    </li>
    <li><strong>Case 2: Critically Damped (α = ω<sub>0</sub>)</strong>
        <ul>
            <li>Roots s<sub>1</sub> = s<sub>2</sub> = -α are real and equal.</li>
            <li>Response: <code>x(t) = (A<sub>1</sub> + A<sub>2</sub>t)e<sup>-αt</sup></code></li>
            <li>The circuit returns to equilibrium as quickly as possible without oscillation.</li>
        </ul>
    </li>
    <li><strong>Case 3: Underdamped (α < ω<sub>0</sub>)</strong>
        <ul>
            <li>Roots are complex conjugates: <code>s<sub>1,2</sub> = -α ± jω<sub>d</sub></code>
                <br>where <code>ω<sub>d</sub> = √(ω<sub>0</sub><sup>2</sup> - α<sup>2</sup>)</code> is the <strong>damped natural frequency</strong>.</li>
            <li>Response: <code>x(t) = e<sup>-αt</sup> (A<sub>1</sub>cos(ω<sub>d</sub>t) + A<sub>2</sub>sin(ω<sub>d</sub>t))</code>
                <br>or equivalently <code>x(t) = Ae<sup>-αt</sup>cos(ω<sub>d</sub>t + φ)</code></li>
            <li>The circuit oscillates with decreasing amplitude as it returns to equilibrium.</li>
        </ul>
    </li>
    <li>(Case 4: Undamped (α = 0, R=0 ideally) - Response: <code>x(t) = A<sub>1</sub>cos(ω<sub>0</sub>t) + A<sub>2</sub>sin(ω<sub>0</sub>t)</code> - sustained oscillation at ω<sub>0</sub>. Not typically focused on in basic RLC due to ideal R=0).</li>
</ul>

<h4>4. <strong>Step Response of RLC Circuits</strong>:</h4>
<p>The step response is the sum of the transient response (natural response form) and the steady-state response (final value).</p>
<p><code>x(t) = x<sub>transient</sub>(t) + x<sub>ss</sub>(t)</code></p>
<ul>
    <li><code>x<sub>ss</sub>(t)</code> is the final value of x(t) as t → ∞. In DC steady-state, capacitors are open circuits, inductors are short circuits.</li>
    <li>The form of <code>x<sub>transient</sub>(t)</code> is the same as the natural response (overdamped, critically damped, or underdamped).</li>
    <li>Constants (A<sub>1</sub>, A<sub>2</sub> or A, φ) are found using initial conditions: x(0<sup>+</sup>) and dx(0<sup>+</sup>)/dt.
        <br>Remember: v<sub>C</sub>(0<sup>+</sup>) = v<sub>C</sub>(0<sup>-</sup>) and i<sub>L</sub>(0<sup>+</sup>) = i<sub>L</sub>(0<sup>-</sup>).
        <br>Other initial values like i<sub>C</sub>(0<sup>+</sup>) or v<sub>L</sub>(0<sup>+</sup>) can be found by analyzing the circuit at t=0<sup>+</sup>.
    </li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Series RLC Natural Response - Damping Condition</h4>
<p><strong>Problem</strong>: A series RLC circuit has R = 6 Ω, L = 1 H, and C = 0.04 F. Determine if the natural response is overdamped, critically damped, or underdamped.</p>
<p><strong>Solution</strong>:
    <br>α = R / (2L) = 6 / (2 * 1) = 3 Np/s.
    <br>ω<sub>0</sub> = 1 / √(LC) = 1 / √(1 * 0.04) = 1 / √(0.04) = 1 / 0.2 = 5 rad/s.
    <br>Compare α and ω<sub>0</sub>: α = 3, ω<sub>0</sub> = 5.
    <br>Since α < ω<sub>0</sub> (3 < 5), the response is <strong>underdamped</strong>.
</p>

<h4>🔸 Example 2: Parallel RLC Step Response (Finding initial derivatives)</h4>
<p><strong>Problem</strong>: A parallel RLC circuit with R=10Ω, L=1H, C=0.1F is connected to a 1A DC current source at t=0. Assume v<sub>C</sub>(0<sup>-</sup>)=0V and i<sub>L</sub>(0<sup>-</sup>)=0A. Find dv<sub>C</sub>(0<sup>+</sup>)/dt.</p>
<p><strong>Solution Sketch</strong>:
    <br>v<sub>C</sub>(0<sup>+</sup>) = v<sub>C</sub>(0<sup>-</sup>) = 0V.
    <br>i<sub>L</sub>(0<sup>+</sup>) = i<sub>L</sub>(0<sup>-</sup>) = 0A.
    <br>At t=0<sup>+</sup>, write KCL at the top node (where voltage is v<sub>C</sub>):
    <br><code>I<sub>source</sub> = i<sub>R</sub>(0<sup>+</sup>) + i<sub>L</sub>(0<sup>+</sup>) + i<sub>C</sub>(0<sup>+</sup>)</code>
    <br><code>1A = v<sub>C</sub>(0<sup>+</sup>)/R + i<sub>L</sub>(0<sup>+</sup>) + C * dv<sub>C</sub>(0<sup>+</sup>)/dt</code>
    <br><code>1A = 0/10 + 0 + 0.1 * dv<sub>C</sub>(0<sup>+</sup>)/dt</code>
    <br><code>dv<sub>C</sub>(0<sup>+</sup>)/dt = 1A / 0.1F = 10 V/s</code>.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>For a series RLC circuit with R = 5 Ω, L = 0.5 H, C = 0.02 F. Calculate α and ω<sub>0</sub>.
        <br><strong>Answer</strong>: α = R/(2L) = 5/(2*0.5) = 5 Np/s. ω<sub>0</sub> = 1/√(0.5*0.02) = 1/√(0.01) = 1/0.1 = 10 rad/s.
    </li>
    <li>Is the circuit in problem 1 overdamped, underdamped, or critically damped?
        <br><strong>Answer</strong>: α = 5, ω<sub>0</sub> = 10. Since α < ω<sub>0</sub>, it is underdamped.</li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>A series RLC circuit has R=40Ω, L=4H, C=1/400 F. It is source-free with v<sub>C</sub>(0)=10V and i<sub>L</sub>(0)=0A. Find v<sub>C</sub>(t) for t > 0.
        <br><strong>Hint</strong>: Determine damping type. α=40/(2*4)=5. ω<sub>0</sub>=1/√(4*1/400) = 1/√(1/100) = 10. Underdamped.
        <br>ω<sub>d</sub> = √(10<sup>2</sup>-5<sup>2</sup>) = √(75) = 5√3 ≈ 8.66 rad/s.
        <br>Form: v<sub>C</sub>(t) = e<sup>-5t</sup>(A<sub>1</sub>cos(8.66t) + A<sub>2</sub>sin(8.66t)).
        <br>Use v<sub>C</sub>(0)=10V ⇒ A<sub>1</sub>=10.
        <br>i<sub>C</sub>(0<sup>+</sup>) = C dv<sub>C</sub>(0<sup>+</sup>)/dt. Also i<sub>C</sub>(0<sup>+</sup>) = i<sub>L</sub>(0<sup>+</sup>) = 0 (since in series).
        <br>So dv<sub>C</sub>(0<sup>+</sup>)/dt = 0. Differentiate v<sub>C</sub>(t) and set to 0 at t=0 to find A<sub>2</sub>.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>A parallel RLC circuit is driven by a DC voltage source V<sub>s</sub> that is switched on at t=0. R=1kΩ, L=10mH, C=100nF, V<sub>s</sub>=5V. Initial conditions are zero. Find the expression for the inductor current i<sub>L</sub>(t) for t > 0.
        <br><strong>Hint</strong>: This is a step response. Find the steady-state current i<sub>L</sub>(∞). Determine damping. Use initial conditions i<sub>L</sub>(0<sup>+</sup>) and di<sub>L</sub>(0<sup>+</sup>)/dt to find constants in the transient solution.
        <br>Note that v<sub>L</sub>(0<sup>+</sup>) = v<sub>C</sub>(0<sup>+</sup>) = 0. Since v<sub>L</sub> = L di<sub>L</sub>/dt, then di<sub>L</sub>(0<sup>+</sup>)/dt = 0.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Always calculate α and ω<sub>0</sub> first to determine the damping type. This dictates the form of the natural/transient response.</li>
    <li>Remember the initial conditions that cannot change instantaneously: v<sub>C</sub>(0<sup>+</sup>) = v<sub>C</sub>(0<sup>-</sup>) and i<sub>L</sub>(0<sup>+</sup>) = i<sub>L</sub>(0<sup>-</sup>).</li>
    <li>To find the second initial condition (e.g., dv<sub>C</sub>(0<sup>+</sup>)/dt or di<sub>L</sub>(0<sup>+</sup>)/dt), analyze the circuit at t=0<sup>+</sup> using KVL/KCL and the known values of v<sub>C</sub>(0<sup>+</sup>) and i<sub>L</sub>(0<sup>+</sup>). For instance, i<sub>C</sub>(0<sup>+</sup>) = C dv<sub>C</sub>(0<sup>+</sup>)/dt and v<sub>L</sub>(0<sup>+</sup>) = L di<sub>L</sub>(0<sup>+</sup>)/dt.</li>
    <li>For step responses, correctly identify the final steady-state values (x(∞)). In DC steady state, inductors are shorts, capacitors are opens.</li>
    <li>Be meticulous with algebra when solving for the constants (A<sub>1</sub>, A<sub>2</sub>) using the two initial conditions.</li>
</ul>
        </section>




        <section id="topic9">
            <h2>9: Sinusoids and Phasors</h2>
            <h3>📚 Overview:</h3>
<p>This chapter introduces the analysis of circuits driven by sinusoidal sources (AC circuits), which are prevalent in power systems and communications. We'll learn how to represent <strong>sinusoidal signals</strong> mathematically and then introduce <strong>phasors</strong>. Phasors are complex numbers that represent the amplitude and phase of a sinusoid, transforming differential equations in the time domain into algebraic equations in the phasor (or frequency) domain, greatly simplifying AC circuit analysis for steady-state conditions.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Sinusoidal Signals (AC Waveforms)</strong>:</h4>
<p>A sinusoidal voltage or current can be represented as:</p>
<ul>
    <li>As a sine function: <code>x(t) = X<sub>m</sub> sin(ωt + φ)</code></li>
    <li>As a cosine function: <code>x(t) = X<sub>m</sub> cos(ωt + θ)</code></li>
</ul>
<p>Where:</p>
<ul>
    <li><code>X<sub>m</sub></code> is the <strong>amplitude</strong> (or peak value).</li>
    <li><code>ω</code> is the <strong>angular frequency</strong> in radians per second (rad/s). <code>ω = 2πf</code>, where <code>f</code> is the cyclical frequency in Hertz (Hz).</li>
    <li><code>(ωt + φ)</code> or <code>(ωt + θ)</code> is the <strong>argument</strong> of the sinusoid.</li>
    <li><code>φ</code> or <code>θ</code> is the <strong>phase angle</strong> (or phase shift) in radians or degrees. It indicates the horizontal shift of the waveform.
        <ul>
            <li>If φ > 0, the waveform is shifted to the left (leads).</li>
            <li>If φ < 0, the waveform is shifted to the right (lags).</li>
        </ul>
    </li>
</ul>
<p>Conventionally, cosine is used as the reference for phasor representation.
    <br><code>sin(ωt + φ) = cos(ωt + φ - 90°)</code>
    <br><code>-cos(ωt + φ) = cos(ωt + φ ± 180°)</code>
    <br><code>-sin(ωt + φ) = cos(ωt + φ + 90°)</code> or <code>cos(ωt + φ - 90° ± 180°)</code>
</p>

<h4>2. <strong>Phasor Representation</strong>:</h4>
<p>A phasor is a complex number that represents the amplitude and phase of a sinusoid at a specific frequency ω (which must be the same for all signals in the circuit being analyzed).</p>
<p>Given a time-domain cosine signal: <code>x(t) = X<sub>m</sub> cos(ωt + θ)</code></p>
<p>Its phasor representation is: <code><strong>X</strong> = X<sub>m</sub> ∠ θ</code> (polar form)</p>
<p>This comes from Euler's identity: <code>X<sub>m</sub> cos(ωt + θ) = Re{X<sub>m</sub>e<sup>j(ωt + θ)</sup>} = Re{(X<sub>m</sub>e<sup>jθ</sup>)e<sup>jωt</sup>}</code>. The term <code>X<sub>m</sub>e<sup>jθ</sup></code> is the phasor in exponential form, which is <code>X<sub>m</sub>(cosθ + jsinθ)</code> in rectangular form.</p>
<ul>
    <li><strong>Time Domain → Phasor Domain</strong>:
        <br><code>v(t) = V<sub>m</sub> cos(ωt + φ<sub>v</sub>) ↔ <strong>V</strong> = V<sub>m</sub> ∠ φ<sub>v</sub></code>
        <br><code>i(t) = I<sub>m</sub> cos(ωt + φ<sub>i</sub>) ↔ <strong>I</strong> = I<sub>m</sub> ∠ φ<sub>i</sub></code>
    </li>
    <li><strong>Phasor Domain → Time Domain</strong> (Remember to include <code>cos(ωt ...)</code>):
        <br><code><strong>V</strong> = V<sub>m</sub> ∠ φ<sub>v</sub> ↔ v(t) = V<sub>m</sub> cos(ωt + φ<sub>v</sub>)</code>
    </li>
</ul>
<p><strong>Important Note</strong>: Phasors do not contain frequency information explicitly (ω is implicit and constant). They are only for signals of the <em>same frequency</em>.</p>

<h4>3. <strong>Phasor Relationships for R, L, and C (Impedance)</strong>:</h4>
<p>The relationship between voltage and current phasors for basic elements is defined by impedance (Z) or admittance (Y=1/Z).</p>
<ul>
    <li><strong>Resistor (R)</strong>:
        <br><code>v(t) = Ri(t)</code>
        <br>Phasor: <code><strong>V</strong> = R<strong>I</strong></code>
        <br>Impedance: <code>Z<sub>R</sub> = R</code> (purely real, phase shift = 0°)
    </li>
    <li><strong>Inductor (L)</strong>:
        <br><code>v(t) = L di(t)/dt</code>
        <br>Phasor: <code><strong>V</strong> = jωL<strong>I</strong></code> (Derivative in time domain becomes multiplication by jω in phasor domain)
        <br>Impedance: <code>Z<sub>L</sub> = jωL = ωL ∠ 90°</code> (purely imaginary, positive; voltage leads current by 90°)
        <br>Reactance: <code>X<sub>L</sub> = ωL</code>
    </li>
    <li><strong>Capacitor (C)</strong>:
        <br><code>i(t) = C dv(t)/dt</code> or <code>v(t) = (1/C)∫i(t)dt</code>
        <br>Phasor: <code><strong>I</strong> = jωC<strong>V</strong></code> or <code><strong>V</strong> = (1/(jωC))<strong>I</strong></code> (Integral in time domain becomes division by jω)
        <br>Impedance: <code>Z<sub>C</sub> = 1/(jωC) = -j/(ωC) = (1/(ωC)) ∠ -90°</code> (purely imaginary, negative; current leads voltage by 90°)
        <br>Reactance: <code>X<sub>C</sub> = -1/(ωC)</code>
    </li>
</ul>
<p><strong>Impedance (Z)</strong> is the AC equivalent of resistance: <code>Z = R + jX</code>, where X is reactance.
<br><strong>Admittance (Y)</strong> is the reciprocal of impedance: <code>Y = 1/Z = G + jB</code>, where G is conductance and B is susceptance.</p>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Converting Sinusoid to Phasor</h4>
<p><strong>Problem</strong>: Given <code>v(t) = 120 sin(100πt + 60°) V</code>, express it as a cosine function and find its phasor.</p>
<p><strong>Solution</strong>:
    <br>Convert to cosine: <code>v(t) = 120 cos(100πt + 60° - 90°) = 120 cos(100πt - 30°) V</code>.
    <br>Phasor: <code><strong>V</strong> = 120 ∠ -30° V</code>.
    <br>Here, V<sub>m</sub> = 120 V, ω = 100π rad/s, θ = -30°.
</p>

<h4>🔸 Example 2: Calculating Impedance</h4>
<p><strong>Problem</strong>: A 10 mH inductor and a 50 μF capacitor are in a circuit operating at f = 60 Hz. Find their impedances.</p>
<p><strong>Solution</strong>:
    <br>ω = 2πf = 2π(60) ≈ 377 rad/s.
    <br>Inductor Impedance: <code>Z<sub>L</sub> = jωL = j(377 rad/s)(10 * 10<sup>-3</sup> H) = j3.77 Ω</code>.
    <br>Capacitor Impedance: <code>Z<sub>C</sub> = 1/(jωC) = 1/(j(377 rad/s)(50 * 10<sup>-6</sup> F)) = 1/(j0.01885) = -j/(0.01885) ≈ -j53.05 Ω</code>.
</p>

<h4>🔸 Example 3: Phasor to Time Domain</h4>
<p><strong>Problem</strong>: A current phasor is <code><strong>I</strong> = 5 ∠ 45° A</code> at ω = 50 rad/s. Find i(t).</p>
<p><strong>Solution</strong>:
    <br><code>i(t) = I<sub>m</sub> cos(ωt + θ) = 5 cos(50t + 45°) A</code>.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Express <code>v(t) = -10 cos(4t + 50°)</code> as a phasor.
        <br><strong>Answer</strong>: <code>-10 cos(4t + 50°) = 10 cos(4t + 50° ± 180°)</code>.
        Using +180: <code>10 cos(4t + 230°) → <strong>V</strong> = 10 ∠ 230°</code> or <code>10 ∠ -130°</code>.
        Using -180: <code>10 cos(4t - 130°) → <strong>V</strong> = 10 ∠ -130°</code>.
    </li>
    <li>A resistor has R = 100 Ω. If the current phasor is <code><strong>I</strong> = 2 ∠ 0° A</code>, what is the voltage phasor <strong>V</strong>?
        <br><strong>Answer</strong>: <code><strong>V</strong> = R<strong>I</strong> = 100 * (2 ∠ 0°) = 200 ∠ 0° V</code>.</li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>Given <code>v(t) = 100 sin(377t - 120°) V</code>, what is the current i(t) through a 20 μF capacitor connected across it? Express i(t) in the time domain.
        <br><strong>Hint</strong>: Convert v(t) to cosine phasor. Calculate Z<sub>C</sub>. Find <strong>I</strong> = <strong>V</strong>/Z<sub>C</sub>. Convert <strong>I</strong> back to time domain.
        <br>v(t) = 100 cos(377t - 120° - 90°) = 100 cos(377t - 210°). <strong>V</strong> = 100 ∠ -210° V.
        <br>Z<sub>C</sub> = 1/(j377 * 20*10<sup>-6</sup>) = 1/(j0.00754) = -j132.63 Ω = 132.63 ∠ -90° Ω.
        <br><strong>I</strong> = (100 ∠ -210°) / (132.63 ∠ -90°) ≈ 0.754 ∠ (-210 - (-90))° = 0.754 ∠ -120° A.
        <br>i(t) = 0.754 cos(377t - 120°) A.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>Derive the expression for impedance Z of a series RLC circuit in terms of R, L, C, and ω. What is the condition for resonance based on this impedance?
        <br><strong>Answer</strong>: <code>Z = Z<sub>R</sub> + Z<sub>L</sub> + Z<sub>C</sub> = R + jωL + 1/(jωC) = R + j(ωL - 1/(ωC))</code>.
        <br>Resonance occurs when the imaginary part is zero: <code>ωL - 1/(ωC) = 0 ⇒ ω<sup>2</sup>LC = 1 ⇒ ω = 1/√(LC)</code>. At resonance, Z = R (minimum).
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Always ensure all sinusoids are expressed in cosine form with positive amplitudes before converting to phasors.</li>
    <li>Keep track of the angular frequency ω as it's crucial for calculating impedances but is not part of the phasor itself.</li>
    <li>Master complex number arithmetic (addition, subtraction, multiplication, division in both rectangular and polar forms) as it's fundamental to phasor calculations (See Appendix B).</li>
    <li>Remember "ELI the ICE man": For an inductor (L), voltage (E) leads current (I). For a capacitor (C), current (I) leads voltage (E).</li>
    <li>Phasor analysis simplifies solving AC steady-state circuits to algebraic manipulations similar to DC circuits, but with complex numbers.</li>
</ul>
        </section>




        <section id="topic10">
            <h2>10: Sinusoidal Steady-State Analysis</h2>
            <h3>📚 Overview:</h3>
<p>This chapter applies the concepts of <strong>phasors and complex impedances</strong> (introduced in Chapter 9) to analyze AC circuits operating in the <strong>sinusoidal steady state</strong>. This means we assume that all transient effects have died out and all voltages and currents in the circuit are sinusoids of the same frequency as the source(s). We'll adapt familiar DC analysis techniques like nodal analysis, mesh analysis, and circuit theorems (Thevenin, Norton, Superposition) for AC circuits using complex algebra.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>AC Steady-State Assumptions</strong>:</h4>
<ul>
    <li>All independent sources are sinusoidal and have the same angular frequency ω. (If multiple frequencies exist, superposition must be used, analyzing one frequency at a time).</li>
    <li>The circuit is linear.</li>
    <li>The circuit has reached steady state; initial conditions are no longer affecting the response.</li>
    <li>All calculations are performed in the <strong>phasor domain</strong> using complex numbers.</li>
</ul>

<h4>2. <strong>Impedance (Z) and Admittance (Y)</strong>:</h4>
<p>Recap from Chapter 9:</p>
<ul>
    <li>Resistor: <code>Z<sub>R</sub> = R</code></li>
    <li>Inductor: <code>Z<sub>L</sub> = jωL</code></li>
    <li>Capacitor: <code>Z<sub>C</sub> = 1/(jωC) = -j/(ωC)</code></li>
</ul>
<p>Impedances combine like resistances:</p>
<ul>
    <li><strong>Series Impedances</strong>: <code>Z<sub>eq</sub> = Z<sub>1</sub> + Z<sub>2</sub> + ... + Z<sub>n</sub></code></li>
    <li><strong>Parallel Impedances</strong>: <code>1/Z<sub>eq</sub> = 1/Z<sub>1</sub> + 1/Z<sub>2</sub> + ... + 1/Z<sub>n</sub></code>
        <br>For two in parallel: <code>Z<sub>eq</sub> = (Z<sub>1</sub>Z<sub>2</sub>) / (Z<sub>1</sub> + Z<sub>2</sub>)</code></li>
</ul>
<p>Admittance <code>Y = 1/Z</code>. Admittances in parallel add directly: <code>Y<sub>eq</sub> = Y<sub>1</sub> + Y<sub>2</sub> + ... + Y<sub>n</sub></code>.</p>

<h4>3. <strong>Phasor Form of Basic Circuit Laws</strong>:</h4>
<ul>
    <li><strong>Ohm’s Law for AC</strong>: <code><strong>V</strong> = <strong>I</strong>Z</code> (where <strong>V</strong> and <strong>I</strong> are phasors)</li>
    <li><strong>Kirchhoff's Current Law (KCL) in Phasor Form</strong>: The algebraic sum of phasor currents entering a node is zero.
        <br><code>Σ <strong>I</strong><sub>k</sub> = 0</code></li>
    <li><strong>Kirchhoff's Voltage Law (KVL) in Phasor Form</strong>: The algebraic sum of phasor voltages around any closed loop is zero.
        <br><code>Σ <strong>V</strong><sub>k</sub> = 0</code></li>
</ul>

<h4>4. <strong>AC Nodal Analysis</strong>:</h4>
<p>The procedure is the same as DC nodal analysis, but equations involve complex node voltages (phasors) and complex impedances/admittances.</p>
<ol>
    <li>Select a reference node. Assign phasor voltages <strong>V<sub>1</sub>, V<sub>2</sub>, ...</strong> to other essential nodes.</li>
    <li>Apply KCL at each non-reference node, expressing currents as <code><strong>I</strong> = (<strong>V</strong><sub>node1</sub> - <strong>V</strong><sub>node2</sub>) / Z</code> or <code><strong>I</strong> = <strong>V</strong>Y</code>.</li>
    <li>Solve the system of complex linear equations for the unknown phasor node voltages.</li>
</ol>

<h4>5. <strong>AC Mesh Analysis</strong>:</h4>
<p>Similar to DC mesh analysis, but using phasor mesh currents and complex impedances.</p>
<ol>
    <li>Assign phasor mesh currents <strong>I<sub>1</sub>, I<sub>2</sub>, ...</strong> to each mesh.</li>
    <li>Apply KVL around each mesh, expressing voltage drops as <code><strong>V</strong> = <strong>I</strong>Z</code>.</li>
    <li>Solve the system of complex linear equations for the unknown phasor mesh currents.</li>
</ol>

<h4>6. <strong>Superposition in AC Circuits</strong>:</h4>
<p>If a linear circuit has multiple independent sinusoidal sources operating at <strong>different frequencies</strong>, superposition <em>must</em> be used. Analyze the circuit for each frequency separately (impedances will change with ω), then convert each phasor result back to the time domain and sum the time-domain signals.</p>
<p>If sources have the <strong>same frequency</strong>, you can still use superposition. Find the phasor contribution from each source acting alone (other voltage sources shorted, current sources opened), then sum these <em>phasor</em> contributions to get the total phasor response. Convert the final phasor sum back to the time domain if needed.</p>

<h4>7. <strong>Thevenin's and Norton's Theorems in AC Circuits</strong>:</h4>
<ul>
    <li><strong>Thevenin Voltage (<strong>V<sub>Th</sub></strong>)</strong>: The open-circuit phasor voltage at the terminals of interest.</li>
    <li><strong>Norton Current (<strong>I<sub>N</sub></strong>)</strong>: The short-circuit phasor current through the terminals.</li>
    <li><strong>Thevenin/Norton Impedance (Z<sub>Th</sub> = Z<sub>N</sub>)</strong>: The complex impedance looking back into the circuit from the terminals with all independent sources turned off (voltage sources shorted, current sources opened). If dependent sources are present, use a test source method.</li>
</ul>
<p>Relationship: <code><strong>V<sub>Th</sub></strong> = <strong>I<sub>N</sub></strong>Z<sub>Th</sub></code>.</p>

<h4>8. <strong>AC Bridges (e.g., Maxwell Bridge, Hay Bridge, Schering Bridge)</strong>:</h4>
<p>Used for measuring unknown L, C, and R values. The bridge is balanced when the detector current (or voltage) is zero. This typically leads to a condition where products of opposite arm impedances are equal: <code>Z<sub>1</sub>Z<sub>4</sub> = Z<sub>2</sub>Z<sub>3</sub></code>.</p>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Series RLC Impedance and Current</h4>
<p><strong>Problem</strong>: A series circuit has R=30Ω, L=0.1H, C=50μF. It's connected to a voltage source <code>v<sub>s</sub>(t) = 100 cos(200t) V</code>. Find the total impedance Z<sub>total</sub> and the phasor current <strong>I</strong>.</p>
<p><strong>Solution</strong>:
    <br>ω = 200 rad/s.
    <br>Z<sub>R</sub> = 30 Ω.
    <br>Z<sub>L</sub> = jωL = j(200)(0.1) = j20 Ω.
    <br>Z<sub>C</sub> = 1/(jωC) = 1/(j(200)(50*10<sup>-6</sup>)) = 1/(j0.01) = -j100 Ω.
    <br>Z<sub>total</sub> = Z<sub>R</sub> + Z<sub>L</sub> + Z<sub>C</sub> = 30 + j20 - j100 = 30 - j80 Ω.
    <br>Convert Z<sub>total</sub> to polar: |Z| = √(30<sup>2</sup> + (-80)<sup>2</sup>) = √(900 + 6400) = √(7300) ≈ 85.44 Ω.
    <br>θ = tan<sup>-1</sup>(-80/30) ≈ -69.44°. So Z<sub>total</sub> ≈ 85.44 ∠ -69.44° Ω.
    <br>Phasor voltage <strong>V<sub>s</sub></strong> = 100 ∠ 0° V.
    <br><strong>I</strong> = <strong>V<sub>s</sub></strong> / Z<sub>total</sub> = (100 ∠ 0°) / (85.44 ∠ -69.44°) ≈ 1.17 ∠ (0 - (-69.44))° = 1.17 ∠ 69.44° A.
</p>

<h4>🔸 Example 2: AC Nodal Analysis Sketch</h4>
<p><strong>Problem</strong>: A circuit has two non-reference nodes <strong>V<sub>1</sub></strong> and <strong>V<sub>2</sub></strong>. A current source <strong>I<sub>s</sub></strong> feeds into <strong>V<sub>1</sub></strong>. Impedance Z<sub>A</sub> connects <strong>V<sub>1</sub></strong> to ground. Impedance Z<sub>B</sub> connects <strong>V<sub>1</sub></strong> to <strong>V<sub>2</sub></strong>. Impedance Z<sub>C</sub> connects <strong>V<sub>2</sub></strong> to ground. Write nodal equations.</p>
<p><strong>Solution Sketch</strong>:
    <br>KCL at Node <strong>V<sub>1</sub></strong>: <code><strong>I<sub>s</sub></strong> = <strong>V<sub>1</sub></strong>/Z<sub>A</sub> + (<strong>V<sub>1</sub></strong> - <strong>V<sub>2</sub></strong>)/Z<sub>B</sub></code>
    <br>KCL at Node <strong>V<sub>2</sub></strong>: <code>(<strong>V<sub>1</sub></strong> - <strong>V<sub>2</sub></strong>)/Z<sub>B</sub> = <strong>V<sub>2</sub></strong>/Z<sub>C</sub></code>
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>A 10 Ω resistor is in parallel with a capacitor whose reactance X<sub>C</sub> = -10 Ω (at a given frequency). What is the total equivalent impedance Z<sub>eq</sub>?
        <br><strong>Answer</strong>: Z<sub>R</sub> = 10Ω, Z<sub>C</sub> = -j10Ω.
        <br>Z<sub>eq</sub> = (10 * (-j10)) / (10 - j10) = -j100 / (10 - j10).
        <br>Multiply by conjugate: (-j100 * (10 + j10)) / ((10 - j10)(10 + j10)) = (-j1000 + 1000) / (100 + 100) = (1000 - j1000) / 200 = 5 - j5 Ω.
        <br>Or: 5√2 ∠ -45° Ω.
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="2">
    <li>Use AC mesh analysis to find the current through an inductor in a two-mesh circuit driven by an AC voltage source. The meshes share a common capacitor.
        <br>(Problem setup involves writing two KVL equations with complex impedances and phasor currents).
    </li>
    <li>Find the Thevenin equivalent (<strong>V<sub>Th</sub></strong> and Z<sub>Th</sub>) for an AC circuit containing one AC voltage source, a resistor, and an inductor, viewed from specified terminals.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>A Maxwell bridge is used to measure an unknown inductance L<sub>x</sub> in series with resistance R<sub>x</sub>. If the bridge arms are standard capacitor C<sub>s</sub>, resistors R<sub>1</sub>, R<sub>2</sub>, R<sub>3</sub>, derive the balance conditions for L<sub>x</sub> and R<sub>x</sub>.
        <br><strong>Hint</strong>: At balance, <code>Z<sub>x</sub>Z<sub>3</sub> = Z<sub>1</sub>Z<sub>2</sub></code> (assuming Z<sub>x</sub> is (R<sub>x</sub>+jωL<sub>x</sub>), Z<sub>1</sub> is R<sub>1</sub>, Z<sub>2</sub> involves C<sub>s</sub>, Z<sub>3</sub> is R<sub>3</sub> based on bridge configuration). Equate real and imaginary parts.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Always convert all element values to their complex impedances (or admittances) at the given operating frequency ω before starting analysis.</li>
    <li>Be extremely comfortable with complex number arithmetic (addition, subtraction, multiplication, division in both rectangular and polar forms). Many errors occur here.</li>
    <li>Apply DC analysis techniques (nodal, mesh, Thevenin, etc.) systematically, but replace R with Z, V with <strong>V</strong>, I with <strong>I</strong>.</li>
    <li>For superposition with different frequencies, solve the circuit for each frequency separately, convert individual phasor results to time-domain, and then add the time-domain signals. Phasors of different frequencies cannot be directly added.</li>
    <li>When converting final phasor answers back to time domain, remember to include the <code>cos(ωt + θ)</code> term and use the correct ω.</li>
</ul>
        </section>




        <section id="topic11">
            <h2>11: AC Power Analysis</h2>
            <h3>📚 Overview:</h3>
<p>This chapter deals with power in AC circuits. Unlike DC circuits where power is simply P = VI, AC power is more complex due to phase differences between voltage and current. We will define and analyze <strong>instantaneous power, average (real) power, reactive power, apparent power, complex power</strong>, and the <strong>power factor</strong>. Understanding these concepts is crucial for designing efficient electrical systems and for billing in power utilities.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Instantaneous Power (p(t))</strong>:</h4>
<p>The power at any instant in time: <code>p(t) = v(t) * i(t)</code>.</p>
<p>If <code>v(t) = V<sub>m</sub> cos(ωt + θ<sub>v</sub>)</code> and <code>i(t) = I<sub>m</sub> cos(ωt + θ<sub>i</sub>)</code>, let φ = θ<sub>v</sub> - θ<sub>i</sub> be the phase difference between voltage and current.
<br>Then, <code>p(t) = (1/2)V<sub>m</sub>I<sub>m</sub>[cos(φ) + cos(2ωt + θ<sub>v</sub> + θ<sub>i</sub>)]</code>
<br>Or, using RMS values (V<sub>rms</sub> = V<sub>m</sub>/√2, I<sub>rms</sub> = I<sub>m</sub>/√2):
<br><code>p(t) = V<sub>rms</sub>I<sub>rms</sub>cos(φ) [1 + cos(2ωt + 2θ<sub>v</sub>)] - V<sub>rms</sub>I<sub>rms</sub>sin(φ) [sin(2ωt + 2θ<sub>v</sub>)]</code> (alternative form)
<br>The instantaneous power has a constant component and a component that varies at twice the source frequency (2ω).</p>

<h4>2. <strong>Average Power (P) or Real Power</strong>:</h4>
<p>The average of the instantaneous power over one period. This is the actual power dissipated by resistive elements in the circuit (converted to heat or work).</p>
<p><code>P = (1/T) ∫<sub>0</sub><sup>T</sup> p(t) dt = (1/2)V<sub>m</sub>I<sub>m</sub>cos(φ) = V<sub>rms</sub>I<sub>rms</sub>cos(φ)</code></p>
<ul>
    <li>Unit: <strong>Watts (W)</strong>.</li>
    <li>Only resistors dissipate average power. Ideal inductors and capacitors do not dissipate average power (they store and release energy).</li>
    <li><code>cos(φ)</code> is the power factor.</li>
</ul>

<h4>3. <strong>Reactive Power (Q)</strong>:</h4>
<p>The power that oscillates between the source and reactive components (inductors and capacitors). It represents the peak power associated with energy storage in these elements.</p>
<p><code>Q = (1/2)V<sub>m</sub>I<sub>m</sub>sin(φ) = V<sub>rms</sub>I<sub>rms</sub>sin(φ)</code></p>
<ul>
    <li>Unit: <strong>Volt-Amperes Reactive (VAR)</strong>.</li>
    <li>Inductors absorb reactive power (Q > 0 if φ > 0, i.e., current lags voltage - inductive load).</li>
    <li>Capacitors supply reactive power (Q < 0 if φ < 0, i.e., current leads voltage - capacitive load).</li>
</ul>

<h4>4. <strong>Apparent Power (S)</strong>:</h4>
<p>The product of the RMS voltage and RMS current. It is the "apparent" power that the source must supply, regardless of the phase difference.</p>
<p><code>S = V<sub>rms</sub>I<sub>rms</sub></code></p>
<ul>
    <li>Unit: <strong>Volt-Amperes (VA)</strong>.</li>
    <li><code>S = √(P<sup>2</sup> + Q<sup>2</sup>)</code>.</li>
</ul>

<h4>5. <strong>Power Factor (pf)</strong>:</h4>
<p>The ratio of real power (P) to apparent power (S). It indicates how effectively the current is being converted into useful work.</p>
<p><code>pf = P/S = cos(φ)</code></p>
<ul>
    <li><code>0 ≤ pf ≤ 1</code>.</li>
    <li><strong>Lagging Power Factor</strong>: Current lags voltage (inductive load, φ > 0).</li>
    <li><strong>Leading Power Factor</strong>: Current leads voltage (capacitive load, φ < 0).</li>
    <li><strong>Unity Power Factor (pf=1)</strong>: Purely resistive load or resonant circuit (φ = 0, Q=0, S=P). This is the most efficient power utilization.</li>
</ul>

<h4>6. <strong>Complex Power (<strong>S</strong>)</strong>:</h4>
<p>A complex quantity that combines real power and reactive power:</p>
<p><code><strong>S</strong> = P + jQ</code>
<br><code><strong>S</strong> = <strong>V<sub>rms</sub></strong> <strong>I<sub>rms</sub></strong><sup>*</sup></code> (where <strong>V<sub>rms</sub></strong> = V<sub>rms</sub>∠θ<sub>v</sub>, <strong>I<sub>rms</sub></strong><sup>*</sup> = I<sub>rms</sub>∠-θ<sub>i</sub>, so <strong>S</strong> = V<sub>rms</sub>I<sub>rms</sub> ∠(θ<sub>v</sub> - θ<sub>i</sub>) = S ∠φ)</p>
<ul>
    <li>Magnitude: <code>|<strong>S</strong>| = S = V<sub>rms</sub>I<sub>rms</sub></code> (Apparent Power).</li>
    <li>The angle of <strong>S</strong> is φ, the power factor angle.</li>
</ul>
<p>The <strong>Power Triangle</strong> is a graphical representation: P (adjacent), Q (opposite), S (hypotenuse), with angle φ.</p>

<h4>7. <strong>Power Factor Correction</strong>:</h4>
<p>The process of improving a lagging power factor (typically due to inductive loads like motors) by adding capacitors in parallel with the load. This reduces the reactive power drawn from the source, thereby reducing the overall apparent power and line currents for the same real power delivered.</p>
<p>If a load has real power P and initial power factor cos(φ<sub>old</sub>), and we want to improve it to cos(φ<sub>new</sub>):</p>
<ul>
    <li>Q<sub>old</sub> = P tan(φ<sub>old</sub>)</li>
    <li>Q<sub>new</sub> = P tan(φ<sub>new</sub>)</li>
    <li>Reactive power to be supplied by capacitor: Q<sub>C</sub> = Q<sub>old</sub> - Q<sub>new</sub> (for lagging pf improvement Q<sub>C</sub> is negative as capacitor "supplies" VARs, or equivalently, cancels out inductive VARs).</li>
    <li>Capacitance needed: <code>C = Q<sub>C</sub> / (ωV<sub>rms</sub><sup>2</sup>)</code> (where Q<sub>C</sub> magnitude is used).</li>
</ul>

<h4>8. <strong>Maximum Average Power Transfer (AC)</strong>:</h4>
<p>For an AC source with Thevenin impedance Z<sub>Th</sub> = R<sub>Th</sub> + jX<sub>Th</sub>, maximum average power is transferred to a load impedance Z<sub>L</sub> = R<sub>L</sub> + jX<sub>L</sub> when Z<sub>L</sub> is the complex conjugate of Z<sub>Th</sub>:
<br><code>Z<sub>L</sub> = Z<sub>Th</sub><sup>*</sup> ⇒ R<sub>L</sub> = R<sub>Th</sub></code> and <code>X<sub>L</sub> = -X<sub>Th</sub></code>.
<br>The maximum power is <code>P<sub>max</sub> = |<strong>V<sub>Th_rms</sub></strong>|<sup>2</sup> / (4R<sub>Th</sub>)</code>.
<br>(If R<sub>L</sub> can be varied but X<sub>L</sub> is fixed, or if only |Z<sub>L</sub>| can be varied, the conditions change slightly).</p>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: AC Power Calculation</h4>
<p><strong>Problem</strong>: An AC load draws 10A RMS current from a 120V RMS, 60Hz source. The current lags the voltage by 30°. Calculate P, Q, S, and pf.</p>
<p><strong>Solution</strong>:
    <br>φ = 30°.
    <br>P = V<sub>rms</sub>I<sub>rms</sub>cos(φ) = (120V)(10A)cos(30°) = 1200 * (0.866) ≈ 1039.2 W.
    <br>Q = V<sub>rms</sub>I<sub>rms</sub>sin(φ) = (120V)(10A)sin(30°) = 1200 * (0.5) = 600 VAR (inductive, lagging).
    <br>S = V<sub>rms</sub>I<sub>rms</sub> = (120V)(10A) = 1200 VA.
    <br>pf = cos(30°) ≈ 0.866 lagging.
    <br>Complex Power <strong>S</strong> = S ∠φ = 1200 ∠ 30° VA = 1039.2 + j600 VA.
</p>

<h4>🔸 Example 2: Power Factor Correction</h4>
<p><strong>Problem</strong>: A load consumes 5 kW at a power factor of 0.7 lagging from a 240V RMS, 50Hz supply. Calculate the capacitance required in parallel to improve the power factor to 0.95 lagging.</p>
<p><strong>Solution</strong>:
    <br>P = 5000 W.
    <br>φ<sub>old</sub> = acos(0.7) ≈ 45.57°. Q<sub>old</sub> = P tan(φ<sub>old</sub>) = 5000 tan(45.57°) ≈ 5000 * 1.02 = 5100 VAR.
    <br>φ<sub>new</sub> = acos(0.95) ≈ 18.19°. Q<sub>new</sub> = P tan(φ<sub>new</sub>) = 5000 tan(18.19°) ≈ 5000 * 0.328 = 1640 VAR.
    <br>Reactive power needed from capacitor Q<sub>corr</sub> = Q<sub>old</sub> - Q<sub>new</sub> = 5100 - 1640 = 3460 VAR.
    <br>(The capacitor "supplies" these VARs, so its Q is -3460 VAR).
    <br>C = |Q<sub>corr</sub>| / (ωV<sub>rms</sub><sup>2</sup>) = 3460 / (2π * 50 * 240<sup>2</sup>) = 3460 / (100π * 57600) ≈ 3460 / 18095573 ≈ 1.912 * 10<sup>-4</sup> F ≈ 191.2 μF.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>A purely resistive load of 10 Ω is connected to a 100V RMS AC source. What are P, Q, S, and pf?
        <br><strong>Answer</strong>: φ=0. I<sub>rms</sub> = 100V/10Ω = 10A.
        P = V<sub>rms</sub>I<sub>rms</sub>cos(0) = 100*10*1 = 1000 W.
        Q = V<sub>rms</sub>I<sub>rms</sub>sin(0) = 0 VAR.
        S = V<sub>rms</sub>I<sub>rms</sub> = 1000 VA.
        pf = cos(0) = 1 (unity).
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="2">
    <li>A load impedance is Z<sub>L</sub> = (6 + j8) Ω. If it is connected to a V<sub>rms</sub> = 120 ∠ 0° V source, find the complex power <strong>S</strong> delivered to the load.
        <br><strong>Hint</strong>: Find <strong>I<sub>rms</sub></strong> = <strong>V<sub>rms</sub></strong>/Z<sub>L</sub>. Then <strong>S</strong> = <strong>V<sub>rms</sub>I<sub>rms</sub></strong><sup>*</sup>.
        <br>|Z<sub>L</sub>| = √(6<sup>2</sup>+8<sup>2</sup>)=10Ω. ∠Z<sub>L</sub> = tan<sup>-1</sup>(8/6) ≈ 53.13°. Z<sub>L</sub> = 10∠53.13°.
        <br><strong>I<sub>rms</sub></strong> = (120∠0°)/(10∠53.13°) = 12∠-53.13° A.
        <br><strong>I<sub>rms</sub></strong><sup>*</sup> = 12∠53.13° A.
        <br><strong>S</strong> = (120∠0°)(12∠53.13°) = 1440 ∠ 53.13° VA = 1440(cos(53.13°) + jsin(53.13°)) ≈ 864 + j1152 VA.
        <br>So P = 864 W, Q = 1152 VAR.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="3">
    <li>An industrial plant consumes 500 kW at a power factor of 0.65 lagging from a 480V (line-to-line) three-phase supply. What is the total kVA supplied? If power factor correction is applied to improve pf to 0.9 lagging, what is the reduction in kVA? (Note: This involves 3-phase power, but concept is similar. S<sub>total</sub> = P<sub>total</sub> / pf).
        <br>S<sub>old</sub> = 500kW / 0.65 ≈ 769.23 kVA.
        <br>S<sub>new</sub> = 500kW / 0.9 ≈ 555.56 kVA.
        <br>Reduction ≈ 769.23 - 555.56 = 213.67 kVA.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Clearly distinguish between V<sub>m</sub> (amplitude) and V<sub>rms</sub>. For sinusoids, V<sub>rms</sub> = V<sub>m</sub>/√2. Power formulas often use RMS values.</li>
    <li>The power factor angle φ is θ<sub>v</sub> - θ<sub>i</sub>. If φ > 0, current lags voltage (inductive). If φ < 0, current leads voltage (capacitive).</li>
    <li>Understand the power triangle and how P, Q, and S relate geometrically.</li>
    <li>Power factor correction aims to reduce Q, thereby reducing S and line currents for the same P. This minimizes I<sup>2</sup>R losses in transmission lines.</li>
    <li>For complex power <strong>S</strong> = <strong>V I</strong><sup>*</sup>, remember to use the conjugate of the current phasor.</li>
</ul>
        </section>




        <section id="topic12">
            <h2>12: Three-Phase Circuits</h2>
            <h3>📚 Overview:</h3>
<p>Three-phase circuits are the most common system for generating, transmitting, and distributing large amounts of electrical power. They offer advantages over single-phase systems, including more constant power delivery, more efficient use of conductors, and simpler motor starting. This chapter covers <strong>balanced three-phase systems</strong>, including <strong>Y (wye or star)</strong> and <strong>Δ (delta or mesh)</strong> connections for sources and loads, relationships between line and phase quantities, and power calculations.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Balanced Three-Phase Voltages</strong>:</h4>
<p>A balanced three-phase voltage source consists of three sinusoidal voltages that have equal magnitudes and are 120° out of phase with each other.</p>
<p>Assuming abc sequence (positive sequence):</p>
<ul>
    <li><code>v<sub>an</sub>(t) = V<sub>m</sub> cos(ωt)</code> ↔ <code><strong>V<sub>an</sub></strong> = V<sub>p</sub> ∠ 0°</code></li>
    <li><code>v<sub>bn</sub>(t) = V<sub>m</sub> cos(ωt - 120°)</code> ↔ <code><strong>V<sub>bn</sub></strong> = V<sub>p</sub> ∠ -120°</code></li>
    <li><code>v<sub>cn</sub>(t) = V<sub>m</sub> cos(ωt + 120°)</code> or <code>V<sub>m</sub> cos(ωt - 240°)</code> ↔ <code><strong>V<sub>cn</sub></strong> = V<sub>p</sub> ∠ 120°</code> (or ∠-240°)</li>
</ul>
<p>Where V<sub>p</sub> = V<sub>m</sub> (if V<sub>m</sub> is peak phase voltage) or V<sub>p</sub> = V<sub>rms_phase</sub> (if RMS values are used for phasors).
<br>In a balanced system, <code><strong>V<sub>an</sub></strong> + <strong>V<sub>bn</sub></strong> + <strong>V<sub>cn</sub></strong> = 0</code>.</p>

<h4>2. <strong>Source and Load Connections</strong>:</h4>
<ul>
    <li><strong>Wye (Y) Connection</strong>: The three phases are connected to a common neutral point (n).
        <div style="text-align:center; margin:10px;">
            <svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="background-color:var(--bg-color); border:1px solid var(--border-color);">
                <line x1="50" y1="50" x2="50" y2="10" stroke="var(--text-color)" stroke-width="2"/> <!-- Phase A to n -->
                <line x1="50" y1="50" x2="15" y2="80" stroke="var(--text-color)" stroke-width="2"/> <!-- Phase B to n -->
                <line x1="50" y1="50" x2="85" y2="80" stroke="var(--text-color)" stroke-width="2"/> <!-- Phase C to n -->
                <circle cx="50" cy="50" r="3" fill="var(--text-color)"/> <!-- Neutral point -->
                <text x="48" y="5" fill="var(--text-color)" font-size="10">a</text>
                <text x="5" y="85" fill="var(--text-color)" font-size="10">b</text>
                <text x="88" y="85" fill="var(--text-color)" font-size="10">c</text>
                <text x="55" y="53" fill="var(--text-color)" font-size="10">n</text>
            </svg>
        </div>
    </li>
    <li><strong>Delta (Δ) Connection</strong>: The three phases are connected in a closed loop (like a triangle).
        <div style="text-align:center; margin:10px;">
            <svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="background-color:var(--bg-color); border:1px solid var(--border-color);">
                <line x1="50" y1="15" x2="15" y2="85" stroke="var(--text-color)" stroke-width="2"/> <!-- A to B -->
                <line x1="15" y1="85" x2="85" y2="85" stroke="var(--text-color)" stroke-width="2"/> <!-- B to C -->
                <line x1="85" y1="85" x2="50" y2="15" stroke="var(--text-color)" stroke-width="2"/> <!-- C to A -->
                <circle cx="50" cy="15" r="3" fill="var(--text-color)"/><text x="48" y="10" fill="var(--text-color)" font-size="10">a</text>
                <circle cx="15" cy="85" r="3" fill="var(--text-color)"/><text x="5" y="90" fill="var(--text-color)" font-size="10">b</text>
                <circle cx="85" cy="85" r="3" fill="var(--text-color)"/><text x="88" y="90" fill="var(--text-color)" font-size="10">c</text>
            </svg>
        </div>
    </li>
</ul>
<p>A system can be Y-Y, Y-Δ, Δ-Y, or Δ-Δ (Source-Load connection).</p>

<h4>3. <strong>Line and Phase Quantities</strong>:</h4>
<ul>
    <li><strong>Phase Voltage (V<sub>p</sub>)</strong>: Voltage across a single phase of the source or load (e.g., V<sub>an</sub>, V<sub>bn</sub>, V<sub>cn</sub> for Y; V<sub>ab</sub>, V<sub>bc</sub>, V<sub>ca</sub> for Δ if source is delta).</li>
    <li><strong>Line Voltage (V<sub>L</sub>)</strong>: Voltage between two lines (e.g., V<sub>ab</sub>, V<sub>bc</sub>, V<sub>ca</sub>).</li>
    <li><strong>Phase Current (I<sub>p</sub>)</strong>: Current through a single phase of the source or load.</li>
    <li><strong>Line Current (I<sub>L</sub>)</strong>: Current flowing in the lines connecting source to load (e.g., I<sub>a</sub>, I<sub>b</sub>, I<sub>c</sub>).</li>
</ul>

<h4>4. <strong>Relationships for Balanced Systems</strong> (magnitudes, RMS values assumed):</h4>
<ul>
    <li><strong>Wye (Y) Connection</strong>:
        <ul>
            <li><code>V<sub>L</sub> = √3 * V<sub>p</sub></code> (Line voltage leads phase voltage by 30° in abc sequence, e.g., <strong>V<sub>ab</sub></strong> = <strong>V<sub>an</sub></strong> - <strong>V<sub>bn</sub></strong> = V<sub>p</sub>∠0° - V<sub>p</sub>∠-120° = √3 V<sub>p</sub> ∠30°)</li>
            <li><code>I<sub>L</sub> = I<sub>p</sub></code> (Line current is the same as phase current)</li>
        </ul>
    </li>
    <li><strong>Delta (Δ) Connection</strong>:
        <ul>
            <li><code>V<sub>L</sub> = V<sub>p</sub></code> (Line voltage is the same as phase voltage)</li>
            <li><code>I<sub>L</sub> = √3 * I<sub>p</sub></code> (Line current lags its corresponding phase current by 30° in abc sequence, e.g., <strong>I<sub>a</sub></strong> = <strong>I<sub>AB</sub></strong> - <strong>I<sub>CA</sub></strong>)</li>
        </ul>
    </li>
</ul>

<h4>5. <strong>Balanced Load Impedances</strong>:</h4>
<ul>
    <li>In a Y-connected load, each phase impedance is Z<sub>Y</sub>.</li>
    <li>In a Δ-connected load, each phase impedance is Z<sub>Δ</sub>.</li>
    <li>Y-Δ Transformation: <code>Z<sub>Δ</sub> = 3 * Z<sub>Y</sub></code> and <code>Z<sub>Y</sub> = Z<sub>Δ</sub> / 3</code> (for balanced loads).</li>
</ul>

<h4>6. <strong>Power in Balanced Three-Phase Systems</strong>:</h4>
<p>Let φ be the angle of the load impedance per phase (power factor angle of the load).</p>
<ul>
    <li><strong>Total Average (Real) Power (P<sub>T</sub>)</strong>:
        <br><code>P<sub>T</sub> = 3 * V<sub>p_load</sub> * I<sub>p_load</sub> * cos(φ)</code>
        <br><code>P<sub>T</sub> = √3 * V<sub>L</sub> * I<sub>L</sub> * cos(φ)</code> (Most common formula)</li>
    <li><strong>Total Reactive Power (Q<sub>T</sub>)</strong>:
        <br><code>Q<sub>T</sub> = 3 * V<sub>p_load</sub> * I<sub>p_load</sub> * sin(φ)</code>
        <br><code>Q<sub>T</sub> = √3 * V<sub>L</sub> * I<sub>L</sub> * sin(φ)</code></li>
    <li><strong>Total Apparent Power (S<sub>T</sub>)</strong>:
        <br><code>S<sub>T</sub> = 3 * V<sub>p_load</sub> * I<sub>p_load</sub></code>
        <br><code>S<sub>T</sub> = √3 * V<sub>L</sub> * I<sub>L</sub></code></li>
    <li><strong>Total Complex Power (<strong>S<sub>T</sub></strong>)</strong>:
        <br><code><strong>S<sub>T</sub></strong> = P<sub>T</sub> + jQ<sub>T</sub> = S<sub>T</sub> ∠φ</code></li>
</ul>
<p>Power factor of the three-phase load: <code>pf = cos(φ) = P<sub>T</sub> / S<sub>T</sub></code>.</p>

<h4>7. <strong>Per-Phase Analysis</strong>:</h4>
<p>For balanced three-phase systems, analysis can often be simplified by considering only one phase (e.g., phase 'a') and then using symmetry to find quantities for other phases. This usually involves converting any Δ-connected loads/sources to equivalent Y-connections.</p>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Y-Connected Source and Load</h4>
<p><strong>Problem</strong>: A balanced Y-connected source with <strong>V<sub>an</sub></strong> = 120 ∠ 0° V (RMS) supplies a balanced Y-connected load with Z<sub>Y</sub> = (10 + j5) Ω per phase. Transmission line impedance is negligible. Find the line currents and total complex power delivered to the load.</p>
<p><strong>Solution</strong>:
    <br>This is a per-phase analysis problem directly.
    <br>Phase current for phase 'a': <code><strong>I<sub>a</sub></strong> = <strong>I<sub>AN</sub></strong> = <strong>V<sub>an</sub></strong> / Z<sub>Y</sub> = (120 ∠ 0° V) / (10 + j5 Ω)</code>
    <br><code>10 + j5 Ω = √(10<sup>2</sup> + 5<sup>2</sup>) ∠ tan<sup>-1</sup>(5/10) = 11.18 ∠ 26.57° Ω</code>
    <br><code><strong>I<sub>a</sub></strong> = (120 ∠ 0°) / (11.18 ∠ 26.57°) ≈ 10.73 ∠ -26.57° A</code>.
    <br>Line currents: <code><strong>I<sub>b</sub></strong> ≈ 10.73 ∠ (-26.57° - 120°) = 10.73 ∠ -146.57° A</code>.
    <br><code><strong>I<sub>c</sub></strong> ≈ 10.73 ∠ (-26.57° + 120°) = 10.73 ∠ 93.43° A</code>.
    <br>Complex power per phase: <code><strong>S<sub>p</sub></strong> = <strong>V<sub>an</sub></strong> <strong>I<sub>a</sub></strong><sup>*</sup> = (120 ∠ 0°)(10.73 ∠ 26.57°) = 1287.6 ∠ 26.57° VA</code>
    <br><code><strong>S<sub>p</sub></strong> = 1287.6(cos(26.57°) + jsin(26.57°)) ≈ 1152 + j576 VA</code>.
    <br>Total complex power: <code><strong>S<sub>T</sub></strong> = 3 * <strong>S<sub>p</sub></strong> ≈ 3 * (1152 + j576) = 3456 + j1728 VA</code>.
</p>

<h4>🔸 Example 2: Δ-Connected Load Power</h4>
<p><strong>Problem</strong>: A balanced Δ-connected load has an impedance of Z<sub>Δ</sub> = (30 - j40) Ω per phase. The system line voltage V<sub>L</sub> = 208 V RMS. Find the total real power absorbed by the load.</p>
<p><strong>Solution</strong>:
    <br>For Δ-load, V<sub>p_load</sub> = V<sub>L</sub> = 208 V.
    <br>Phase current: <code>|<strong>I<sub>p</sub></strong>| = |V<sub>p_load</sub> / Z<sub>Δ</sub>| = 208V / |30 - j40 Ω|</code>
    <br><code>|30 - j40| = √(30<sup>2</sup> + (-40)<sup>2</sup>) = √(900 + 1600) = √(2500) = 50 Ω</code>.
    <br><code>|<strong>I<sub>p</sub></strong>| = 208V / 50Ω = 4.16 A</code>.
    <br>Load impedance angle: φ = tan<sup>-1</sup>(-40/30) ≈ -53.13°. Power factor pf = cos(-53.13°) = 0.6.
    <br>Line current (magnitude): I<sub>L</sub> = √3 * I<sub>p</sub> = √3 * 4.16 A ≈ 7.205 A.
    <br>Total Real Power: <code>P<sub>T</sub> = √3 * V<sub>L</sub> * I<sub>L</sub> * cos(φ) = √3 * 208V * 7.205A * 0.6 ≈ 1558 W</code>.
    <br>Alternatively: <code>P<sub>T</sub> = 3 * V<sub>p_load</sub> * I<sub>p_load</sub> * cos(φ) = 3 * 208V * 4.16A * 0.6 ≈ 1558 W</code>.
    <br>(Note: cos(φ) is angle of Z, so for Z=R-jX, φ is negative, cos(φ) is positive).
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>A balanced Y-connected generator has a phase voltage V<sub>an</sub> = 277 ∠ 0° V RMS. What is the line voltage V<sub>ab</sub> (magnitude and phase)?
        <br><strong>Answer</strong>: |V<sub>L</sub>| = √3 * |V<sub>p</sub>| = √3 * 277V ≈ 480V. <strong>V<sub>ab</sub></strong> leads <strong>V<sub>an</sub></strong> by 30°. So, <strong>V<sub>ab</sub></strong> ≈ 480 ∠ 30° V.</li>
    <li>A balanced Δ-connected load draws a line current I<sub>L</sub> = 15A. What is the magnitude of the phase current I<sub>p</sub>?
        <br><strong>Answer</strong>: I<sub>L</sub> = √3 * I<sub>p</sub> ⇒ I<sub>p</sub> = I<sub>L</sub> / √3 = 15A / √3 ≈ 8.66 A.</li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>A Y-connected source (V<sub>L</sub> = 440V) supplies a Δ-connected load where each phase impedance is (6 + j8) Ω. Calculate the line current I<sub>L</sub> and total apparent power S<sub>T</sub>.
        <br><strong>Hint</strong>: Convert Δ-load to Y-load: Z<sub>Y</sub> = Z<sub>Δ</sub>/3. Then do per-phase analysis.
        <br>Z<sub>Y</sub> = (6+j8)/3 = (2+j2.667)Ω. V<sub>p_source_equiv_Y</sub> = 440V/√3 ≈ 254V.
        <br>I<sub>L</sub> = I<sub>p_Yequiv</sub> = V<sub>p_source_equiv_Y</sub> / |Z<sub>Y</sub>|. Calculate magnitude of Z<sub>Y</sub> first.
        <br>S<sub>T</sub> = √3 * V<sub>L</sub> * |I<sub>L</sub>|.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>Two balanced loads are connected in parallel to a 4.16 kV line-to-line three-phase supply. Load 1: 500 kVA at 0.8 pf lagging. Load 2: 300 kW at 0.9 pf leading. Find the total complex power, total P, total Q, total S, and overall power factor of the combined load.
        <br><strong>Hint</strong>: Find <strong>S<sub>1</sub></strong> and <strong>S<sub>2</sub></strong> (P+jQ form). For Load 1, P1=S1*pf1, Q1=S1*sin(acos(pf1)). For Load 2, S2=P2/pf2, Q2=P2*tan(acos(pf2)) (Q2 is negative). Add them: <strong>S<sub>total</sub></strong> = <strong>S<sub>1</sub></strong> + <strong>S<sub>2</sub></strong>. Then find |S<sub>total</sub>| and overall pf.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Clearly distinguish between Y and Δ connections and their V<sub>L</sub>/V<sub>p</sub>, I<sub>L</sub>/I<sub>p</sub> relationships. Draw diagrams.</li>
    <li>For balanced systems, per-phase analysis simplifies calculations significantly. Remember to convert Δ sections to equivalent Y if necessary for this.</li>
    <li>The power formulas (P<sub>T</sub> = √3 V<sub>L</sub>I<sub>L</sub>cos(φ), etc.) are for balanced systems and use line quantities. φ is the angle of the per-phase load impedance.</li>
    <li>Be consistent with RMS vs. peak values (most power formulas and line voltage ratings are RMS).</li>
    <li>Phase sequence (abc or acb) determines the phase relationship of voltages and currents. For abc sequence, phase B lags A by 120°, phase C lags B by 120°.</li>
</ul>
        </section>




        <section id="topic13">
            <h2>13: Magnetically Coupled Circuits</h2>
            <h3>📚 Overview:</h3>
<p>This chapter introduces the concept of <strong>magnetic coupling</strong> between inductors. When two or more coils are placed in proximity such that the magnetic flux generated by current in one coil links with another coil, a voltage is induced in the second coil. This phenomenon is described by <strong>mutual inductance (M)</strong>. Magnetically coupled circuits are fundamental to the operation of <strong>transformers</strong>, as well as various sensors and wireless power transfer systems.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Self-Inductance (L)</strong>:</h4>
<p>A property of an individual coil where a changing current in the coil induces a voltage across itself (<code>v = L di/dt</code>). This is due to the coil's own magnetic flux linking its own turns.</p>

<h4>2. <strong>Mutual Inductance (M)</strong>:</h4>
<p>A property of two or more coupled coils. A changing current in one coil (say, coil 1, <code>i<sub>1</sub></code>) creates a changing magnetic flux that links another coil (coil 2), inducing a voltage in coil 2 (<code>v<sub>2M</sub></code>).</p>
<p><code>v<sub>2M</sub> = M<sub>21</sub> (di<sub>1</sub>/dt)</code>
<br>Similarly, a changing current in coil 2 (<code>i<sub>2</sub></code>) induces a voltage in coil 1 (<code>v<sub>1M</sub></code>):
<br><code>v<sub>1M</sub> = M<sub>12</sub> (di<sub>2</sub>/dt)</code></p>
<p>For linear, reciprocal media, <code>M<sub>12</sub> = M<sub>21</sub> = M</code>. M is measured in Henries (H).</p>

<h4>3. <strong>Coefficient of Coupling (k)</strong>:</h4>
<p>The coefficient of coupling describes the fraction of flux from one coil that links another coil. It ranges from 0 (no coupling) to 1 (perfect coupling).</p>
<p><code>k = M / √(L<sub>1</sub>L<sub>2</sub>)</code> ⇒ <code>M = k √(L<sub>1</sub>L<sub>2</sub>)</code></p>
<ul>
    <li><code>0 ≤ k ≤ 1</code>.</li>
    <li><code>k=0</code>: No mutual flux.</li>
    <li><code>k=1</code>: All flux from one coil links the other (ideal transformer).</li>
</ul>

<h4>4. <strong>Dot Convention</strong>:</h4>
<p>Dots are placed on one terminal of each coupled coil to indicate the relative winding directions and thus the polarity of the mutually induced voltage.</p>
<ul>
    <li>If a current <strong>enters</strong> the dotted terminal of one coil, the polarity of the mutually induced voltage in the second coil is <strong>positive</strong> at its dotted terminal.</li>
    <li>If a current <strong>leaves</strong> the dotted terminal of one coil, the polarity of the mutually induced voltage in the second coil is <strong>negative</strong> at its dotted terminal.</li>
</ul>
<p>The total voltage across coil 1 (with self-inductance L<sub>1</sub> and mutual inductance M with coil 2) is:
<br><code>v<sub>1</sub>(t) = L<sub>1</sub> (di<sub>1</sub>/dt) ± M (di<sub>2</sub>/dt)</code>
<br>The total voltage across coil 2 is:
<br><code>v<sub>2</sub>(t) = L<sub>2</sub> (di<sub>2</sub>/dt) ± M (di<sub>1</sub>/dt)</code>
<br>The sign of the M term depends on the dot convention and the assumed current directions:
<ul>
    <li><strong>Positive M term</strong>: If both assumed currents i<sub>1</sub> and i<sub>2</sub> enter (or both leave) the dotted terminals of their respective coils. (Fluxes aid)</li>
    <li><strong>Negative M term</strong>: If one assumed current enters a dotted terminal and the other leaves its dotted terminal. (Fluxes oppose)</li>
</ul>
</p>

<h4>5. <strong>Energy in a Coupled Circuit</strong>:</h4>
<p>The total energy stored in two coupled inductors L<sub>1</sub> and L<sub>2</sub> with mutual inductance M, carrying currents i<sub>1</sub> and i<sub>2</sub>, is:</p>
<p><code>W = (1/2)L<sub>1</sub>i<sub>1</sub><sup>2</sup> + (1/2)L<sub>2</sub>i<sub>2</sub><sup>2</sup> ± Mi<sub>1</sub>i<sub>2</sub></code></p>
<p>The sign of the M term depends on whether the fluxes aid (+) or oppose (-), determined by the dot convention and current directions.</p>

<h4>6. <strong>Linear Transformers</strong>:</h4>
<p>A transformer consists of two or more coils coupled by a common magnetic flux, often wound on a magnetic core to enhance coupling. A linear transformer assumes the magnetic permeability of the core is constant (no saturation).</p>
<p>In the phasor domain, the voltage equations become:
<br><code><strong>V<sub>1</sub></strong> = jωL<sub>1</sub><strong>I<sub>1</sub></strong> ± jωM<strong>I<sub>2</sub></strong></code>
<br><code><strong>V<sub>2</sub></strong> = ± jωM<strong>I<sub>1</sub></strong> + jωL<sub>2</sub><strong>I<sub>2</sub></strong></code>
<br>(Sign depends on dots and assumed phasor current directions)</p>

<h4>7. <strong>Ideal Transformers</strong>:</h4>
<p>An ideal transformer has:</p>
<ul>
    <li>Perfect coupling (k=1).</li>
    <li>Infinite self-inductances (L<sub>1</sub>, L<sub>2</sub> → ∞) such that their ratio is finite.</li>
    <li>No losses (winding resistance and core losses are zero).</li>
</ul>
<p>Relationships for an ideal transformer:</p>
<ul>
    <li><strong>Voltage Ratio</strong>: <code><strong>V<sub>1</sub></strong>/N<sub>1</sub> = <strong>V<sub>2</sub></strong>/N<sub>2</sub></code>  ⇒ <code><strong>V<sub>2</sub></strong>/<strong>V<sub>1</sub></strong> = N<sub>2</sub>/N<sub>1</sub> = n</code> (where n is the turns ratio)
        <br>(Polarity depends on dot convention relative to voltage definitions).
    </li>
    <li><strong>Current Ratio</strong>: <code>N<sub>1</sub><strong>I<sub>1</sub></strong> = N<sub>2</sub><strong>I<sub>2</sub></strong></code> ⇒ <code><strong>I<sub>2</sub></strong>/<strong>I<sub>1</sub></strong> = N<sub>1</sub>/N<sub>2</sub> = 1/n</code>
        <br>(Assuming currents enter dotted terminals on primary and leave dotted terminal on secondary for power flow).
    </li>
    <li><strong>Impedance Reflection</strong>: An impedance Z<sub>L</sub> connected to the secondary (port 2) is "reflected" to the primary (port 1) as Z<sub>in</sub>:
        <br><code>Z<sub>in</sub> = <strong>V<sub>1</sub></strong>/<strong>I<sub>1</sub></strong> = (1/n<sup>2</sup>)Z<sub>L</sub></code> or often written <code>Z<sub>in</sub> = (N<sub>1</sub>/N<sub>2</sub>)<sup>2</sup> Z<sub>L</sub> = (1/n<sup>2</sup>) Z<sub>L</sub></code> if n = N2/N1.
        <br>If defining turns ratio <code>a = N<sub>1</sub>/N<sub>2</sub></code>, then <code>Z<sub>in</sub> = a<sup>2</sup>Z<sub>L</sub></code>. It is important to be consistent with definition of 'n' or 'a'.
        Using <code>n = N<sub>2</sub>/N<sub>1</sub></code>, the impedance seen at the primary is <code>Z<sub>1</sub> = Z<sub>L</sub> / n<sup>2</sup></code> is WRONG. It should be <code>Z<sub>1</sub> = Z<sub>2</sub> * (N<sub>1</sub>/N<sub>2</sub>)<sup>2</sup></code>.
        Correct with <code>n = N2/N1</code>: Primary reflected impedance is <code>Z<sub>reflected_to_primary</sub> = Z<sub>L</sub> * (N<sub>1</sub>/N<sub>2</sub>)<sup>2</sup> = Z<sub>L</sub> / n<sup>2</sup></code>. This matches one of my formulas, need to be very clear.

        Let <code>a = N1/N2</code>. Then <code>V1/V2 = a</code> and <code>I1/I2 = 1/a</code>.
        Impedance seen by primary: <code>Z_in = V1/I1 = (aV2) / (I2/a) = a^2 (V2/I2) = a^2 Z_L</code>.
        So if n = N2/N1 (secondary to primary turns), then <code>a = 1/n</code>.
        <code>Z_in = (1/n)^2 Z_L = Z_L / n^2</code>. Wait, this is also often written as:
        If <code>V2/V1 = n</code> and <code>I2/I1 = 1/n</code>.
        Then <code>V1 = V2/n</code>, <code>I1 = nI2</code>.
        <code>Z_in = V1/I1 = (V2/n) / (nI2) = (1/n^2) * (V2/I2) = Z_L / n^2</code>. This appears correct if n=N2/N1.
    </li>
    <li>Ideal transformers transform voltage, current, and impedance levels but conserve complex power (<strong>S<sub>1</sub></strong> = <strong>S<sub>2</sub></strong>).</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Calculating Mutual Inductance</h4>
<p><strong>Problem</strong>: Two coils have self-inductances L<sub>1</sub> = 2 H and L<sub>2</sub> = 8 H. If the coefficient of coupling k = 0.75, what is the mutual inductance M?</p>
<p><strong>Solution</strong>:
    <br><code>M = k √(L<sub>1</sub>L<sub>2</sub>) = 0.75 * √(2 H * 8 H) = 0.75 * √(16 H<sup>2</sup>) = 0.75 * 4 H = 3 H</code>.
</p>

<h4>🔸 Example 2: Voltage in Coupled Coils (Dot Convention)</h4>
<p><strong>Problem</strong>: Two coupled coils. Coil 1: L<sub>1</sub>=0.5H, Coil 2: L<sub>2</sub>=0.2H, M=0.1H. Dots are on top terminal of L<sub>1</sub> and bottom terminal of L<sub>2</sub>. If i<sub>1</sub>(t) enters the dot of L<sub>1</sub> and i<sub>2</sub>(t) enters the non-dotted (top) terminal of L<sub>2</sub>, write the voltage equation for v<sub>1</sub>(t).</p>
<p><strong>Solution</strong>:
    <br>Current i<sub>1</sub> enters dot of L<sub>1</sub>.
    <br>Current i<sub>2</sub> enters non-dotted terminal of L<sub>2</sub>, meaning it *leaves* the dotted (bottom) terminal of L<sub>2</sub>.
    <br>Since one current (i<sub>1</sub>) enters a dot and the other (i<sub>2</sub>) effectively leaves a dot for its path related to mutual term, the M term sign for v<sub>1</sub> due to di<sub>2</sub>/dt will be negative.
    <br><code>v<sub>1</sub>(t) = L<sub>1</sub> (di<sub>1</sub>/dt) - M (di<sub>2</sub>/dt) = 0.5 (di<sub>1</sub>/dt) - 0.1 (di<sub>2</sub>/dt)</code>.
</p>

<h4>🔸 Example 3: Ideal Transformer Voltage and Current</h4>
<p><strong>Problem</strong>: An ideal transformer has N<sub>1</sub> = 200 turns (primary) and N<sub>2</sub> = 50 turns (secondary). If the primary voltage <strong>V<sub>1</sub></strong> = 120 ∠ 0° V RMS, and a load connected to the secondary draws <strong>I<sub>2</sub></strong> = 4 ∠ -30° A RMS, find <strong>V<sub>2</sub></strong> and <strong>I<sub>1</sub></strong>.</p>
<p><strong>Solution</strong>:
    <br>Turns ratio n = N<sub>2</sub>/N<sub>1</sub> = 50/200 = 0.25.
    <br>Voltage: <code><strong>V<sub>2</sub></strong> = n * <strong>V<sub>1</sub></strong> = 0.25 * (120 ∠ 0° V) = 30 ∠ 0° V</code>. (Assuming dots align for positive ratio).
    <br>Current: <code><strong>I<sub>1</sub></strong> = (1/n) * <strong>I<sub>2</sub></strong></code> (this form often assumes current direction for power conservation like I1 entering dot, I2 leaving dot). Or more fundamentally, <code>N<sub>1</sub><strong>I<sub>1</sub></strong> = N<sub>2</sub><strong>I<sub>2</sub></strong></code> for flux cancellation.
    If I2 is load current, then I1 = I2 * (N2/N1) = I2 * n is often used. Check standard relation: <code>N<sub>1</sub><strong>I<sub>1</sub></strong> - N<sub>2</sub><strong>I<sub>2</sub></strong> = 0</code> if currents enter dots or create flux in same direction.
    Using <code><strong>I<sub>1</sub></strong>/<strong>I<sub>2</sub></strong> = N<sub>2</sub>/N<sub>1</sub> = n</code> (if primary current enters dotted terminal and secondary current leaves dotted terminal to supply power to load)
    <br><code><strong>I<sub>1</sub></strong> = n * <strong>I<sub>2</sub></strong> = 0.25 * (4 ∠ -30° A) = 1 ∠ -30° A</code>.
    <br>Let's re-check current transformation based on <code>V1*I1_conj = V2*I2_conj</code>
    <br><code>I1_conj = (V2/V1) * I2_conj = n * I2_conj</code>. So <code>I1 = n*I2</code>, with appropriate phase consideration of conjugate.
    This yields <code>I1 = 0.25 * (4 ∠ -30°) = 1 ∠ -30°A</code>.

    Power check: S1 = V1 * I1<sup>*</sup> = (120∠0)(1∠30°) = 120∠30° VA.
    S2 = V2 * I2<sup>*</sup> = (30∠0)(4∠30°) = 120∠30° VA. This matches.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Two coils have L<sub>1</sub> = 0.5 H, L<sub>2</sub> = 2 H, and M = 0.8 H. Calculate the coefficient of coupling k. Is this physically possible?
        <br><strong>Answer</strong>: k = M / √(L<sub>1</sub>L<sub>2</sub>) = 0.8 / √(0.5 * 2) = 0.8 / √(1) = 0.8. Yes, k=0.8 is possible (0 ≤ k ≤ 1).
    </li>
    <li>An ideal transformer steps down 240V to 12V. If the primary has 1000 turns, how many turns are on the secondary?
        <br><strong>Answer</strong>: V<sub>1</sub>/V<sub>2</sub> = N<sub>1</sub>/N<sub>2</sub> ⇒ 240/12 = 1000/N<sub>2</sub> ⇒ 20 = 1000/N<sub>2</sub> ⇒ N<sub>2</sub> = 1000/20 = 50 turns.
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>Two coupled coils L<sub>1</sub>=1H, L<sub>2</sub>=4H, M=1H are connected in series aiding. What is the total equivalent inductance?
        <br><strong>Answer</strong>: L<sub>eq</sub> = L<sub>1</sub> + L<sub>2</sub> + 2M (for series aiding) = 1 + 4 + 2(1) = 7 H.
        <br>(For series opposing, L<sub>eq</sub> = L<sub>1</sub> + L<sub>2</sub> - 2M).
    </li>
    <li>An ideal transformer has a turns ratio n = N<sub>2</sub>/N<sub>1</sub> = 5. If a load of Z<sub>L</sub> = (100 + j50) Ω is connected to the secondary, what is the impedance Z<sub>in</sub> seen at the primary?
        <br><strong>Answer</strong>: <code>Z<sub>in</sub> = Z<sub>L</sub> / n<sup>2</sup> = (100 + j50) / 5<sup>2</sup> = (100 + j50) / 25 = 4 + j2 Ω</code>.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="5">
    <li>A linear transformer has Z<sub>11</sub> = j10 Ω, Z<sub>22</sub> = j20 Ω, and Z<sub>12</sub> = Z<sub>21</sub> = j5 Ω (these are its Z-parameters, where Z<sub>11</sub>=jωL<sub>1</sub>, Z<sub>22</sub>=jωL<sub>2</sub>, Z<sub>12</sub>=jωM). If a load Z<sub>L</sub> = (10 - j10) Ω is connected to port 2, and port 1 is driven by V<sub>s</sub> = 100∠0°V, find the current I<sub>1</sub>.
        <br><strong>Hint</strong>: Use transformer equations in phasor domain. <strong>V<sub>1</sub></strong> = Z<sub>11</sub><strong>I<sub>1</sub></strong> + Z<sub>12</sub><strong>I<sub>2</sub></strong>. <strong>V<sub>2</sub></strong> = Z<sub>21</sub><strong>I<sub>1</sub></strong> + Z<sub>22</sub><strong>I<sub>2</sub></strong>. And <strong>V<sub>2</sub></strong> = -<strong>I<sub>2</sub></strong>Z<sub>L</sub> (current I<sub>2</sub> assumed into port 2 of transformer, so it's out of load).
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li><strong>Dot convention is crucial!</strong> Always carefully determine the sign of the mutual inductance term (M di/dt or jωM<strong>I</strong>) based on assumed current directions relative to the dots.</li>
    <li>For ideal transformers, remember that power is conserved (S<sub>1</sub> = S<sub>2</sub> assuming ideal).</li>
    <li>Be clear about the definition of turns ratio (N<sub>1</sub>/N<sub>2</sub> or N<sub>2</sub>/N<sub>1</sub>) as it affects impedance transformation formulas. Sticking to <code>V1/V2 = N1/N2</code> and <code>I1/I2 = N2/N1</code> for an ideal transformer is a common convention. Then <code>Z_in_primary = (N1/N2)^2 * Z_load_secondary</code>.</li>
    <li>Linear transformers are analyzed using coupled inductor equations. Ideal transformers use simpler voltage/current ratio rules.</li>
    <li>T-equivalent and Π-equivalent circuits can be used to model linear transformers without mutual inductance terms directly.</li>
</ul>
        </section>




        <section id="topic14">
            <h2>14: Frequency Response</h2>
            <h3>📚 Overview:</h3>
<p>The <strong>frequency response</strong> of a circuit describes how its behavior (typically gain or phase shift) changes as a function of the frequency of an applied sinusoidal input. It's a crucial concept for understanding and designing systems like <strong>filters, amplifiers, and control systems</strong>. Key tools for analyzing frequency response include the <strong>transfer function H(jω)</strong> (or H(s)) and <strong>Bode plots</strong>, which graphically display magnitude and phase responses.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Transfer Function H(jω) or H(s)</strong>:</h4>
<p>The transfer function is a complex function that relates the output of a linear time-invariant (LTI) system to its input in the frequency domain (or s-domain for Laplace transforms).</p>
<ul>
    <li>In AC steady-state analysis (using phasors), the frequency response transfer function is:
        <br><code>H(jω) = <strong>V<sub>out</sub></strong>(jω) / <strong>V<sub>in</sub></strong>(jω)</code> (for voltage gain)
        <br>or <code>H(jω) = <strong>I<sub>out</sub></strong>(jω) / <strong>I<sub>in</sub></strong>(jω)</code> (for current gain), etc.
    </li>
    <li>It can be found using voltage/current division, nodal/mesh analysis, etc., with impedances Z(jω).</li>
    <li>H(jω) is a complex quantity: <code>H(jω) = |H(jω)| ∠φ(jω)</code>
        <ul>
            <li><code>|H(jω)|</code> is the <strong>magnitude response</strong> (gain).</li>
            <li><code>φ(jω) = ∠H(jω)</code> is the <strong>phase response</strong> (phase shift).</li>
        </ul>
    </li>
    <li>Using Laplace Transform (s-domain): <code>H(s) = V<sub>out</sub>(s) / V<sub>in</sub>(s)</code>. The frequency response is obtained by setting <code>s = jω</code>, i.e., <code>H(jω) = H(s)|<sub>s=jω</sub></code>.</li>
</ul>

<h4>2. <strong>Bode Plots</strong>:</h4>
<p>Bode plots are a standard way to graphically represent the frequency response. They consist of two plots:</p>
<ul>
    <li><strong>Magnitude Plot</strong>: Magnitude response <code>|H(jω)|</code> in decibels (dB) versus frequency on a logarithmic scale.
        <br><code>|H(jω)|<sub>dB</sub> = 20 log<sub>10</sub> |H(jω)|</code>
    </li>
    <li><strong>Phase Plot</strong>: Phase response <code>φ(jω)</code> in degrees (or radians) versus frequency on a logarithmic scale.</li>
</ul>
<p>Bode plots are useful because they allow complex transfer functions to be sketched by summing the contributions of individual poles and zeros using straight-line approximations (asymptotes).</p>
<ul>
    <li><strong>Poles and Zeros</strong>:
        <ul>
            <li>A <strong>zero</strong> at s = -z (or jω = -z) causes the magnitude response to increase by +20 dB/decade above the zero frequency ω<sub>z</sub>. Phase increases by +90° (typically from -45° at ω<sub>z</sub>/10 to +45° at 10ω<sub>z</sub>, centered at ω<sub>z</sub>).</li>
            <li>A <strong>pole</strong> at s = -p (or jω = -p) causes the magnitude response to decrease by -20 dB/decade above the pole frequency ω<sub>p</sub>. Phase decreases by -90°.</li>
            <li>Poles/zeros at the origin (s=0 or s=j0) have specific behaviors.</li>
            <li>Quadratic poles/zeros (from second-order terms) can cause resonant peaks or dips.</li>
        </ul>
    </li>
    <li><strong>Corner Frequency (or Break Frequency)</strong>: The frequency at which the asymptotic response changes slope, typically associated with a pole or zero. For a simple pole/zero, the actual gain is ±3 dB from the asymptotic value at the corner frequency.</li>
</ul>

<h4>3. <strong>Resonance</strong>:</h4>
<p>Resonance is a phenomenon that occurs in circuits containing both inductors and capacitors (like RLC circuits). At the resonant frequency, the energy stored in the inductor and capacitor can oscillate between them, leading to distinct behaviors.</p>
<ul>
    <li><strong>Series Resonance (Series RLC circuit)</strong>:
        <ul>
            <li>Resonant frequency: <code>ω<sub>0</sub> = 1 / √(LC)</code>.</li>
            <li>At resonance, X<sub>L</sub> = X<sub>C</sub>, so impedance Z = R (minimum). Current is maximum.</li>
            <li>Voltage across L and C can be much larger than source voltage (voltage magnification).</li>
            <li>Bandwidth (BW): <code>BW = ω<sub>2</sub> - ω<sub>1</sub> = R/L</code> (where ω<sub>1</sub>, ω<sub>2</sub> are half-power frequencies).</li>
            <li>Quality Factor (Q): <code>Q = ω<sub>0</sub>L/R = 1/(ω<sub>0</sub>CR) = ω<sub>0</sub>/BW</code>. Higher Q means sharper resonance.</li>
        </ul>
    </li>
    <li><strong>Parallel Resonance (Parallel RLC circuit)</strong>:
        <ul>
            <li>Resonant frequency: <code>ω<sub>0</sub> = 1 / √(LC)</code> (for ideal parallel RLC, more complex if R in series with L).</li>
            <li>At resonance, susceptances B<sub>L</sub> and B<sub>C</sub> cancel. Admittance Y is minimum (1/R). Impedance Z is maximum. Current is minimum.</li>
            <li>Current magnification can occur in L and C branches.</li>
            <li>Bandwidth (BW): <code>BW = 1/(RC)</code> (for tank circuit with parallel R).</li>
            <li>Quality Factor (Q): <code>Q = R/(ω<sub>0</sub>L) = ω<sub>0</sub>CR = ω<sub>0</sub>/BW</code>.</li>
        </ul>
    </li>
</ul>

<h4>4. <strong>Filters</strong>:</h4>
<p>Filters are circuits designed to pass signals within a certain frequency range (passband) and attenuate (block) signals outside this range (stopband).</p>
<ul>
    <li><strong>Low-Pass Filter (LPF)</strong>: Passes low frequencies, attenuates high frequencies. (e.g., series RC with output across C, or series RL with output across R).
        <br>Cutoff frequency (ω<sub>c</sub>): Frequency at which power is halved (-3dB point for magnitude).</li>
    <li><strong>High-Pass Filter (HPF)</strong>: Passes high frequencies, attenuates low frequencies. (e.g., series RC with output across R, or series RL with output across L).</li>
    <li><strong>Band-Pass Filter (BPF)</strong>: Passes frequencies within a specific band, attenuates frequencies outside it. (e.g., series RLC with output across R, or parallel RLC driven by current source with output across tank).</li>
    <li><strong>Band-Stop Filter (BSF or Notch Filter)</strong>: Attenuates frequencies within a specific band, passes frequencies outside it.</li>
    <li>Filter characteristics include cutoff frequency, bandwidth, roll-off rate (dB/decade), Q factor.</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Transfer Function of RC Low-Pass Filter</h4>
<p><strong>Problem</strong>: For a series RC circuit with input voltage V<sub>in</sub> applied across the series R and C, and output V<sub>out</sub> taken across the capacitor C. Find the transfer function H(jω) = V<sub>out</sub>/V<sub>in</sub>.</p>
<p><strong>Solution</strong>:
    <br>Using voltage division:
    <br><code>Z<sub>C</sub> = 1/(jωC)</code>
    <br><code>Z<sub>total</sub> = R + Z<sub>C</sub> = R + 1/(jωC)</code>
    <br><code>H(jω) = V<sub>out</sub>/V<sub>in</sub> = Z<sub>C</sub> / (R + Z<sub>C</sub>) = [1/(jωC)] / [R + 1/(jωC)]</code>
    <br><code>H(jω) = 1 / (1 + jωRC)</code>
    <br>Cutoff frequency ω<sub>c</sub> = 1/(RC).
</p>

<h4>🔸 Example 2: Bode Plot Asymptotes for a Simple Pole</h4>
<p><strong>Problem</strong>: Sketch the asymptotic Bode magnitude plot for <code>H(s) = 10 / (s + 100)</code>.</p>
<p><strong>Solution Sketch</strong>:
    <br>Convert to standard form for Bode: <code>H(jω) = 10 / (100(1 + jω/100)) = 0.1 / (1 + jω/100)</code>.
    <br>DC Gain (at ω→0): |H(j0)| = 0.1. In dB: 20log<sub>10</sub>(0.1) = -20 dB.
    <br>Pole at ω<sub>p</sub> = 100 rad/s.
    <br>Magnitude plot:
        <ul>
            <li>For ω < 100 rad/s: Asymptote is a flat line at -20 dB.</li>
            <li>For ω > 100 rad/s: Asymptote slopes down at -20 dB/decade, starting from -20dB at ω=100.</li>
        </ul>
    <br>At ω=100 rad/s, actual magnitude is -20dB - 3dB = -23dB.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>A first-order RC low-pass filter has R = 1 kΩ and C = 1 μF. Calculate its -3dB cutoff frequency (f<sub>c</sub> in Hz).
        <br><strong>Answer</strong>: ω<sub>c</sub> = 1/(RC) = 1/(1000 * 1*10<sup>-6</sup>) = 1000 rad/s.
        <br>f<sub>c</sub> = ω<sub>c</sub> / (2π) = 1000 / (2π) ≈ 159.15 Hz.
    </li>
    <li>A series RLC circuit has R=10Ω, L=25mH, C=100μF. Calculate its resonant frequency ω<sub>0</sub>.
        <br><strong>Answer</strong>: ω<sub>0</sub> = 1/√(LC) = 1/√((25*10<sup>-3</sup>)*(100*10<sup>-6</sup>)) = 1/√(2.5*10<sup>-6</sup>) = 1/(1.581*10<sup>-3</sup>) ≈ 632.45 rad/s.
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>For the series RLC circuit in problem 2, calculate its Quality Factor (Q) and Bandwidth (BW).
        <br><strong>Answer</strong>: Q = ω<sub>0</sub>L/R = (632.45 * 25*10<sup>-3</sup>)/10 ≈ 1.58.
        <br>BW = ω<sub>0</sub>/Q = 632.45 / 1.58 ≈ 400 rad/s. Or BW = R/L = 10 / (25*10<sup>-3</sup>) = 400 rad/s.
    </li>
    <li>Sketch the asymptotic Bode magnitude and phase plots for <code>H(s) = s / (s + 10)</code>. Identify filter type.
        <br><strong>Hint</strong>: Zero at origin (s=0), pole at s=-10 (ω<sub>p</sub>=10). High-pass filter.
        <br>Magnitude starts at -20dB/decade slope (due to zero at origin) until ω=10, then flattens out. Phase starts at +90°, drops towards 0° around ω=10.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="5">
    <li>Design a second-order series RLC band-pass filter with a center frequency of 10 kHz and a bandwidth of 1 kHz. If R = 50 Ω, find L and C.
        <br><strong>Hint</strong>: ω<sub>0</sub> = 2πf<sub>0</sub>. BW = R/L. ω<sub>0</sub> = 1/√(LC). Solve system of equations.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Understand that the transfer function H(jω) completely characterizes the steady-state AC response of an LTI circuit.</li>
    <li>Practice sketching Bode plots using asymptotic approximations for basic factors (constants, poles/zeros at origin, simple poles/zeros, quadratic poles/zeros).</li>
    <li>Relate Bode plot shapes to filter types (LPF, HPF, BPF, BSF).
        <ul>
            <li>LPF: Constant gain at low ω, rolls off at high ω.</li>
            <li>HPF: Low gain/attenuation at low ω, constant gain at high ω.</li>
            <li>BPF: Peaks at center frequency, rolls off on both sides.</li>
        </ul>
    </li>
    <li>For resonance, understand the conditions (X<sub>L</sub>=X<sub>C</sub> for series, B<sub>L</sub>=B<sub>C</sub> for parallel) and the implications for impedance/admittance and current/voltage.</li>
    <li>The Quality Factor Q is a measure of the "sharpness" of resonance or selectivity of a filter. High Q means narrow bandwidth.</li>
</ul>
        </section>




        <section id="topic15">
            <h2>15: Introduction to the Laplace Transform</h2>
            <h3>📚 Overview:</h3>
<p>The <strong>Laplace transform</strong> is a powerful mathematical tool that extends the concept of frequency domain analysis beyond sinusoidal steady-state. It transforms linear time-invariant (LTI) differential equations in the time domain (t-domain) into algebraic equations in the complex frequency domain (s-domain). This greatly simplifies the analysis of circuits, especially for transient responses, circuits with initial conditions, and systems with more complex inputs. This chapter introduces the definition, properties, and basic pairs of the Laplace transform, along with the inverse Laplace transform using partial fraction expansion.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Definition of the (Unilateral) Laplace Transform</strong>:</h4>
<p>The Laplace transform of a function f(t), defined for t ≥ 0, is given by F(s):</p>
<p><code>F(s) = ℒ{f(t)} = ∫<sub>0<sup>-</sup></sub><sup>∞</sup> f(t)e<sup>-st</sup> dt</code></p>
<p>Where:</p>
<ul>
    <li><code>f(t)</code> is the time-domain function (often assumed f(t)=0 for t < 0).</li>
    <li><code>s</code> is a complex variable: <code>s = σ + jω</code>, called the complex frequency.
        <ul>
            <li>σ is the neper frequency (damping factor).</li>
            <li>ω is the angular frequency.</li>
        </ul>
    </li>
    <li>The integral limit 0<sup>-</sup> is used to correctly include impulses or discontinuities at t=0.</li>
    <li>A <strong>Region of Convergence (ROC)</strong> in the s-plane must be specified for F(s) to be unique, but for most circuit applications with causal signals, it's implicitly understood.</li>
</ul>

<h4>2. <strong>Important Laplace Transform Pairs</strong>:</h4>
<table class="styled-table" style="width:100%; border-collapse: collapse; margin-bottom:15px;">
    <thead>
        <tr>
            <th style="border: 1px solid var(--border-color); padding: 8px; background-color: var(--primary-color);">Time Domain f(t), t ≥ 0</th>
            <th style="border: 1px solid var(--border-color); padding: 8px; background-color: var(--primary-color);">Laplace Domain F(s)</th>
            <th style="border: 1px solid var(--border-color); padding: 8px; background-color: var(--primary-color);">ROC (Typical Causal)</th>
        </tr>
    </thead>
    <tbody>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">δ(t) (Unit impulse)</td><td style="border: 1px solid var(--border-color); padding: 8px;">1</td><td style="border: 1px solid var(--border-color); padding: 8px;">All s</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">u(t) (Unit step)</td><td style="border: 1px solid var(--border-color); padding: 8px;">1/s</td><td style="border: 1px solid var(--border-color); padding: 8px;">Re{s} > 0</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">t u(t) (Ramp)</td><td style="border: 1px solid var(--border-color); padding: 8px;">1/s<sup>2</sup></td><td style="border: 1px solid var(--border-color); padding: 8px;">Re{s} > 0</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">t<sup>n</sup>u(t) (n ≥ 0 integer)</td><td style="border: 1px solid var(--border-color); padding: 8px;">n! / s<sup>n+1</sup></td><td style="border: 1px solid var(--border-color); padding: 8px;">Re{s} > 0</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">e<sup>-at</sup>u(t)</td><td style="border: 1px solid var(--border-color); padding: 8px;">1 / (s + a)</td><td style="border: 1px solid var(--border-color); padding: 8px;">Re{s} > -Re{a}</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">sin(ωt)u(t)</td><td style="border: 1px solid var(--border-color); padding: 8px;">ω / (s<sup>2</sup> + ω<sup>2</sup>)</td><td style="border: 1px solid var(--border-color); padding: 8px;">Re{s} > 0</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">cos(ωt)u(t)</td><td style="border: 1px solid var(--border-color); padding: 8px;">s / (s<sup>2</sup> + ω<sup>2</sup>)</td><td style="border: 1px solid var(--border-color); padding: 8px;">Re{s} > 0</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">e<sup>-at</sup>sin(ωt)u(t)</td><td style="border: 1px solid var(--border-color); padding: 8px;">ω / ((s+a)<sup>2</sup> + ω<sup>2</sup>)</td><td style="border: 1px solid var(--border-color); padding: 8px;">Re{s} > -Re{a}</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">e<sup>-at</sup>cos(ωt)u(t)</td><td style="border: 1px solid var(--border-color); padding: 8px;">(s+a) / ((s+a)<sup>2</sup> + ω<sup>2</sup>)</td><td style="border: 1px solid var(--border-color); padding: 8px;">Re{s} > -Re{a}</td></tr>
    </tbody>
</table>
<style> .styled-table th, .styled-table td { text-align: left; } </style>


<h4>3. <strong>Properties of the Laplace Transform</strong>:</h4>
<ul>
    <li><strong>Linearity</strong>: <code>ℒ{af<sub>1</sub>(t) + bf<sub>2</sub>(t)} = aF<sub>1</sub>(s) + bF<sub>2</sub>(s)</code></li>
    <li><strong>Time Differentiation</strong>: <code>ℒ{df(t)/dt} = sF(s) - f(0<sup>-</sup>)</code>
        <br><code>ℒ{d<sup>n</sup>f(t)/dt<sup>n</sup>} = s<sup>n</sup>F(s) - s<sup>n-1</sup>f(0<sup>-</sup>) - s<sup>n-2</sup>f'(0<sup>-</sup>) - ... - f<sup>(n-1)</sup>(0<sup>-</sup>)</code></li>
    <li><strong>Time Integration</strong>: <code>ℒ{∫<sub>0</sub><sup>t</sup> f(τ)dτ} = F(s)/s</code></li>
    <li><strong>Frequency Shifting (s-Shifting)</strong>: <code>ℒ{e<sup>-at</sup>f(t)} = F(s+a)</code></li>
    <li><strong>Time Shifting (t-Shifting)</strong>: <code>ℒ{f(t-t<sub>0</sub>)u(t-t<sub>0</sub>)} = e<sup>-st<sub>0</sub></sup>F(s)</code> (for t<sub>0</sub> > 0)</li>
    <li><strong>Frequency Differentiation (Differentiation in s-domain)</strong>: <code>ℒ{-tf(t)} = dF(s)/ds</code></li>
    <li><strong>Scaling</strong>: <code>ℒ{f(at)} = (1/|a|)F(s/a)</code> (for a > 0)</li>
    <li><strong>Initial Value Theorem (IVT)</strong>: <code>f(0<sup>+</sup>) = lim<sub>s→∞</sub> sF(s)</code>
        <br>(Provided the limit exists and f(t) contains no impulses or higher-order singularities at t=0).</li>
    <li><strong>Final Value Theorem (FVT)</strong>: <code>lim<sub>t→∞</sub> f(t) = lim<sub>s→0</sub> sF(s)</code>
        <br>(Provided that sF(s) has no poles in the right-half s-plane or on the jω-axis, except possibly a single pole at s=0).</li>
    <li><strong>Convolution Theorem</strong>: <code>ℒ{f<sub>1</sub>(t) * f<sub>2</sub>(t)} = F<sub>1</sub>(s)F<sub>2</sub>(s)</code>
        <br>where <code>f<sub>1</sub>(t) * f<sub>2</sub>(t) = ∫<sub>0</sub><sup>t</sup> f<sub>1</sub>(τ)f<sub>2</sub>(t-τ)dτ</code> (for causal signals).</li>
</ul>

<h4>4. <strong>Inverse Laplace Transform (ℒ<sup>-1</sup>{F(s)})</strong>:</h4>
<p>Transforms an s-domain function F(s) back to the time-domain function f(t). For rational functions F(s) = N(s)/D(s) (ratio of polynomials), the most common method is <strong>Partial Fraction Expansion (PFE)</strong>.</p>
<ul>
    <li><strong>Step 1</strong>: Ensure F(s) is a proper rational function (degree of N(s) < degree of D(s)). If not, perform long division first.</li>
    <li><strong>Step 2</strong>: Factor the denominator D(s) to find its roots (poles of F(s)).</li>
    <li><strong>Step 3</strong>: Expand F(s) into a sum of simpler fractions based on the poles:
        <ul>
            <li><strong>Distinct Real Poles</strong>: If F(s) has a pole p<sub>1</sub>, then a term <code>A<sub>1</sub>/(s-p<sub>1</sub>)</code> appears. Residue <code>A<sub>1</sub> = [(s-p<sub>1</sub>)F(s)]|<sub>s=p<sub>1</sub></sub></code>.</li>
            <li><strong>Repeated Real Poles</strong>: If F(s) has a pole p of multiplicity m, terms are <code>A<sub>m</sub>/(s-p)<sup>m</sup> + A<sub>m-1</sub>/(s-p)<sup>m-1</sup> + ... + A<sub>1</sub>/(s-p)</code>.
                <br><code>A<sub>k</sub> = (1/(m-k)!) * [d<sup>m-k</sup>/ds<sup>m-k</sup> ((s-p)<sup>m</sup>F(s))]|<sub>s=p</sub></code>.</li>
            <li><strong>Distinct Complex Conjugate Poles</strong>: If F(s) has poles <code>p = -α ± jω<sub>d</sub></code>, then terms can be like <code>(As+B)/((s+α)<sup>2</sup> + ω<sub>d</sub><sup>2</sup>)</code> or combined residues <code>K/(s-p) + K<sup>*</sup>/(s-p<sup>*</sup>)</code>. These invert to damped sinusoids.
                Residue <code>K = [(s-p)F(s)]|<sub>s=p</sub></code>. Inverse is <code>2|K|e<sup>-αt</sup>cos(ω<sub>d</sub>t + ∠K)</code>.</li>
        </ul>
    </li>
    <li><strong>Step 4</strong>: Use the table of Laplace transform pairs to find the inverse transform of each term.</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Laplace Transform of a Function</h4>
<p><strong>Problem</strong>: Find the Laplace transform of <code>f(t) = 5e<sup>-2t</sup>u(t) - 3cos(4t)u(t)</code>.</p>
<p><strong>Solution</strong>: Using linearity and standard pairs:
    <br><code>ℒ{5e<sup>-2t</sup>u(t)} = 5 * [1/(s+2)] = 5/(s+2)</code>
    <br><code>ℒ{-3cos(4t)u(t)} = -3 * [s/(s<sup>2</sup>+4<sup>2</sup>)] = -3s/(s<sup>2</sup>+16)</code>
    <br><code>F(s) = 5/(s+2) - 3s/(s<sup>2</sup>+16)</code>.
</p>

<h4>🔸 Example 2: Inverse Laplace Transform (Distinct Real Poles)</h4>
<p><strong>Problem</strong>: Find f(t) if <code>F(s) = (s+6) / (s(s+1)(s+2))</code>.</p>
<p><strong>Solution</strong>: Partial Fraction Expansion:
    <br><code>F(s) = A/s + B/(s+1) + C/(s+2)</code>
    <br><code>A = [sF(s)]|<sub>s=0</sub> = (0+6)/((0+1)(0+2)) = 6/2 = 3</code>.
    <br><code>B = [(s+1)F(s)]|<sub>s=-1</sub> = (-1+6)/((-1)(-1+2)) = 5/(-1) = -5</code>.
    <br><code>C = [(s+2)F(s)]|<sub>s=-2</sub> = (-2+6)/((-2)(-2+1)) = 4/((-2)(-1)) = 4/2 = 2</code>.
    <br>So, <code>F(s) = 3/s - 5/(s+1) + 2/(s+2)</code>.
    <br><code>f(t) = [3u(t) - 5e<sup>-t</sup>u(t) + 2e<sup>-2t</sup>u(t)] = (3 - 5e<sup>-t</sup> + 2e<sup>-2t</sup>)u(t)</code>.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Find the Laplace transform of <code>f(t) = 7u(t) - 2t u(t)</code>.
        <br><strong>Answer</strong>: <code>F(s) = 7/s - 2/s<sup>2</sup></code>.</li>
    <li>Find the inverse Laplace transform of <code>F(s) = 4/(s+3)</code>.
        <br><strong>Answer</strong>: <code>f(t) = 4e<sup>-3t</sup>u(t)</code>.</li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>Using the differentiation property, find the Laplace transform of <code>f(t) = te<sup>-at</sup>u(t)</code> given <code>ℒ{e<sup>-at</sup>u(t)} = 1/(s+a)</code>.
        <br><strong>Hint</strong>: <code>ℒ{tf(t)} = -dF(s)/ds</code>. Here, the original function is <code>e<sup>-at</sup></code>, its transform is <code>1/(s+a)</code>. So for <code>t(e<sup>-at</sup>)</code>, differentiate <code>1/(s+a)</code> wrt s and multiply by -1.
        <br><code>-d/ds [1/(s+a)] = -[-(s+a)<sup>-2</sup> * 1] = 1/(s+a)<sup>2</sup></code>.
    </li>
    <li>Find the inverse Laplace transform of <code>F(s) = 1 / (s<sup>2</sup> + 4s + 8)</code>.
        <br><strong>Hint</strong>: Complete the square in the denominator: <code>s<sup>2</sup> + 4s + 8 = (s+2)<sup>2</sup> + 4 = (s+2)<sup>2</sup> + 2<sup>2</sup></code>.
        <br>This matches the form <code>ω / ((s+a)<sup>2</sup> + ω<sup>2</sup>)</code> for <code>e<sup>-at</sup>sin(ωt)</code> with a=2, ω=2, but numerator is 1 not ω.
        <br><code>F(s) = (1/2) * [2 / ((s+2)<sup>2</sup> + 2<sup>2</sup>)]</code>.
        <br><code>f(t) = (1/2)e<sup>-2t</sup>sin(2t)u(t)</code>.</li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="5">
    <li>Solve the differential equation <code>y''(t) + 5y'(t) + 6y(t) = u(t)</code> with y(0<sup>-</sup>)=0, y'(0<sup>-</sup>)=1.
        <br><strong>Hint</strong>: Take Laplace transform of both sides, include initial conditions.
        <br><code>[s<sup>2</sup>Y(s) - sy(0) - y'(0)] + 5[sY(s) - y(0)] + 6Y(s) = 1/s</code>
        <br><code>s<sup>2</sup>Y(s) - 1 + 5sY(s) + 6Y(s) = 1/s</code>
        <br><code>(s<sup>2</sup>+5s+6)Y(s) = 1 + 1/s = (s+1)/s</code>
        <br><code>Y(s) = (s+1) / (s(s+2)(s+3))</code>. Use PFE to find y(t).
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Memorize the common Laplace transform pairs and properties, especially differentiation, integration, and s-shifting.</li>
    <li>Master partial fraction expansion for various types of poles (distinct real, repeated real, complex conjugate). This is key for finding inverse transforms.</li>
    <li>Understand how initial conditions are incorporated into the Laplace transform of derivatives.
    <li>The IVT and FVT are useful for quickly checking the initial and final behavior of a system response from its s-domain representation, without needing to find the full inverse transform. (Verify applicability conditions).</li>
    <li>The Laplace transform is a generalization of the Fourier transform (for causal signals, Fourier is Laplace evaluated on jω axis if ROC includes it).</li>
</ul>
        </section>




        <section id="topic16">
            <h2>16: Applications of the Laplace Transform</h2>
            <h3>📚 Overview:</h3>
<p>This chapter builds upon the introduction to the Laplace transform by demonstrating its practical applications in <strong>circuit analysis</strong>. We will see how to transform entire circuits into the s-domain, including sources and initial conditions, and then use algebraic techniques (like nodal analysis, mesh analysis, voltage/current division) to solve for circuit responses. Key applications include analyzing <strong>transient behavior, steady-state AC response, transfer functions, system stability, and impulse response via convolution</strong>.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Circuit Element Models in the s-Domain (including Initial Conditions)</strong>:</h4>
<p>To analyze circuits using Laplace transforms, each element is replaced by its s-domain equivalent.</p>
<ul>
    <li><strong>Resistor (R)</strong>:
        <br>Time: <code>v(t) = Ri(t)</code>
        <br>s-Domain: <code>V(s) = RI(s)</code> ⇒ Impedance <code>Z<sub>R</sub>(s) = R</code>.
        <div style="text-align:center; margin:10px;">
         <svg width="150" height="60" viewBox="0 0 150 60" xmlns="http://www.w3.org/2000/svg" style="background-color:var(--bg-color); border:1px solid var(--border-color);"><line x1="10" y1="30" x2="40" y2="30" stroke="var(--text-color)" stroke-width="2"/><rect x="40" y="20" width="30" height="20" stroke="var(--text-color)" stroke-width="2" fill="none"/><line x1="70" y1="30" x2="100" y2="30" stroke="var(--text-color)" stroke-width="2"/><text x="48" y="15" fill="var(--text-color)" font-size="10">R</text><text x="110" y="35" fill="var(--text-color)" font-size="12">V(s) = RI(s)</text></svg>
        </div>
    </li>
    <li><strong>Inductor (L)</strong>:
        <br>Time: <code>v(t) = L di(t)/dt</code>
        <br>s-Domain: <code>V(s) = sLI(s) - Li(0<sup>-</sup>)</code>
        <br>This can be modeled as an impedance <code>Z<sub>L</sub>(s) = sL</code> in series with a voltage source <code>Li(0<sup>-</sup>)</code> (polarity opposes current I(s) if i(0<sup>-</sup>) > 0).
        <br>Alternatively, current source model: <code>I(s) = V(s)/(sL) + i(0<sup>-</sup>)/s</code> (impedance sL in parallel with current source i(0<sup>-</sup>)/s).
        <div style="text-align:center; margin:10px;">
         <svg width="200" height="80" viewBox="0 0 200 80" xmlns="http://www.w3.org/2000/svg" style="background-color:var(--bg-color); border:1px solid var(--border-color);"><line x1="10" y1="40" x2="30" y2="40" stroke="var(--text-color)" stroke-width="2"/><path d="M30 40 Q 35 25, 40 40 T 50 40 T 60 40" stroke="var(--text-color)" stroke-width="2" fill="none"/><text x="40" y="20" fill="var(--text-color)" font-size="10">sL</text><line x1="60" y1="40" x2="70" y2="40" stroke="var(--text-color)" stroke-width="2"/><circle cx="80" cy="40" r="10" stroke="var(--text-color)" stroke-width="2" fill="none"/><line x1="80" y1="35" x2="80" y2="45" stroke="var(--text-color)" stroke-width="1"/><line x1="75" y1="40" x2="85" y2="40" stroke="var(--text-color)" stroke-width="1"/><text x="70" y="65" fill="var(--text-color)" font-size="10">Li(0⁻)</text><text x="88" y="43" fill="var(--text-color)" font-size="10">+</text><text x="88" y="33" fill="var(--text-color)" font-size="10">-</text><line x1="90" y1="40" x2="110" y2="40" stroke="var(--text-color)" stroke-width="2"/><text x="120" y="45" fill="var(--text-color)" font-size="12">V(s) = sLI(s) - Li(0⁻)</text></svg>
        </div>
    </li>
    <li><strong>Capacitor (C)</strong>:
        <br>Time: <code>i(t) = C dv(t)/dt</code>
        <br>s-Domain: <code>I(s) = sCV(s) - Cv(0<sup>-</sup>)</code>
        <br>This can be modeled as an admittance <code>Y<sub>C</sub>(s) = sC</code> (impedance <code>Z<sub>C</sub>(s) = 1/(sC)</code>) in parallel with a current source <code>Cv(0<sup>-</sup>)</code> (direction opposes V(s) if v(0<sup>-</sup>) > 0).
        <br>Alternatively, voltage source model: <code>V(s) = I(s)/(sC) + v(0<sup>-</sup>)/s</code> (impedance 1/(sC) in series with voltage source v(0<sup>-</sup>)/s).
        <div style="text-align:center; margin:10px;">
         <svg width="200" height="80" viewBox="0 0 200 80" xmlns="http://www.w3.org/2000/svg" style="background-color:var(--bg-color); border:1px solid var(--border-color);"><line x1="10" y1="40" x2="30" y2="40" stroke="var(--text-color)" stroke-width="2"/><line x1="30" y1="25" x2="30" y2="55" stroke="var(--text-color)" stroke-width="2"/><line x1="40" y1="25" x2="40" y2="55" stroke="var(--text-color)" stroke-width="2"/><text x="20" y="20" fill="var(--text-color)" font-size="10">1/sC</text><line x1="40" y1="40" x2="50" y2="40" stroke="var(--text-color)" stroke-width="2"/><circle cx="60" cy="40" r="10" stroke="var(--text-color)" stroke-width="2" fill="none"/><line x1="60" y1="35" x2="60" y2="45" stroke="var(--text-color)" stroke-width="1"/><line x1="55" y1="40" x2="65" y2="40" stroke="var(--text-color)" stroke-width="1"/><text x="50" y="65" fill="var(--text-color)" font-size="10">v(0⁻)/s</text><text x="68" y="43" fill="var(--text-color)" font-size="10">+</text><text x="68" y="33" fill="var(--text-color)" font-size="10">-</text><line x1="70" y1="40" x2="90" y2="40" stroke="var(--text-color)" stroke-width="2"/><text x="100" y="45" fill="var(--text-color)" font-size="12">V(s) = I(s)/(sC) + v(0⁻)/s</text></svg>
        </div>
    </li>
</ul>
<p>Independent voltage source v(t) ↔ V(s). Independent current source i(t) ↔ I(s).</p>

<h4>2. <strong>Solving Circuits in the s-Domain</strong>:</h4>
<ol>
    <li>Transform the circuit from the time domain to the s-domain, replacing elements and sources with their s-domain equivalents (including initial condition sources if any).</li>
    <li>Solve the algebraic s-domain circuit for the desired variable (V(s) or I(s)) using standard DC circuit analysis techniques (nodal, mesh, superposition, voltage/current division, Thevenin/Norton) with complex impedances.</li>
    <li>Obtain the time-domain solution by taking the inverse Laplace transform of the s-domain variable.</li>
</ol>

<h4>3. <strong>Transfer Function H(s)</strong>:</h4>
<p>For an LTI system with input X(s) and output Y(s), the transfer function is:</p>
<p><code>H(s) = Y(s) / X(s)</code> (assuming zero initial conditions).</p>
<ul>
    <li>Poles of H(s) are the roots of the denominator polynomial D(s) = 0.</li>
    <li>Zeros of H(s) are the roots of the numerator polynomial N(s) = 0.</li>
    <li>The transfer function completely characterizes the system's input-output relationship.</li>
</ul>

<h4>4. <strong>Impulse Response h(t)</strong>:</h4>
<p>The impulse response h(t) of a system is its output when the input is a unit impulse δ(t). Since ℒ{δ(t)} = 1, then <code>H(s) = Y(s)/1 ⇒ Y(s) = H(s)</code>.</p>
<p>Therefore, <code>h(t) = ℒ<sup>-1</sup>{H(s)}</code>.</p>

<h4>5. <strong>Convolution Theorem in System Analysis</strong>:</h4>
<p>For any input x(t) to an LTI system with impulse response h(t), the output y(t) is the convolution of x(t) and h(t):</p>
<p><code>y(t) = x(t) * h(t) = ∫<sub>0</sub><sup>t</sup> x(τ)h(t-τ)dτ</code> (for causal systems).</p>
<p>In the s-domain, this becomes simple multiplication:</p>
<p><code>Y(s) = X(s)H(s)</code>.</p>

<h4>6. <strong>Stability Analysis using Poles of H(s)</strong>:</h4>
<p>A system is Bounded-Input, Bounded-Output (BIBO) stable if and only if all poles of its transfer function H(s) lie in the <strong>left-half of the s-plane</strong> (Re{pole} < 0).</p>
<ul>
    <li>Poles on the jω-axis (and not repeated) lead to sustained oscillations (marginally stable).</li>
    <li>Poles in the right-half s-plane (Re{pole} > 0) lead to an unstable response (output grows without bound).</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: RC Circuit Step Response using Laplace</h4>
<p><strong>Problem</strong>: A series RC circuit (R=1kΩ, C=1μF) is initially uncharged. At t=0, a 10V DC source is applied. Find v<sub>C</sub>(t) using Laplace transforms.</p>
<p><strong>Solution</strong>:
    <br>V<sub>s</sub>(s) = 10/s. Z<sub>R</sub>(s) = R = 1000. Z<sub>C</sub>(s) = 1/(sC) = 1/(s*10<sup>-6</sup>). v<sub>C</sub>(0<sup>-</sup>)=0.
    <br>Using voltage division in s-domain:
    <br><code>V<sub>C</sub>(s) = V<sub>s</sub>(s) * [Z<sub>C</sub>(s) / (Z<sub>R</sub>(s) + Z<sub>C</sub>(s))]</code>
    <br><code>V<sub>C</sub>(s) = (10/s) * [(1/(sC)) / (R + 1/(sC))] = (10/s) * [1 / (sRC + 1)]</code>
    <br>RC = 1000 * 10<sup>-6</sup> = 10<sup>-3</sup> = 0.001.
    <br><code>V<sub>C</sub>(s) = 10 / (s(0.001s + 1)) = 10000 / (s(s + 1000))</code>.
    <br>PFE: <code>V<sub>C</sub>(s) = A/s + B/(s+1000)</code>
    <br><code>A = [sV<sub>C</sub>(s)]|<sub>s=0</sub> = 10000/1000 = 10</code>.
    <br><code>B = [(s+1000)V<sub>C</sub>(s)]|<sub>s=-1000</sub> = 10000/(-1000) = -10</code>.
    <br><code>V<sub>C</sub>(s) = 10/s - 10/(s+1000)</code>.
    <br><code>v<sub>C</sub>(t) = (10 - 10e<sup>-1000t</sup>)u(t) = 10(1 - e<sup>-1000t</sup>)u(t) V</code>.
</p>

<h4>🔸 Example 2: Finding Transfer Function</h4>
<p><strong>Problem</strong>: For the RC low-pass filter (output across C, input V<sub>s</sub> across series R and C), find H(s) = V<sub>C</sub>(s)/V<sub>s</sub>(s).</p>
<p><strong>Solution</strong>: (Assuming zero initial conditions)
    <br><code>V<sub>C</sub>(s) = I(s) * (1/(sC))</code>
    <br><code>V<sub>s</sub>(s) = I(s) * (R + 1/(sC))</code>
    <br><code>H(s) = V<sub>C</sub>(s)/V<sub>s</sub>(s) = [I(s) * (1/(sC))] / [I(s) * (R + 1/(sC))] = (1/(sC)) / (R + 1/(sC))</code>
    <br><code>H(s) = 1 / (sRC + 1)</code>.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>An inductor L has an initial current i(0<sup>-</sup>) = 2A. Write its s-domain voltage-source equivalent model.
        <br><strong>Answer</strong>: Impedance sL in series with a voltage source Li(0<sup>-</sup>) = 2L volts, with polarity such that it tends to maintain the initial current direction (usually opposing the defined V(s) if I(s) assumed to enter positive terminal of V(s)).</li>
    <li>Find the transfer function H(s) = V<sub>R</sub>(s)/V<sub>s</sub>(s) for a series RL circuit where output is taken across R.
        <br><strong>Answer</strong>: <code>H(s) = R / (R + sL)</code>.</li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>A series RLC circuit (R=2Ω, L=1H, C=0.5F) is initially at rest. A unit impulse voltage δ(t) is applied at t=0. Find the current I(s) and then i(t).
        <br><strong>Hint</strong>: V<sub>s</sub>(s) = ℒ{δ(t)} = 1. Z(s) = R + sL + 1/(sC). I(s) = V<sub>s</sub>(s)/Z(s). Then find inverse.
        <br><code>Z(s) = 2 + s + 2/s = (s<sup>2</sup> + 2s + 2)/s</code>.
        <br><code>I(s) = s / (s<sup>2</sup> + 2s + 2) = s / ((s+1)<sup>2</sup> + 1)</code>.
        <br>Rewrite as <code>(s+1-1) / ((s+1)<sup>2</sup> + 1) = (s+1)/((s+1)<sup>2</sup>+1) - 1/((s+1)<sup>2</sup>+1)</code>.
        <br><code>i(t) = (e<sup>-t</sup>cos(t) - e<sup>-t</sup>sin(t))u(t)</code>.</li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>A system has a transfer function <code>H(s) = (s-1) / (s<sup>2</sup> + 3s + 2)</code>. Determine if the system is stable. Find its impulse response h(t).
        <br><strong>Hint</strong>: Poles of H(s) are roots of s<sup>2</sup>+3s+2=0 ⇒ (s+1)(s+2)=0 ⇒ s=-1, s=-2. Both in LHP, so stable.
        <br><code>H(s) = (s-1)/((s+1)(s+2)) = A/(s+1) + B/(s+2)</code>.
        <br><code>A = [((s-1)/(s+2))]|<sub>s=-1</sub> = (-1-1)/(-1+2) = -2/1 = -2</code>.
        <br><code>B = [((s-1)/(s+1))]|<sub>s=-2</sub> = (-2-1)/(-2+1) = -3/-1 = 3</code>.
        <br><code>H(s) = -2/(s+1) + 3/(s+2)</code>.
        <br><code>h(t) = (-2e<sup>-t</sup> + 3e<sup>-2t</sup>)u(t)</code>.
    </li>
</ol>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Always clearly draw the s-domain equivalent circuit, including sources for initial conditions with correct polarities/directions.</li>
    <li>The impedance concept <code>Z(s)</code> (R, sL, 1/sC) allows treating AC and transient analysis with algebraic methods similar to DC.</li>
    <li>Remember that the transfer function H(s) assumes zero initial conditions. If initial conditions are present and the complete response is needed (not just for H(s) definition), they must be included in the s-domain model of components.</li>
    <li>Stability is determined by the pole locations of H(s) in the s-plane (poles must be in the Left Half Plane for BIBO stability).</li>
    <li>Convolution in time domain (for output y(t) = x(t)*h(t)) is multiplication in s-domain (Y(s)=X(s)H(s)), which often simplifies finding the output.</li>
</ul>

<!-- Start of Interactive Demo for Chapter 16 -->
<hr style="margin: 20px 0; border-color: var(--border-color);">
<h3>Interactive Demo: Second-Order RLC Circuit Step Response</h3>
<p>Explore how changing R, L, and C values in a series RLC circuit affects its step response to a 1V DC source (V<sub>s</sub>=1V) applied at t=0. Assume initial conditions are zero (v<sub>C</sub>(0)=0, i<sub>L</sub>(0)=0).</p>
<div class="simulator-container" style="background-color: var(--primary-color); padding:15px; border-radius:5px;">
    <div class="controls" style="flex-basis: 100%; margin-bottom: 15px;">
        <label for="rlcR">Resistance R (Ω):</label>
        <input type="number" id="rlcR" value="4" min="0.1" step="0.1" style="width:80px;">
        <label for="rlcL">Inductance L (H):</label>
        <input type="number" id="rlcL" value="1" min="0.01" step="0.01" style="width:80px;">
        <label for="rlcC">Capacitance C (F):</label>
        <input type="number" id="rlcC" value="0.25" min="0.01" step="0.01" style="width:80px;">
        <button id="rlcSimulateBtn" style="margin-left:10px;">Analyze</button>
    </div>
    <div class="results" id="rlcResults" style="flex-basis: 100%; min-height:150px; background-color:var(--code-bg); padding:10px; border-radius:4px;">
        <p><strong>Analysis:</strong></p>
        <p>α (Damping Factor): <span id="alphaVal">N/A</span> Np/s</p>
        <p>ω<sub>0</sub> (Natural Freq.): <span id="omega0Val">N/A</span> rad/s</p>
        <p>Damping Type: <span id="dampingType">N/A</span></p>
        <p>Roots (s<sub>1</sub>, s<sub>2</sub>): <span id="rootsVal">N/A</span></p>
        <p>General solution form v<sub>C</sub>(t) for t ≥ 0 (V<sub>s</sub>=1V):</p>
        <pre><code id="solutionFormVc">v_C(t) = 1 + ...</code></pre>
        <canvas id="rlcResponseCanvas" width="350" height="200" style="background-color:#2c3e50; margin-top:10px;"></canvas>
    </div>
</div>
<!-- End of Interactive Demo for Chapter 16 -->
        </section>




        <section id="topic17">
            <h2>17: The Fourier Series</h2>
            <section id="topic17">
    <h2>17: The Fourier Series</h2>
    <h3>📚 Overview:</h3>
    <p>The <strong>Fourier series</strong>, developed by Jean-Baptiste Joseph Fourier, is a mathematical method for representing any <strong>periodic function</strong> as a sum of sine and cosine functions (or equivalently, complex exponentials) that are harmonically related. This decomposition into sinusoids is incredibly powerful for analyzing how linear systems respond to complex periodic inputs, understanding signal content in communications, and analyzing distortion in power systems. The key idea is that even complex repetitive waveforms can be built from simple sinusoidal "building blocks."</p>

    <h3>🔑 Key Concepts:</h3>

    <h4>1. <strong>Periodic Functions</strong>:</h4>
    <p>A function f(t) is periodic if there exists a positive constant T (the period) such that for all t:</p>
    <p><code>f(t) = f(t + T)</code></p>
    <p>The <strong>fundamental frequency</strong> is <code>f<sub>0</sub> = 1/T</code> (in Hz), and the <strong>fundamental angular frequency</strong> is <code>ω<sub>0</sub> = 2πf<sub>0</sub> = 2π/T</code> (in rad/s).</p>

    <h4>2. <strong>Trigonometric Fourier Series</strong>:</h4>
    <p>Any reasonably well-behaved periodic function f(t) with period T can be represented by the series:</p>
    <p><code>f(t) = a<sub>0</sub> + ∑<sub>n=1</sub><sup>∞</sup> [a<sub>n</sub> cos(nω<sub>0</sub>t) + b<sub>n</sub> sin(nω<sub>0</sub>t)]</code></p>
    <p>Where the Fourier coefficients are calculated as:</p>
    <ul>
        <li><strong>DC Component (Average Value)</strong>:
            <br><code>a<sub>0</sub> = (1/T) ∫<sub>T</sub> f(t) dt</code> (Integral over one full period)
        </li>
        <li><strong>Cosine Coefficients (Even Components)</strong>:
            <br><code>a<sub>n</sub> = (2/T) ∫<sub>T</sub> f(t) cos(nω<sub>0</sub>t) dt</code> (for n = 1, 2, 3, ...)
        </li>
        <li><strong>Sine Coefficients (Odd Components)</strong>:
            <br><code>b<sub>n</sub> = (2/T) ∫<sub>T</sub> f(t) sin(nω<sub>0</sub>t) dt</code> (for n = 1, 2, 3, ...)
        </li>
    </ul>
    <p>The term <code>nω<sub>0</sub></code> represents the n<sup>th</sup> harmonic frequency. The n=1 terms are the fundamental.</p>

    <h4>3. <strong>Amplitude-Phase (Compact Trigonometric) Form</strong>:</h4>
    <p>The series can also be written as:</p>
    <p><code>f(t) = A<sub>0</sub> + ∑<sub>n=1</sub><sup>∞</sup> A<sub>n</sub> cos(nω<sub>0</sub>t + φ<sub>n</sub>)</code></p>
    <p>Where:</p>
    <ul>
        <li><code>A<sub>0</sub> = a<sub>0</sub></code></li>
        <li><code>A<sub>n</sub> = √(a<sub>n</sub><sup>2</sup> + b<sub>n</sub><sup>2</sup>)</code> (Amplitude of the n<sup>th</sup> harmonic)</li>
        <li><code>φ<sub>n</sub> = -atan2(b<sub>n</sub>, a<sub>n</sub>)</code> (Phase of the n<sup>th</sup> harmonic; atan2 handles quadrants correctly)</li>
    </ul>

    <h4>4. <strong>Exponential (Complex) Fourier Series</strong>:</h4>
    <p>Using Euler's identity, an equivalent form is:</p>
    <p><code>f(t) = ∑<sub>n=-∞</sub><sup>∞</sup> c<sub>n</sub> e<sup>jnω<sub>0</sub>t</sup></code></p>
    <p>Where the complex Fourier coefficients are:</p>
    <p><code>c<sub>n</sub> = (1/T) ∫<sub>T</sub> f(t)e<sup>-jnω<sub>0</sub>t</sup> dt</code></p>
    <p>Relationships between coefficients (for real f(t)):</p>
    <ul>
        <li><code>c<sub>0</sub> = a<sub>0</sub></code></li>
        <li><code>c<sub>n</sub> = (1/2)(a<sub>n</sub> - jb<sub>n</sub>)</code> for n > 0</li>
        <li><code>c<sub>-n</sub> = (1/2)(a<sub>n</sub> + jb<sub>n</sub>) = c<sub>n</sub><sup>*</sup></code> (conjugate symmetry)</li>
        <li><code>|c<sub>n</sub>| = (1/2)A<sub>n</sub></code> for n > 0 (half the amplitude spectrum for positive frequencies)</li>
    </ul>

    <h4>5. <strong>Symmetry Properties</strong>:</h4>
    <p>Symmetries in f(t) can simplify coefficient calculation:</p>
    <ul>
        <li><strong>Even Symmetry</strong> (f(-t) = f(t), e.g., cosine wave): All <code>b<sub>n</sub> = 0</code>. Series contains only DC and cosine terms. Integration can be <code>(4/T)∫<sub>0</sub><sup>T/2</sup> ...</code> for a<sub>n</sub>.</li>
        <li><strong>Odd Symmetry</strong> (f(-t) = -f(t), e.g., sine wave): All <code>a<sub>n</sub> = 0</code> (including a<sub>0</sub>). Series contains only sine terms. Integration can be <code>(4/T)∫<sub>0</sub><sup>T/2</sup> ...</code> for b<sub>n</sub>.</li>
        <li><strong>Half-Wave Symmetry</strong> (f(t) = -f(t + T/2)): All even harmonics are zero (a<sub>n</sub> = 0, b<sub>n</sub> = 0 for n even). Series contains only odd harmonics. <code>a<sub>0</sub>=0</code>.</li>
    </ul>

    <h4>6. <strong>Parseval's Theorem (Power in Periodic Signals)</strong>:</h4>
    <p>The average power of a periodic signal f(t) is related to its Fourier coefficients:</p>
    <p><code>P<sub>avg</sub> = (1/T) ∫<sub>T</sub> |f(t)|<sup>2</sup> dt = a<sub>0</sub><sup>2</sup> + (1/2) ∑<sub>n=1</sub><sup>∞</sup> (a<sub>n</sub><sup>2</sup> + b<sub>n</sub><sup>2</sup>) = ∑<sub>n=-∞</sub><sup>∞</sup> |c<sub>n</sub>|<sup>2</sup></code></p>
    <p>(Assuming R=1Ω for power calculation, or f(t) is voltage/current).</p>

    <h4>7. <strong>Line Spectra (Frequency Spectra)</strong>:</h4>
    <p>Plots of the amplitude (A<sub>n</sub> or |c<sub>n</sub>|) and phase (φ<sub>n</sub> or ∠c<sub>n</sub>) of the Fourier coefficients versus frequency (nω<sub>0</sub>). For periodic signals, these are discrete spectra (lines at harmonic frequencies).</p>

    <h3>🧮 Example Problems:</h3>

    <h4>🔸 Example 1: Fourier Series of a Square Wave</h4>
    <p><strong>Problem</strong>: A square wave: f(t) = A for 0 < t < T/2, and f(t) = -A for T/2 < t < T. Period T.</p>
    <p><strong>Solution (Odd Symmetry if centered, or general calculation)</strong>:
        <br>a<sub>0</sub> = 0 (average is zero).
        <br>a<sub>n</sub> = 0 (if wave is odd symmetric around t=0).
        <br>If f(t) as defined (not explicitly centered as odd), and assuming ω<sub>0</sub> = 2π/T:
        <br>b<sub>n</sub> = (2/T) [∫<sub>0</sub><sup>T/2</sup> A sin(nω<sub>0</sub>t) dt + ∫<sub>T/2</sub><sup>T</sup> (-A) sin(nω<sub>0</sub>t) dt]
        <br>Calculation yields: b<sub>n</sub> = (4A)/(nπ) for n odd, and 0 for n even.
        <br>So, <code>f(t) = (4A/π) [sin(ω<sub>0</sub>t) + (1/3)sin(3ω<sub>0</sub>t) + (1/5)sin(5ω<sub>0</sub>t) + ...]</code>
    </p>

    <h3>📝 Practice Problems:</h3>
    <h4>🔹 Level 1 – Basic:</h4>
    <ol>
        <li>What is the fundamental frequency of a signal with period T = 20 ms?
            <br><strong>Answer</strong>: f<sub>0</sub> = 1/T = 1/(20*10<sup>-3</sup> s) = 50 Hz. ω<sub>0</sub> = 2π * 50 = 100π rad/s.
        </li>
        <li>A signal is f(t) = 5 + 3cos(10t) + 2sin(20t). Identify a<sub>0</sub>, a<sub>1</sub>, b<sub>1</sub>, a<sub>2</sub>, b<sub>2</sub> if ω<sub>0</sub>=10 rad/s.
            <br><strong>Answer</strong>: a<sub>0</sub>=5. For the fundamental (n=1, nω<sub>0</sub>=10): a<sub>1</sub>=3, b<sub>1</sub>=0. For the second harmonic (n=2, nω<sub>0</sub>=20): a<sub>2</sub>=0, b<sub>2</sub>=2.
        </li>
    </ol>
    <h4>🔹 Level 2 – Intermediate:</h4>
    <ol start="3">
        <li>Find the trigonometric Fourier series for a full-wave rectified sine wave: f(t) = |A sin(ωt)|. The period of f(t) is T = π/ω (so fundamental angular frequency of f(t) is ω<sub>0_rect</sub> = 2ω).
            <br><strong>Hint</strong>: This function is even with respect to its own period. Let A=1 and ω=1 for simplicity (so f(t)=|sin(t)|, T=π, ω<sub>0_rect</sub>=2).
            <br>a<sub>0</sub> = (1/π)∫<sub>0</sub><sup>π</sup> sin(t)dt = 2/π.
            <br>a<sub>n_rect</sub> = (2/π)∫<sub>0</sub><sup>π</sup> sin(t)cos(n * 2t)dt. For n≥1.
            <br>Result after integration: a<sub>n_rect</sub> = -4/(Aπ(4n<sup>2</sup>-1)). With A=1.
            <br>So, <code>|A sin(ωt)| = (2A/π) - (4A/π) ∑<sub>n=1</sub><sup>∞</sup> [cos(n2ωt) / (4n<sup>2</sup>-1)]</code>.
        </li>
    </ol>
    <h4>🔹 Level 3 – Advanced:</h4>
    <ol start="4">
        <li>Calculate the average power of the square wave from Example 1 (amplitude A) using Parseval's theorem and also directly from (1/T)∫|f(t)|<sup>2</sup>dt.
            <br><strong>Directly</strong>: <code>(1/T)∫<sub>0</sub><sup>T</sup> f(t)<sup>2</sup> dt = (1/T) [∫<sub>0</sub><sup>T/2</sup> A<sup>2</sup> dt + ∫<sub>T/2</sub><sup>T</sup> (-A)<sup>2</sup> dt] = (1/T) [A<sup>2</sup>(T/2) + A<sup>2</sup>(T/2)] = A<sup>2</sup></code>.
            <br><strong>Parseval's Theorem</strong>: <code>P<sub>avg</sub> = a<sub>0</sub><sup>2</sup> + (1/2) ∑<sub>n=1</sub><sup>∞</sup> (a<sub>n</sub><sup>2</sup> + b<sub>n</sub><sup>2</sup>)</code>. Here a<sub>0</sub>=0, a<sub>n</sub>=0.
            <br><code>P<sub>avg</sub> = (1/2) ∑<sub>n=1,3,5,...</sub><sup>∞</sup> [(4A)/(nπ)]<sup>2</sup> = (1/2) * (16A<sup>2</sup>/π<sup>2</sup>) ∑<sub>n=1,3,5,...</sub><sup>∞</sup> (1/n<sup>2</sup>)</code>
            <br>Given that <code>∑<sub>k=0</sub><sup>∞</sup> (1/(2k+1)<sup>2</sup>) = π<sup>2</sup>/8</code> (sum for n odd),
            <br><code>P<sub>avg</sub> = (8A<sup>2</sup>/π<sup>2</sup>) * (π<sup>2</sup>/8) = A<sup>2</sup></code>. They match.
        </li>
    </ol>

    <hr style="margin: 20px 0; border-color: var(--border-color);">
    <h3>Interactive Demo: Building Waves with Fourier Series</h3>
    <p>See how adding sinusoidal harmonics can create more complex periodic waveforms. This demo focuses on synthesizing a rough square wave using its sine series components.</p>
    <div class="simulator-container" style="background-color: var(--primary-color); padding:15px; border-radius:5px;">
        <div class="controls" style="flex-basis: 100%; margin-bottom: 15px;">
            <label for="numHarmonics" style="margin-right:5px;">Harmonics (1,3,5... up to N):</label>
            <input type="number" id="numHarmonics" value="1" min="1" step="2" max="25" style="width:60px; margin-right:15px;">
            <label for="amplitudeFS" style="margin-right:5px;">Amplitude A:</label>
            <input type="number" id="amplitudeFS" value="1" min="0.1" step="0.1" max="10" style="width:60px; margin-right:15px;">
            <button id="fsSimulateBtn" style="margin-left:10px;">Update Wave</button>
        </div>
        <div class="results" id="fsResults" style="flex-basis: 100%; min-height:250px;">
            <div id="fourierEquationContainer" style="margin-bottom: 10px;">
                <p style="font-size:0.9em;">Equation (Square Wave Approximation): <br><span id="fourierEquationShort"></span><span id="fourierEquationFull" style="display:none;"></span>
                <button id="toggleEquationViewBtn" style="font-size:0.8em; padding: 3px 6px; margin-left:5px; vertical-align: middle;">View More</button></p>
            </div>
            <p><strong>Synthesized Waveform (Sum of Harmonics):</strong></p>
            <canvas id="fourierSeriesCanvas" width="350" height="180" style="background-color:#2c3e50; margin-top:5px; border:1px solid var(--highlight-color);"></canvas>
            
            <hr style="margin: 15px 0; border-color: var(--border-color);">
            <h4>Visualize Individual Harmonics (Selected from synthesis):</h4>
            <div id="harmonicCheckboxes" style="margin-bottom:10px; font-size:0.85em; max-height: 100px; overflow-y:auto; padding:5px; border: 1px solid var(--code-bg);">
                <!-- Checkboxes will be added here by JS -->
            </div>
            <canvas id="individualHarmonicsCanvas" width="350" height="120" style="background-color:#2c3e50; margin-top:5px; border: 1px solid var(--highlight-color);"></canvas>
        </div>
    </div>
    <!-- End of Interactive Demo for Chapter 17 -->

    <h3>🎯 Tips for Mastery:</h3>
    <ul>
        <li>Understand the conditions for existence of a Fourier series (Dirichlet conditions - generally met by practical signals).</li>
        <li>Master integral evaluation, especially integrals of products of sines/cosines, or f(t) with sines/cosines.</li>
        <li>Exploit symmetry properties (even, odd, half-wave) to simplify coefficient calculations significantly.</li>
        <li>The line spectrum (amplitude and phase vs. frequency) provides insight into the frequency content of a periodic signal.</li>
        <li>Fourier series is the foundation for the Fourier Transform, which extends these ideas to non-periodic signals.</li>
    </ul>
</section>
        </section>




        <section id="topic18">
            <h2>18: Fourier Transform</h2>
            <h3>📚 Overview:</h3>
<p>The <strong>Fourier Transform</strong> extends the concept of frequency domain representation from periodic signals (covered by Fourier Series) to <strong>non-periodic (aperiodic) signals</strong>. It decomposes an aperiodic time-domain signal into a continuous spectrum of frequencies, revealing the signal's frequency content. The Fourier Transform is a cornerstone of signal processing, communications, image processing, and many other fields in science and engineering. It allows us to analyze how LTI systems affect the frequency content of arbitrary input signals.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Definition of the Fourier Transform (Analysis Equation)</strong>:</h4>
<p>The Fourier Transform of a time-domain signal f(t) is F(jω) (or F(ω)):</p>
<p><code>F(jω) = ℱ{f(t)} = ∫<sub>-∞</sub><sup>∞</sup> f(t)e<sup>-jωt</sup> dt</code></p>
<p>Where:</p>
<ul>
    <li><code>f(t)</code> is the time-domain signal.</li>
    <li><code>F(jω)</code> is the frequency-domain representation (spectrum) of f(t). It is generally a complex function, indicating both amplitude and phase for each frequency component.</li>
    <li><code>ω</code> is the angular frequency (rad/s).</li>
</ul>

<h4>2. <strong>Definition of the Inverse Fourier Transform (Synthesis Equation)</strong>:</h4>
<p>The Inverse Fourier Transform reconstructs the time-domain signal f(t) from its spectrum F(jω):</p>
<p><code>f(t) = ℱ<sup>-1</sup>{F(jω)} = (1/(2π)) ∫<sub>-∞</sub><sup>∞</sup> F(jω)e<sup>jωt</sup> dω</code></p>
<p>The pair f(t) ↔ F(jω) is known as a Fourier Transform pair.</p>

<h4>3. <strong>Relationship to Fourier Series</strong>:</h4>
<p>The Fourier Transform can be seen as the limit of the Fourier Series as the period T → ∞. The discrete line spectrum of a periodic signal becomes a continuous spectrum for an aperiodic signal.</p>

<h4>4. <strong>Important Fourier Transform Pairs</strong>:</h4>
<table class="styled-table" style="width:100%; border-collapse: collapse; margin-bottom:15px;">
    <thead>
        <tr>
            <th style="border: 1px solid var(--border-color); padding: 8px; background-color: var(--primary-color);">Time Domain f(t)</th>
            <th style="border: 1px solid var(--border-color); padding: 8px; background-color: var(--primary-color);">Frequency Domain F(jω)</th>
        </tr>
    </thead>
    <tbody>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">δ(t) (Unit impulse)</td><td style="border: 1px solid var(--border-color); padding: 8px;">1</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">1 (DC signal)</td><td style="border: 1px solid var(--border-color); padding: 8px;">2πδ(ω)</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">u(t) (Unit step)</td><td style="border: 1px solid var(--border-color); padding: 8px;">πδ(ω) + 1/(jω)</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">e<sup>-at</sup>u(t), (a > 0)</td><td style="border: 1px solid var(--border-color); padding: 8px;">1 / (a + jω)</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">e<sup>jω<sub>0</sub>t</sup></td><td style="border: 1px solid var(--border-color); padding: 8px;">2πδ(ω - ω<sub>0</sub>)</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">cos(ω<sub>0</sub>t)</td><td style="border: 1px solid var(--border-color); padding: 8px;">π[δ(ω - ω<sub>0</sub>) + δ(ω + ω<sub>0</sub>)]</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">sin(ω<sub>0</sub>t)</td><td style="border: 1px solid var(--border-color); padding: 8px;">jπ[δ(ω + ω<sub>0</sub>) - δ(ω - ω<sub>0</sub>)]</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">Rectangular pulse: rect(t/T) = 1 for |t| < T/2, 0 otherwise</td><td style="border: 1px solid var(--border-color); padding: 8px;">T sinc(ωT/(2π)) = T sin(ωT/2) / (ωT/2)</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">Triangular pulse: tri(t/T) (height 1, base 2T from -T to T)</td><td style="border: 1px solid var(--border-color); padding: 8px;">T sinc<sup>2</sup>(ωT/(2π))</td></tr>
        <tr><td style="border: 1px solid var(--border-color); padding: 8px;">sgn(t) (Signum function)</td><td style="border: 1px solid var(--border-color); padding: 8px;">2/(jω)</td></tr>
    </tbody>
</table>
<style> .styled-table th, .styled-table td { text-align: left; } </style>


<h4>5. <strong>Properties of the Fourier Transform</strong>:</h4>
<ul>
    <li><strong>Linearity</strong>: <code>ℱ{af<sub>1</sub>(t) + bf<sub>2</sub>(t)} = aF<sub>1</sub>(jω) + bF<sub>2</sub>(jω)</code></li>
    <li><strong>Time Shifting</strong>: <code>ℱ{f(t-t<sub>0</sub>)} = e<sup>-jωt<sub>0</sub></sup>F(jω)</code></li>
    <li><strong>Frequency Shifting (Modulation)</strong>: <code>ℱ{e<sup>jω<sub>0</sub>t</sup>f(t)} = F(j(ω - ω<sub>0</sub>))</code></li>
    <li><strong>Time Scaling</strong>: <code>ℱ{f(at)} = (1/|a|)F(jω/a)</code></li>
    <li><strong>Duality (Symmetry)</strong>: If <code>f(t) ↔ F(jω)</code>, then <code>F(jt) ↔ 2πf(-ω)</code></li>
    <li><strong>Time Differentiation</strong>: <code>ℱ{df(t)/dt} = jωF(jω)</code></li>
    <li><strong>Frequency Differentiation</strong>: <code>ℱ{-jtf(t)} = dF(jω)/dω</code></li>
    <li><strong>Time Integration</strong>: <code>ℱ{∫<sub>-∞</sub><sup>t</sup> f(τ)dτ} = F(jω)/(jω) + πF(0)δ(ω)</code> (F(0) is DC component of f(t)'s spectrum).</li>
    <li><strong>Convolution in Time Domain</strong>: <code>ℱ{f<sub>1</sub>(t) * f<sub>2</sub>(t)} = F<sub>1</sub>(jω)F<sub>2</sub>(jω)</code>
        <br> (<code>*</code> denotes convolution: <code>∫<sub>-∞</sub><sup>∞</sup> f<sub>1</sub>(τ)f<sub>2</sub>(t-τ)dτ</code>)</li>
    <li><strong>Multiplication in Time Domain</strong>: <code>ℱ{f<sub>1</sub>(t)f<sub>2</sub>(t)} = (1/(2π)) [F<sub>1</sub>(jω) * F<sub>2</sub>(jω)]</code> (convolution in frequency domain)</li>
</ul>

<h4>6. <strong>Parseval's Theorem for Energy Signals</strong>:</h4>
<p>The total energy E of an energy signal f(t) can be calculated in either domain:</p>
<p><code>E = ∫<sub>-∞</sub><sup>∞</sup> |f(t)|<sup>2</sup> dt = (1/(2π)) ∫<sub>-∞</sub><sup>∞</sup> |F(jω)|<sup>2</sup> dω</code></p>
<p><code>|F(jω)|<sup>2</sup></code> is called the <strong>Energy Spectral Density (ESD)</strong> of the signal.</p>

<h4>7. <strong>System Analysis using Fourier Transform</strong>:</h4>
<p>For a Linear Time-Invariant (LTI) system with impulse response h(t) and frequency response H(jω) = ℱ{h(t)}:</p>
<p>If the input is x(t) with Fourier Transform X(jω), the output y(t) with Fourier Transform Y(jω) is given by:</p>
<p><code>Y(jω) = H(jω)X(jω)</code></p>
<p>The time-domain output is <code>y(t) = ℱ<sup>-1</sup>{H(jω)X(jω)} = h(t) * x(t)</code>.</p>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Fourier Transform of a Rectangular Pulse</h4>
<p><strong>Problem</strong>: Find the Fourier Transform of <code>f(t) = rect(t/T)</code>, which is 1 for -T/2 < t < T/2, and 0 otherwise.</p>
<p><strong>Solution</strong>:
    <br><code>F(jω) = ∫<sub>-T/2</sub><sup>T/2</sup> (1)e<sup>-jωt</sup> dt = [e<sup>-jωt</sup>/(-jω)]<sub>-T/2</sub><sup>T/2</sup></code>
    <br><code>= (e<sup>-jωT/2</sup> - e<sup>jωT/2</sup>) / (-jω) = (2j sin(ωT/2)) / (jω)</code> (using Euler for sine)
    <br><code>= (2 sin(ωT/2)) / ω = T * [sin(ωT/2) / (ωT/2)] = T sinc(ωT/(2π))</code> (if sinc(x)=sin(πx)/(πx))
    <br>Or using sinc(x)=sin(x)/x definition: <code>F(jω) = T sinc(ωT/2)</code>.
</p>

<h4>🔸 Example 2: Using Frequency Shifting Property</h4>
<p><strong>Problem</strong>: Given ℱ{rect(t/T)} = T sinc(ωT/2π), find ℱ{rect(t/T)cos(ω<sub>0</sub>t)}.</p>
<p><strong>Solution</strong>:
    <br>cos(ω<sub>0</sub>t) = (1/2)(e<sup>jω<sub>0</sub>t</sup> + e<sup>-jω<sub>0</sub>t</sup>).
    <br>Using linearity and frequency shifting:
    <br><code>ℱ{rect(t/T)e<sup>jω<sub>0</sub>t</sup>} = T sinc((ω-ω<sub>0</sub>)T/2π)</code>
    <br><code>ℱ{rect(t/T)e<sup>-jω<sub>0</sub>t</sup>} = T sinc((ω+ω<sub>0</sub>)T/2π)</code>
    <br><code>Result = (T/2) [sinc((ω-ω<sub>0</sub>)T/2π) + sinc((ω+ω<sub>0</sub>)T/2π)]</code>.
</p>

<h3>📝 Practice Problems:</h3>
<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Find the Fourier Transform of <code>f(t) = δ(t - t<sub>0</sub>)</code>.
        <br><strong>Answer</strong>: Using time-shifting property on ℱ{δ(t)}=1 ⇒ <code>e<sup>-jωt<sub>0</sub></sup></code>.
    </li>
    <li>If <code>F(jω) = 1/(2+jω)</code>, what property can you use to find the Fourier transform of <code>e<sup>j3t</sup>f(t)</code>?
        <br><strong>Answer</strong>: Frequency shifting. Result: <code>1/(2+j(ω-3))</code>.
    </li>
</ol>
<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>Find the Fourier Transform of <code>f(t) = e<sup>-2|t|</sup></code>.
        <br><strong>Hint</strong>: Split into e<sup>2t</sup>u(-t) + e<sup>-2t</sup>u(t). Use transform of e<sup>-at</sup>u(t) and time reversal property: ℱ{f(-t)} = F(-jω).
        <br>ℱ{e<sup>-2t</sup>u(t)} = 1/(2+jω). ℱ{e<sup>2t</sup>u(-t)} = 1/(2-jω).
        <br>Result: <code>1/(2+jω) + 1/(2-jω) = (2-jω + 2+jω) / (4+ω<sup>2</sup>) = 4/(4+ω<sup>2</sup>)</code>.
    </li>
</ol>
<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>An LTI system has an impulse response <code>h(t) = e<sup>-t</sup>u(t)</code>. If the input is <code>x(t) = e<sup>-2t</sup>u(t)</code>, find the output Y(jω) and then y(t).
        <br><strong>Hint</strong>: H(jω) = 1/(1+jω), X(jω) = 1/(2+jω).
        <br>Y(jω) = H(jω)X(jω) = 1/((1+jω)(2+jω)).
        <br>Use PFE: <code>1/((1+x)(2+x)) = A/(1+x) + B/(2+x)</code> where x=jω. A=1, B=-1.
        <br>Y(jω) = 1/(1+jω) - 1/(2+jω).
        <br><code>y(t) = (e<sup>-t</sup> - e<sup>-2t</sup>)u(t)</code>.
    </li>
</ol>

<hr style="margin: 20px 0; border-color: var(--border-color);">
<h3>Interactive Demo: Fourier Transform of a Rectangular Pulse</h3>
<p>Visualize how the width of a rectangular pulse in the time domain affects its frequency spectrum (magnitude of Fourier Transform).</p>
<div class="simulator-container" style="background-color: var(--primary-color); padding:15px; border-radius:5px;">
    <div class="controls" style="flex-basis: 100%; margin-bottom: 15px;">
        <label for="pulseWidthT">Pulse Width T (e.g., from -T/2 to T/2):</label>
        <input type="number" id="pulseWidthT" value="2" min="0.1" step="0.1" max="10" style="width:80px;">
        <button id="ftRectSimulateBtn" style="margin-left:10px;">Update Spectrum</button>
    </div>
    <div class="results" id="ftRectResults" style="flex-basis: 100%; display:flex; flex-wrap:wrap; gap:10px;">
        <div style="flex:1; min-width:300px;">
             <p><strong>Time Domain: Rectangular Pulse f(t)</strong></p>
             <canvas id="timeDomainPulseCanvas" width="300" height="150" style="background-color:#2c3e50; border:1px solid var(--highlight-color);"></canvas>
        </div>
        <div style="flex:1; min-width:300px;">
            <p><strong>Frequency Domain: Magnitude Spectrum |F(jω)| (sinc function)</strong></p>
            <canvas id="freqDomainSpectrumCanvas" width="300" height="150" style="background-color:#2c3e50; border:1px solid var(--highlight-color);"></canvas>
        </div>
    </div>
</div>
<!-- End of Interactive Demo for Chapter 18 -->

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Understand the duality between time and frequency: a narrow pulse in time has a wide spectrum, and a wide pulse in time has a narrow spectrum.</li>
    <li>Memorize key transform pairs, especially for impulse, step, exponential, rect, and sinc functions.</li>
    <li>Master the properties of the Fourier Transform, as they often allow finding new transforms from known ones without direct integration.</li>
    <li>Convolution in one domain corresponds to multiplication in the other domain – this is fundamental to LTI system analysis.</li>
    <li>The spectrum F(jω) is complex: <code>|F(jω)|</code> is the magnitude spectrum, and <code>∠F(jω)</code> is the phase spectrum.</li>
</ul>
</section>
        </section>




        <section id="topic19">
            <h2>19: Two-Port Networks</h2>
            <h3>📚 Overview:</h3>
<p>A <strong>two-port network</strong> (or quadripole) is an electrical network or device with two pairs of terminals: one pair for input (Port 1) and one pair for output (Port 2). This abstraction is extremely useful for characterizing and analyzing complex linear circuits and systems, such as amplifiers, filters, transmission lines, and even transistors at a higher level. By describing the relationship between the voltage and current at each port, we can analyze how these networks process signals and how they behave when interconnected, without needing to know the detailed internal circuitry.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Definition and Port Variables</strong>:</h4>
<p>A two-port network is typically represented as a "black box" with four terminals grouped into two ports.</p>
<ul>
    <li><strong>Port 1 (Input Port)</strong>: Voltage <strong>V<sub>1</sub></strong> and current <strong>I<sub>1</sub></strong>. Current <strong>I<sub>1</sub></strong> is usually defined as entering the network at the positive terminal of <strong>V<sub>1</sub></strong>.</li>
    <li><strong>Port 2 (Output Port)</strong>: Voltage <strong>V<sub>2</sub></strong> and current <strong>I<sub>2</sub></strong>. Current <strong>I<sub>2</sub></strong> is usually defined as entering the network at the positive terminal of <strong>V<sub>2</sub></strong> (though for output, sometimes it's defined as leaving, which changes signs in some parameter sets like ABCD). For consistency here, we'll assume I2 enters port 2.</li>
</ul>
<p>The network itself is assumed to be linear and contain no independent sources (dependent sources are allowed).</p>
<div style="text-align:center; margin:10px;">
    <svg width="200" height="120" viewBox="0 0 200 120" xmlns="http://www.w3.org/2000/svg" style="background-color:var(--bg-color); border:1px solid var(--border-color);">
        <rect x="50" y="30" width="100" height="60" stroke="var(--text-color)" stroke-width="2" fill="var(--secondary-color)"/>
        <text x="90" y="65" fill="var(--text-color)" font-size="12">Two-Port</text>
        <text x="90" y="80" fill="var(--text-color)" font-size="12">Network</text>
        <!-- Port 1 -->
        <line x1="20" y1="45" x2="50" y2="45" stroke="var(--text-color)" stroke-width="1.5"/>
        <line x1="20" y1="75" x2="50" y2="75" stroke="var(--text-color)" stroke-width="1.5"/>
        <text x="25" y="35" fill="var(--text-color)" font-size="12">V₁</text>
        <text x="10" y="48" fill="var(--text-color)" font-size="12">→</text>
        <text x="0" y="48" fill="var(--text-color)" font-size="12">I₁</text>
        <circle cx="20" cy="45" r="2" fill="var(--text-color)"/><text x="16" y="40" fill="var(--text-color)" font-size="10">+</text>
        <circle cx="20" cy="75" r="2" fill="var(--text-color)"/><text x="16" y="82" fill="var(--text-color)" font-size="10">-</text>
        <!-- Port 2 -->
        <line x1="150" y1="45" x2="180" y2="45" stroke="var(--text-color)" stroke-width="1.5"/>
        <line x1="150" y1="75" x2="180" y2="75" stroke="var(--text-color)" stroke-width="1.5"/>
        <text x="165" y="35" fill="var(--text-color)" font-size="12">V₂</text>
        <text x="183" y="48" fill="var(--text-color)" font-size="12">→</text> <!-- Assuming I2 enters -->
        <text x="188" y="48" fill="var(--text-color)" font-size="12">I₂</text>
        <circle cx="180" cy="45" r="2" fill="var(--text-color)"/><text x="184" y="40" fill="var(--text-color)" font-size="10">+</text>
        <circle cx="180" cy="75" r="2" fill="var(--text-color)"/><text x="184" y="82" fill="var(--text-color)" font-size="10">-</text>
    </svg>
</div>


<h4>2. <strong>Parameter Sets</strong>:</h4>
<p>Various sets of parameters relate the four port variables (V<sub>1</sub>, I<sub>1</sub>, V<sub>2</sub>, I<sub>2</sub>). The choice of parameters depends on which variables are considered independent and which are dependent, and on the application (e.g., ABCD for cascaded networks).</p>

<h5>a. <strong>Impedance Parameters (Z-parameters)</strong>: [V] = [Z][I]</h5>
<p><code>V<sub>1</sub> = Z<sub>11</sub>I<sub>1</sub> + Z<sub>12</sub>I<sub>2</sub></code></p>
<p><code>V<sub>2</sub> = Z<sub>21</sub>I<sub>1</sub> + Z<sub>22</sub>I<sub>2</sub></code></p>
<p>Parameters are found by open-circuiting one port:</p>
<ul>
    <li><code>Z<sub>11</sub> = V<sub>1</sub>/I<sub>1</sub> |<sub>I<sub>2</sub>=0</sub></code> (Input impedance with port 2 open)</li>
    <li><code>Z<sub>12</sub> = V<sub>1</sub>/I<sub>2</sub> |<sub>I<sub>1</sub>=0</sub></code> (Reverse transfer impedance with port 1 open)</li>
    <li><code>Z<sub>21</sub> = V<sub>2</sub>/I<sub>1</sub> |<sub>I<sub>2</sub>=0</sub></code> (Forward transfer impedance with port 2 open)</li>
    <li><code>Z<sub>22</sub> = V<sub>2</sub>/I<sub>2</sub> |<sub>I<sub>1</sub>=0</sub></code> (Output impedance with port 1 open)</li>
</ul>

<h5>b. <strong>Admittance Parameters (Y-parameters)</strong>: [I] = [Y][V]</h5>
<p><code>I<sub>1</sub> = Y<sub>11</sub>V<sub>1</sub> + Y<sub>12</sub>V<sub>2</sub></code></p>
<p><code>I<sub>2</sub> = Y<sub>21</sub>V<sub>1</sub> + Y<sub>22</sub>V<sub>2</sub></code></p>
<p>Parameters are found by short-circuiting one port:</p>
<ul>
    <li><code>Y<sub>11</sub> = I<sub>1</sub>/V<sub>1</sub> |<sub>V<sub>2</sub>=0</sub></code> (Input admittance with port 2 shorted)</li>
    <li><code>Y<sub>12</sub> = I<sub>1</sub>/V<sub>2</sub> |<sub>V<sub>1</sub>=0</sub></code> (Reverse transfer admittance with port 1 shorted)</li>
    <li><code>Y<sub>21</sub> = I<sub>2</sub>/V<sub>1</sub> |<sub>V<sub>2</sub>=0</sub></code> (Forward transfer admittance with port 2 shorted)</li>
    <li><code>Y<sub>22</sub> = I<sub>2</sub>/V<sub>2</sub> |<sub>V<sub>1</sub>=0</sub></code> (Output admittance with port 1 shorted)</li>
</ul>
<p>Note: <code>[Y] = [Z]<sup>-1</sup></code> if [Z] is invertible.</p>

<h5>c. <strong>Hybrid Parameters (h-parameters)</strong>: V<sub>1</sub>, I<sub>2</sub> are dependent</h5>
<p><code>V<sub>1</sub> = h<sub>11</sub>I<sub>1</sub> + h<sub>12</sub>V<sub>2</sub></code></p>
<p><code>I<sub>2</sub> = h<sub>21</sub>I<sub>1</sub> + h<sub>22</sub>V<sub>2</sub></code></p>
<p>Commonly used for transistor modeling.</p>
<ul>
    <li><code>h<sub>11</sub> = V<sub>1</sub>/I<sub>1</sub> |<sub>V<sub>2</sub>=0</sub></code> (Input impedance with port 2 shorted)</li>
    <li><code>h<sub>12</sub> = V<sub>1</sub>/V<sub>2</sub> |<sub>I<sub>1</sub>=0</sub></code> (Reverse voltage gain with port 1 open)</li>
    <li><code>h<sub>21</sub> = I<sub>2</sub>/I<sub>1</sub> |<sub>V<sub>2</sub>=0</sub></code> (Forward current gain with port 2 shorted)</li>
    <li><code>h<sub>22</sub> = I<sub>2</sub>/V<sub>2</sub> |<sub>I<sub>1</sub>=0</sub></code> (Output admittance with port 1 open)</li>
</ul>

<h5>d. <strong>Transmission Parameters (ABCD or T-parameters)</strong>: V<sub>1</sub>, I<sub>1</sub> are dependent on V<sub>2</sub>, -I<sub>2</sub></h5>
<p><code>V<sub>1</sub> = AV<sub>2</sub> - BI<sub>2</sub></code></p>
<p><code>I<sub>1</sub> = CV<sub>2</sub> - DI<sub>2</sub></code> (Note: <code>-I<sub>2</sub></code> is used because I<sub>2</sub> is usually defined as leaving port 2 when cascading).</p>
<p>Useful for cascaded networks. If I<sub>2</sub> is defined as entering (as in our diagram), then:</p>
<p><code>V<sub>1</sub> = A'V<sub>2</sub> + B'I<sub>2</sub></code></p>
<p><code>I<sub>1</sub> = C'V<sub>2</sub> + D'I<sub>2</sub></code>
    <br>Let's stick to the common definition: <code>V<sub>1</sub> = AV<sub>2</sub> - BI<sub>2</sub></code>; <code>I<sub>1</sub> = CV<sub>2</sub> - DI<sub>2</sub></code>. This assumes I<sub>2</sub> flows out of port 2.
    <br>If I<sub>2</sub> flows in (as in Z, Y, h parameters):
    <br><code>V<sub>1</sub> = AV<sub>2</sub> + B(-I<sub>2</sub>)</code> becomes <code>V<sub>1</sub> = AV<sub>2</sub> + B'I<sub>2</sub></code> where B' = -B.
    <br><code>I<sub>1</sub> = CV<sub>2</sub> + D(-I<sub>2</sub>)</code> becomes <code>I<sub>1</sub> = CV<sub>2</sub> + D'I<sub>2</sub></code> where D' = -D.
    <br>It's critical to be consistent with I<sub>2</sub> direction. For this guide, we've shown I2 entering. Thus for ABCD:
    <br><code>V<sub>1</sub> = A V<sub>2</sub> + B I<sub>2</sub></code>
    <br><code>I<sub>1</sub> = C V<sub>2</sub> + D I<sub>2</sub></code> is how we will define ABCD matrix components.
    <br>(A user must check the definition used in their specific textbook/context carefully!)
</p>

<h4>3. <strong>Reciprocity and Symmetry</strong>:</h4>
<ul>
    <li><strong>Reciprocal Network</strong>: If exciting port 1 and measuring at port 2 gives the same transfer ratio as exciting port 2 and measuring at port 1.
        <ul>
            <li>In Z-parameters: <code>Z<sub>12</sub> = Z<sub>21</sub></code></li>
            <li>In Y-parameters: <code>Y<sub>12</sub> = Y<sub>21</sub></code></li>
            <li>In h-parameters: <code>h<sub>12</sub> = -h<sub>21</sub></code></li>
            <li>In ABCD-parameters (using <code>V1=AV2-BI2, I1=CV2-DI2</code>): <code>AD - BC = 1</code></li>
        </ul>
    </li>
    <li><strong>Symmetrical Network</strong>: If the network looks the same from both ports.
        <ul>
            <li>In Z-parameters: <code>Z<sub>11</sub> = Z<sub>22</sub></code></li>
            <li>In Y-parameters: <code>Y<sub>11</sub> = Y<sub>22</sub></code></li>
            <li>In h-parameters: <code>h<sub>11</sub>h<sub>22</sub> - h<sub>12</sub>h<sub>21</sub> = 1</code> (determinant of h-matrix = 1)</li>
            <li>In ABCD-parameters: <code>A = D</code></li>
        </ul>
    </li>
</ul>

<h4>4. <strong>Interconnection of Two-Port Networks</strong>:</h4>
<ul>
    <li><strong>Series Connection</strong>: Equivalent Z-matrix is <code>[Z]<sub>eq</sub> = [Z]<sub>A</sub> + [Z]<sub>B</sub></code>.</li>
    <li><strong>Parallel Connection</strong>: Equivalent Y-matrix is <code>[Y]<sub>eq</sub> = [Y]<sub>A</sub> + [Y]<sub>B</sub></code>.</li>
    <li><strong>Cascade Connection</strong> (Output of A to Input of B): Equivalent ABCD-matrix (T-matrix) is <code>[T]<sub>eq</sub> = [T]<sub>A</sub>[T]<sub>B</sub></code>. (Using T-parameters that relate input to output V<sub>2</sub>, -I<sub>2</sub>).</li>
</ul>
<p>Conversion tables exist to convert between parameter sets.</p>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Finding Z-parameters for a T-network</h4>
<p><strong>Problem</strong>: A T-network has series arms Z<sub>a</sub>, Z<sub>b</sub> and shunt arm Z<sub>c</sub>. (Z<sub>a</sub> on port 1 side, Z<sub>b</sub> on port 2 side, Z<sub>c</sub> connects the junction of Z<sub>a</sub>,Z<sub>b</sub> to common reference).</p>
<div style="text-align:center; margin:10px;">
 <svg width="200" height="100" viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg" style="background-color:var(--bg-color); border:1px solid var(--border-color);">
    <line x1="20" y1="30" x2="50" y2="30" stroke="var(--text-color)" stroke-width="1.5"/> <rect x="50" y="25" width="30" height="10" fill="none" stroke="var(--text-color)"/><text x="60" y="20" fill="var(--text-color)" font-size="10">Za</text> <line x1="80" y1="30" x2="100" y2="30" stroke="var(--text-color)" stroke-width="1.5"/>
    <line x1="100" y1="30" x2="130" y2="30" stroke="var(--text-color)" stroke-width="1.5"/> <rect x="130" y="25" width="30" height="10" fill="none" stroke="var(--text-color)"/><text x="140" y="20" fill="var(--text-color)" font-size="10">Zb</text> <line x1="160" y1="30" x2="190" y2="30" stroke="var(--text-color)" stroke-width="1.5"/>
    <line x1="100" y1="30" x2="100" y2="60" stroke="var(--text-color)" stroke-width="1.5"/> <rect x="95" y="60" width="10" height="30" fill="none" stroke="var(--text-color)"/><text x="108" y="75" fill="var(--text-color)" font-size="10">Zc</text>
    <line x1="20" y1="90" x2="190" y2="90" stroke="var(--text-color)" stroke-width="1.5"/> <!-- Common Ground -->
    <line x1="100" y1="90" x2="100" y2="90" stroke="var(--text-color)" stroke-width="1.5"/> <!-- Connect Zc to ground -->
    <text x="5" y="33" font-size="10" fill="var(--text-color)">P1</text><text x="193" y="33" font-size="10" fill="var(--text-color)">P2</text>
 </svg>
</div>
<p><strong>Solution</strong>:
    <br>Z<sub>11</sub> = V<sub>1</sub>/I<sub>1</sub> |<sub>I<sub>2</sub>=0</sub> = Z<sub>a</sub> + Z<sub>c</sub>
    <br>Z<sub>21</sub> = V<sub>2</sub>/I<sub>1</sub> |<sub>I<sub>2</sub>=0</sub> = Z<sub>c</sub> (Voltage across Zc is V2 when I2=0, I1 flows through Zc)
    <br>Z<sub>22</sub> = V<sub>2</sub>/I<sub>2</sub> |<sub>I<sub>1</sub>=0</sub> = Z<sub>b</sub> + Z<sub>c</sub>
    <br>Z<sub>12</sub> = V<sub>1</sub>/I<sub>2</sub> |<sub>I<sub>1</sub>=0</sub> = Z<sub>c</sub> (By reciprocity if passive)
    <br>So, <code>[Z] = [[Z<sub>a</sub>+Z<sub>c</sub>, Z<sub>c</sub>], [Z<sub>c</sub>, Z<sub>b</sub>+Z<sub>c</sub>]]</code>
</p>

<h3>📝 Practice Problems:</h3>
<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>A two-port network has Z<sub>11</sub>=10Ω, Z<sub>12</sub>=2Ω, Z<sub>21</sub>=2Ω, Z<sub>22</sub>=5Ω. Is it reciprocal? Is it symmetrical?
        <br><strong>Answer</strong>: Reciprocal because Z<sub>12</sub>=Z<sub>21</sub> (2=2). Not symmetrical because Z<sub>11</sub> ≠ Z<sub>22</sub> (10 ≠ 5).
    </li>
</ol>
<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="2">
    <li>Given Y-parameters: Y<sub>11</sub>=0.5S, Y<sub>12</sub>=-0.1S, Y<sub>21</sub>=2S, Y<sub>22</sub>=0.2S. Find the Z-parameters by matrix inversion ([Z] = [Y]<sup>-1</sup>).
        <br><strong>Hint</strong>: Δ<sub>Y</sub> = Y<sub>11</sub>Y<sub>22</sub> - Y<sub>12</sub>Y<sub>21</sub>. Then Z<sub>11</sub> = Y<sub>22</sub>/Δ<sub>Y</sub>, Z<sub>12</sub> = -Y<sub>12</sub>/Δ<sub>Y</sub>, etc.
    </li>
    <li>Find the h-parameters for a simple series impedance Z as a two-port network (element Z connected from input top terminal to output top terminal, bottom terminals commoned).
    </li>
</ol>
<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>Two identical T-networks from Example 1 (with Z<sub>a</sub>=10, Z<sub>b</sub>=10, Z<sub>c</sub>=20 Ohms) are cascaded. Find the overall ABCD parameters of the cascaded network. (First find ABCD for one T-network, then multiply [T][T]).
    </li>
</ol>

<hr style="margin: 20px 0; border-color: var(--border-color);">
<h3>Interactive Demo: Simple Two-Port Network (Voltage Divider)</h3>
<p>Analyze a simple voltage divider as a two-port network. Calculate Z-parameters based on R1 and R2.
Input V1 and see V2 (when port 2 is open, I2=0) and input current I1.</p>
<div class="simulator-container" style="background-color: var(--primary-color); padding:15px; border-radius:5px;">
    <div class="controls" style="flex-basis: 100%; margin-bottom: 15px;">
        <label for="tpR1">R1 (Ω):</label> <input type="number" id="tpR1" value="100" min="1" style="width:80px; margin-right:10px;">
        <label for="tpR2">R2 (Ω):</label> <input type="number" id="tpR2" value="100" min="1" style="width:80px; margin-right:10px;">
        <label for="tpV1">Input V1 (V):</label> <input type="number" id="tpV1" value="10" min="0" style="width:80px;">
        <button id="tpSimulateBtn" style="margin-left:10px;">Calculate</button>
    </div>
    <div class="results" id="tpResults" style="flex-basis: 100%; background-color:var(--code-bg); padding:10px; border-radius:4px;">
        <p><strong>Voltage Divider (Output across R2, I2=0):</strong></p>
        <pre><code>
  V1(+) o----[ R1 ]----o----o V2(+)
          |             |
          I1->          R2 I2 (set to 0 for Z11, Z21)
          |             |
  V1(-) o--------------o----o V2(-) 
        </code></pre>
        <p>Z<sub>11</sub> (V1/I1 | I2=0): <span id="tpZ11">N/A</span> Ω</p>
        <p>Z<sub>21</sub> (V2/I1 | I2=0): <span id="tpZ21">N/A</span> Ω</p>
        <p>If I2=0 (Open Port 2):</p>
        <p>   Calculated I1: <span id="tpI1_calc">N/A</span> A</p>
        <p>   Calculated V2: <span id="tpV2_calc">N/A</span> V (Open Circuit V2)</p>
        <p><em>(Note: Z12 and Z22 require different test conditions not simulated here interactively)</em></p>
    </div>
</div>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Clearly understand the definitions of each parameter set and the conditions under which they are measured (open-circuit or short-circuit at ports).</li>
    <li>Be consistent with the assumed directions of port currents (especially for I<sub>2</sub> when using ABCD parameters).</li>
    <li>For passive reciprocal networks, Z<sub>12</sub> = Z<sub>21</sub> and Y<sub>12</sub> = Y<sub>21</sub>. For symmetrical passive networks, Z<sub>11</sub> = Z<sub>22</sub> and Y<sub>11</sub> = Y<sub>22</sub>.</li>
    <li>Practice converting between parameter sets using the standard conversion formulas or matrix algebra.</li>
    <li>ABCD (Transmission) parameters are particularly useful for analyzing cascaded systems because the overall [T] matrix is the product of individual [T] matrices.</li>
</ul>
</section>
        </section>





        <section id="appendixA">
            <h2>A: Simultaneous Equations and Matrix Inversion</h2>
            <h3>📚 Overview:</h3>
<p>The analysis of many electrical circuits, particularly using nodal or mesh analysis, often results in a system of simultaneous linear equations. This appendix reviews common methods for solving such systems, with a focus on matrix methods like <strong>Gaussian elimination, Cramer's rule</strong>, and <strong>matrix inversion</strong>. These techniques are fundamental for solving circuits with multiple unknown voltages or currents and form the basis of how computer-aided circuit simulation software works.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>System of Simultaneous Linear Equations</strong>:</h4>
<p>A system of 'n' linear equations with 'n' unknowns (x<sub>1</sub>, x<sub>2</sub>, ..., x<sub>n</sub>) can be written as:</p>
<pre><code>
a<sub>11</sub>x<sub>1</sub> + a<sub>12</sub>x<sub>2</sub> + ... + a<sub>1n</sub>x<sub>n</sub> = b<sub>1</sub>
a<sub>21</sub>x<sub>1</sub> + a<sub>22</sub>x<sub>2</sub> + ... + a<sub>2n</sub>x<sub>n</sub> = b<sub>2</sub>
...
a<sub>n1</sub>x<sub>1</sub> + a<sub>n2</sub>x<sub>2</sub> + ... + a<sub>nn</sub>x<sub>n</sub> = b<sub>n</sub>
</code></pre>
<p>In matrix form, this is represented as <code>[A][X] = [B]</code>, where:</p>
<ul>
    <li><code>[A]</code> is the n × n matrix of coefficients (a<sub>ij</sub>).</li>
    <li><code>[X]</code> is the n × 1 column vector of unknowns (x<sub>i</sub>).</li>
    <li><code>[B]</code> is the n × 1 column vector of constants (b<sub>i</sub>).</li>
</ul>
<p>Example (2x2 system):
<br><code>a<sub>11</sub>x<sub>1</sub> + a<sub>12</sub>x<sub>2</sub> = b<sub>1</sub></code>
<br><code>a<sub>21</sub>x<sub>1</sub> + a<sub>22</sub>x<sub>2</sub> = b<sub>2</sub></code>
<br>⇒ <code>[[a<sub>11</sub>, a<sub>12</sub>], [a<sub>21</sub>, a<sub>22</sub>]] * [[x<sub>1</sub>], [x<sub>2</sub>]] = [[b<sub>1</sub>], [b<sub>2</sub>]]</code></p>

<h4>2. <strong>Methods of Solution</strong>:</h4>

<h5>a. <strong>Substitution and Elimination (Algebraic)</strong>:</h5>
<p>For small systems (n=2 or 3), one can solve for one variable in terms of others from one equation and substitute it into the other equations. This process is repeated until one variable is found, then back-substitute to find the others. Elimination involves adding/subtracting multiples of equations to eliminate variables.</p>

<h5>b. <strong>Gaussian Elimination</strong>:</h5>
<p>A systematic procedure to transform the augmented matrix <code>[A|B]</code> into an upper triangular form (or row echelon form) using elementary row operations:</p>
<ol>
    <li>Swapping two rows.</li>
    <li>Multiplying a row by a non-zero scalar.</li>
    <li>Adding a multiple of one row to another row.</li>
</ol>
<p>Once in upper triangular form, the solution can be found by back-substitution starting from the last equation.</p>
<p><strong>Gauss-Jordan Elimination</strong> further reduces the matrix to reduced row echelon form (identity matrix for [A] part if A is invertible), directly giving the solution.</p>

<h5>c. <strong>Matrix Inversion Method</strong>:</h5>
<p>If the coefficient matrix [A] is square and non-singular (i.e., its determinant det(A) ≠ 0), then its inverse [A]<sup>-1</sup> exists.</p>
<p>The solution vector [X] can be found by: <code>[X] = [A]<sup>-1</sup>[B]</code>.</p>
<p><strong>Inverse of a 2×2 Matrix</strong>:
    <br>If <code>[A] = [[a, b], [c, d]]</code>, then <code>det(A) = ad - bc</code>.
    <br>If <code>det(A) ≠ 0</code>, then <code>[A]<sup>-1</sup> = (1/det(A)) * [[d, -b], [-c, a]]</code>.</p>
<p>For larger matrices, finding the inverse is more complex, often done using methods like Gauss-Jordan elimination on <code>[A|I]</code> to get <code>[I|A<sup>-1</sup>]</code>, or by using the adjugate matrix method: <code>[A]<sup>-1</sup> = (1/det(A)) * adj(A)</code>, where adj(A) is the transpose of the cofactor matrix of A.</p>

<h5>d. <strong>Cramer's Rule</strong>:</h5>
<p>If det(A) ≠ 0, each unknown x<sub>i</sub> can be found as:</p>
<p><code>x<sub>i</sub> = det(A<sub>i</sub>) / det(A)</code></p>
<p>Where A<sub>i</sub> is the matrix formed by replacing the i-th column of A with the constant vector B.</p>
<p>While theoretically elegant, Cramer's rule is computationally inefficient for large systems (n > 3 or 4) compared to Gaussian elimination or LU decomposition.</p>
<p><strong>Determinant of a 3×3 Matrix</strong> (using Sarrus' rule or cofactor expansion):
    <br>If <code>[A] = [[a,b,c], [d,e,f], [g,h,i]]</code>
    <br><code>det(A) = a(ei-fh) - b(di-fg) + c(dh-eg)</code> (expansion along first row).
</p>

<h4>3. <strong>Applications in Circuit Analysis</strong>:</h4>
<ul>
    <li><strong>Nodal Analysis</strong>: Results in a system of equations <code>[G][V] = [I<sub>s</sub>]</code> where [G] is the admittance matrix, [V] is the vector of unknown node voltages, and [I<sub>s</sub>] is the vector of equivalent source currents.</li>
    <li><strong>Mesh Analysis</strong>: Results in a system of equations <code>[R][I<sub>m</sub>] = [V<sub>s</sub>]</code> where [R] is the resistance (or impedance) matrix, [I<sub>m</sub>] is the vector of unknown mesh currents, and [V<sub>s</sub>] is the vector of equivalent source voltages.</li>
    <li><strong>Two-Port Parameters</strong>: Defining equations for Z, Y, h, ABCD parameters often involve solving for one set of variables given others.</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Solving 2x2 System using Matrix Inversion</h4>
<p><strong>Problem</strong>: Solve:
    <br><code>2x + 3y = 8</code>
    <br><code>x + 4y = 9</code>
</p>
<p><strong>Solution</strong>:
    <br><code>[A] = [[2, 3], [1, 4]]</code>, <code>[X] = [[x], [y]]</code>, <code>[B] = [[8], [9]]</code>.
    <br><code>det(A) = (2)(4) - (3)(1) = 8 - 3 = 5</code>.
    <br><code>[A]<sup>-1</sup> = (1/5) * [[4, -3], [-1, 2]] = [[4/5, -3/5], [-1/5, 2/5]]</code>.
    <br><code>[X] = [A]<sup>-1</sup>[B] = [[4/5, -3/5], [-1/5, 2/5]] * [[8], [9]]</code>
    <br><code>x = (4/5)*8 + (-3/5)*9 = (32 - 27)/5 = 5/5 = 1</code>.
    <br><code>y = (-1/5)*8 + (2/5)*9 = (-8 + 18)/5 = 10/5 = 2</code>.
    <br>So, x=1, y=2.
</p>

<h4>🔸 Example 2: Cramer's Rule for 2x2 System</h4>
<p><strong>Problem</strong>: Using the same system: 2x + 3y = 8; x + 4y = 9.</p>
<p><strong>Solution</strong>:
    <br><code>det(A) = 5</code> (from above).
    <br><code>A<sub>x</sub> = [[8, 3], [9, 4]]</code> ⇒ <code>det(A<sub>x</sub>) = (8)(4) - (3)(9) = 32 - 27 = 5</code>.
    <br><code>A<sub>y</sub> = [[2, 8], [1, 9]]</code> ⇒ <code>det(A<sub>y</sub>) = (2)(9) - (8)(1) = 18 - 8 = 10</code>.
    <br><code>x = det(A<sub>x</sub>)/det(A) = 5/5 = 1</code>.
    <br><code>y = det(A<sub>y</sub>)/det(A) = 10/5 = 2</code>.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Solve using substitution: <code>x + y = 5</code>; <code>2x - y = 1</code>.
        <br><strong>Answer</strong>: From eq1, y = 5-x. Sub into eq2: 2x - (5-x) = 1 ⇒ 3x - 5 = 1 ⇒ 3x = 6 ⇒ x=2. Then y = 5-2 = 3.
    </li>
    <li>Calculate the determinant of <code>M = [[3, 1], [2, 2]]</code>.
        <br><strong>Answer</strong>: det(M) = (3)(2) - (1)(2) = 6 - 2 = 4.
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>Find the inverse of the matrix <code>M = [[3, 1], [2, 2]]</code> from problem 2.
        <br><strong>Answer</strong>: <code>M<sup>-1</sup> = (1/4) * [[2, -1], [-2, 3]] = [[1/2, -1/4], [-1/2, 3/4]]</code>.
    </li>
    <li>Set up the augmented matrix for Gaussian elimination for the system:
        <br><code>x + y + z = 6</code>
        <br><code>2x - y + z = 3</code>
        <br><code>x + 2y - z = 2</code>
        <br><strong>Answer</strong>: <code>[[1, 1, 1 | 6], [2, -1, 1 | 3], [1, 2, -1 | 2]]</code>. (Solving it is a further step).
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="5">
    <li>Solve the 3x3 system from problem 4 using Cramer's Rule or by finding the matrix inverse.
        <br><strong>Hint (Cramer's)</strong>: det(A) = -9. det(A<sub>x</sub>)=-9, det(A<sub>y</sub>)=-18, det(A<sub>z</sub>)=-27.
        <br><strong>Solution</strong>: x = -9/-9 = 1. y = -18/-9 = 2. z = -27/-9 = 3.
    </li>
</ol>

<hr style="margin: 20px 0; border-color: var(--border-color);">
<h3>Interactive Demo: 2x2 System Solver</h3>
<p>Enter coefficients for a 2x2 system <code>ax+by=e</code>, <code>cx+dy=f</code> and see the solution via matrix inversion.</p>
<div class="simulator-container" style="background-color: var(--primary-color); padding:15px; border-radius:5px;">
    <div class="controls" style="display:grid; grid-template-columns: auto auto auto auto; gap:10px; align-items:center;">
        <input type="number" id="matA11" value="2" style="width:50px;"> <label for="matA11">x +</label>
        <input type="number" id="matA12" value="3" style="width:50px;"> <label for="matA12">y =</label>
        <input type="number" id="matB1"  value="8" style="width:50px;">
        <input type="number" id="matA21" value="1" style="width:50px;"> <label for="matA21">x +</label>
        <input type="number" id="matA22" value="4" style="width:50px;"> <label for="matA22">y =</label>
        <input type="number" id="matB2"  value="9" style="width:50px;"> <span></span>
        <button id="solveMatrixBtn" style="grid-column: span 5; margin-top:10px;">Solve System</button>
    </div>
    <div class="results" id="matrixResults" style="flex-basis: 100%; margin-top:15px; background-color:var(--code-bg); padding:10px; border-radius:4px;">
        <p>Determinant of A (ad-bc): <span id="detAVal">N/A</span></p>
        <p>Solution:</p>
        <p>   x = <span id="solX">N/A</span></p>
        <p>   y = <span id="solY">N/A</span></p>
        <div id="matrixInverseDisplay" style="margin-top:10px; font-size:0.9em;"></div>
    </div>
</div>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>For manual calculations of 2x2 or 3x3 systems, choose the method you find most reliable (often elimination or Cramer's rule for small ones).</li>
    <li>Understand that if det(A) = 0, the system either has no solution (inconsistent) or infinitely many solutions (dependent equations). The matrix [A] is singular and has no inverse.</li>
    <li>Matrix inversion is conceptually simple (<code>[X] = [A]<sup>-1</sup>[B]</code>) but computationally intensive for large matrices by hand. It's how many software tools operate.</li>
    <li>Gaussian elimination is a robust general method for solving and for determining if a unique solution exists.</li>
    <li>Always check your solution by substituting the values back into the original equations.</li>
</ul>
</section>
        </section>




        <section id="appendixB">
            <h2>B: Complex Numbers</h2>
            <h3>📚 Overview:</h3>
<p>Complex numbers are an indispensable mathematical tool in electrical engineering, particularly for analyzing AC circuits (using phasors), understanding impedance, and in fields like signal processing and control systems. This appendix provides a comprehensive review of complex numbers, covering their different forms (rectangular, polar, exponential), basic arithmetic operations, Euler's identity, and their graphical representation on the complex plane.</p>

<h3>🔑 Key Concepts:</h3>

<h4>1. <strong>Definition of a Complex Number</strong>:</h4>
<p>A complex number <code>z</code> is an ordered pair of real numbers (a, b) expressed in the form:</p>
<p><code>z = a + jb</code></p>
<p>Where:</p>
<ul>
    <li><code>a = Re{z}</code> is the <strong>real part</strong> of z.</li>
    <li><code>b = Im{z}</code> is the <strong>imaginary part</strong> of z.</li>
    <li><code>j = √(-1)</code> is the imaginary unit. (In electrical engineering, 'j' is used instead of 'i' to avoid confusion with current 'i').</li>
    <li>Properties of j: <code>j<sup>2</sup> = -1</code>, <code>j<sup>3</sup> = -j</code>, <code>j<sup>4</sup> = 1</code>, <code>1/j = -j</code>.</li>
</ul>

<h4>2. <strong>The Complex Plane (Argand Diagram)</strong>:</h4>
<p>Complex numbers can be represented as points or vectors in a two-dimensional Cartesian coordinate system called the complex plane:</p>
<ul>
    <li>The horizontal axis is the <strong>real axis</strong> (Re).</li>
    <li>The vertical axis is the <strong>imaginary axis</strong> (Im).</li>
    <li>The number <code>z = a + jb</code> corresponds to the point (a, b).</li>
</ul>
<div style="text-align:center; margin:10px;">
 <svg width="200" height="150" viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg" style="background-color:var(--bg-color); border:1px solid var(--border-color);">
    <!-- Axes -->
    <line x1="10" y1="75" x2="190" y2="75" stroke="var(--highlight-color)" stroke-width="1"/> <!-- Real Axis -->
    <line x1="100" y1="10" x2="100" y2="140" stroke="var(--highlight-color)" stroke-width="1"/> <!-- Imaginary Axis -->
    <text x="180" y="70" fill="var(--text-color)" font-size="10">Re</text>
    <text x="105" y="20" fill="var(--text-color)" font-size="10">Im</text>
    <text x="95" y="80" fill="var(--text-color)" font-size="10">0</text>
    <!-- Point z = a + jb (e.g., a=60, b=40 from origin 100,75) -->
    <circle cx="160" cy="35" r="3" fill="var(--accent-color)"/>
    <text x="165" y="33" fill="var(--accent-color)" font-size="10">z = a+jb</text>
    <line x1="100" y1="75" x2="160" y2="35" stroke="var(--accent-color)" stroke-width="1" stroke-dasharray="2,2"/> <!-- Vector from origin -->
    <line x1="160" y1="75" x2="160" y2="35" stroke="var(--highlight-color)" stroke-width="0.5" stroke-dasharray="2,2"/> <!-- Projection to Re axis -->
    <text x="158" y="88" fill="var(--text-color)" font-size="10">a</text>
    <line x1="100" y1="35" x2="160" y2="35" stroke="var(--highlight-color)" stroke-width="0.5" stroke-dasharray="2,2"/> <!-- Projection to Im axis -->
    <text x="85" y="38" fill="var(--text-color)" font-size="10">jb</text>
 </svg>
</div>

<h4>3. <strong>Basic Arithmetic Operations (Rectangular Form)</strong>:</h4>
<p>Let z<sub>1</sub> = a + jb and z<sub>2</sub> = c + jd.</p>
<ul>
    <li><strong>Addition</strong>: <code>z<sub>1</sub> + z<sub>2</sub> = (a+c) + j(b+d)</code></li>
    <li><strong>Subtraction</strong>: <code>z<sub>1</sub> - z<sub>2</sub> = (a-c) + j(b-d)</code></li>
    <li><strong>Multiplication</strong>: <code>z<sub>1</sub>z<sub>2</sub> = (a+jb)(c+jd) = ac + jad + jbc + j<sup>2</sup>bd = (ac-bd) + j(ad+bc)</code></li>
    <li><strong>Complex Conjugate</strong>: The conjugate of <code>z = a+jb</code> is <code>z<sup>*</sup> = a-jb</code>.
        <br>Properties: <code>(z<sub>1</sub>+z<sub>2</sub>)<sup>*</sup> = z<sub>1</sub><sup>*</sup>+z<sub>2</sub><sup>*</sup></code>, <code>(z<sub>1</sub>z<sub>2</sub>)<sup>*</sup> = z<sub>1</sub><sup>*</sup>z<sub>2</sub><sup>*</sup></code>, <code>zz<sup>*</sup> = a<sup>2</sup>+b<sup>2</sup> = |z|<sup>2</sup></code>.</li>
    <li><strong>Division</strong>: Multiply numerator and denominator by the conjugate of the denominator:
        <br><code>z<sub>1</sub>/z<sub>2</sub> = (z<sub>1</sub>z<sub>2</sub><sup>*</sup>) / (z<sub>2</sub>z<sub>2</sub><sup>*</sup>) = [(a+jb)(c-jd)] / (c<sup>2</sup>+d<sup>2</sup>) = [(ac+bd) + j(bc-ad)] / (c<sup>2</sup>+d<sup>2</sup>)</code></li>
</ul>

<h4>4. <strong>Polar Form</strong>:</h4>
<p>A complex number z = a + jb can also be represented in polar coordinates (r, θ):</p>
<p><code>z = r ∠ θ</code> or <code>z = r cis(θ)</code> (cis θ = cos θ + j sin θ)</p>
<p>Where:</p>
<ul>
    <li><code>r = |z| = √(a<sup>2</sup> + b<sup>2</sup>)</code> is the <strong>modulus</strong> or magnitude (distance from origin).</li>
    <li><code>θ = arg(z) = atan2(b,a)</code> is the <strong>argument</strong> or phase angle (angle from positive real axis). <code>atan2(y,x)</code> is preferred over <code>atan(y/x)</code> as it correctly determines the quadrant.
        <br>Often, <code>-π < θ ≤ π</code> or <code>0 ≤ θ < 2π</code>.
    </li>
</ul>
<p>Conversion:</p>
<ul>
    <li>Rectangular to Polar: <code>r = √(a<sup>2</sup>+b<sup>2</sup>)</code>, <code>θ = atan2(b,a)</code></li>
    <li>Polar to Rectangular: <code>a = r cos(θ)</code>, <code>b = r sin(θ)</code></li>
</ul>

<h4>5. <strong>Exponential Form (Euler's Identity)</strong>:</h4>
<p>Euler's identity provides a crucial link: <code>e<sup>jθ</sup> = cos(θ) + j sin(θ)</code>.</p>
<p>Thus, the exponential form of a complex number is: <code>z = re<sup>jθ</sup></code>.</p>
<p>This form is particularly useful for multiplication, division, powers, and roots.</p>
<ul>
    <li><code>cos(θ) = (e<sup>jθ</sup> + e<sup>-jθ</sup>)/2</code></li>
    <li><code>sin(θ) = (e<sup>jθ</sup> - e<sup>-jθ</sup>)/(2j)</code></li>
</ul>

<h4>6. <strong>Operations in Polar/Exponential Form</strong>:</h4>
<p>Let z<sub>1</sub> = r<sub>1</sub>e<sup>jθ<sub>1</sub></sup> and z<sub>2</sub> = r<sub>2</sub>e<sup>jθ<sub>2</sub></sup>.</p>
<ul>
    <li><strong>Multiplication</strong>: <code>z<sub>1</sub>z<sub>2</sub> = (r<sub>1</sub>r<sub>2</sub>)e<sup>j(θ<sub>1</sub>+θ<sub>2</sub>)</sup></code>
        <br>(Magnitudes multiply, angles add).</li>
    <li><strong>Division</strong>: <code>z<sub>1</sub>/z<sub>2</sub> = (r<sub>1</sub>/r<sub>2</sub>)e<sup>j(θ<sub>1</sub>-θ<sub>2</sub>)</sup></code>
        <br>(Magnitudes divide, angles subtract).</li>
    <li><strong>Power (De Moivre's Theorem)</strong>: <code>z<sup>n</sup> = (re<sup>jθ</sup>)<sup>n</sup> = r<sup>n</sup>e<sup>jnθ</sup> = r<sup>n</sup>(cos(nθ) + jsin(nθ))</code></li>
    <li><strong>Roots</strong>: The n<sup>th</sup> roots of <code>z = re<sup>jθ</sup></code> are given by:
        <br><code>w<sub>k</sub> = r<sup>1/n</sup> e<sup>j(θ + 2πk)/n</sup></code> for k = 0, 1, 2, ..., n-1.
        <br>There are 'n' distinct n<sup>th</sup> roots.</li>
</ul>

<h3>🧮 Example Problems:</h3>

<h4>🔸 Example 1: Operations in Rectangular Form</h4>
<p><strong>Problem</strong>: Let z<sub>1</sub> = 2 + j3, z<sub>2</sub> = 1 - j1. Find z<sub>1</sub> + z<sub>2</sub>, z<sub>1</sub>z<sub>2</sub>, and z<sub>1</sub>/z<sub>2</sub>.</p>
<p><strong>Solution</strong>:
    <br>z<sub>1</sub> + z<sub>2</sub> = (2+1) + j(3-1) = 3 + j2.
    <br>z<sub>1</sub>z<sub>2</sub> = (2+j3)(1-j1) = 2(1) - 2(j1) + j3(1) - j3(j1) = 2 - j2 + j3 - j<sup>2</sup>3 = 2 + j + 3 = 5 + j1.
    <br>z<sub>1</sub>/z<sub>2</sub> = (2+j3)/(1-j1) = [(2+j3)(1+j1)] / [(1-j1)(1+j1)] = [2+j2+j3+j<sup>2</sup>3] / (1<sup>2</sup>+1<sup>2</sup>) = [2+j5-3] / 2 = (-1+j5)/2 = -0.5 + j2.5.
</p>

<h4>🔸 Example 2: Conversion and Polar Multiplication</h4>
<p><strong>Problem</strong>: Given z<sub>1</sub> = 3 + j4 and z<sub>2</sub> = 5 ∠ -60°. Find z<sub>1</sub>z<sub>2</sub> in polar form.</p>
<p><strong>Solution</strong>:
    <br>Convert z<sub>1</sub> to polar: |z<sub>1</sub>| = √(3<sup>2</sup>+4<sup>2</sup>) = 5. θ<sub>1</sub> = atan2(4,3) ≈ 53.13°. So z<sub>1</sub> ≈ 5 ∠ 53.13°.
    <br>z<sub>1</sub>z<sub>2</sub> = (5 ∠ 53.13°)(5 ∠ -60°) = (5*5) ∠ (53.13° - 60°) = 25 ∠ -6.87°.
</p>

<h3>📝 Practice Problems:</h3>

<h4>🔹 Level 1 – Basic:</h4>
<ol>
    <li>Given z = -2 + j2. Find its modulus |z| and argument θ.
        <br><strong>Answer</strong>: |z| = √((-2)<sup>2</sup> + 2<sup>2</sup>) = √(4+4) = √8 = 2√2 ≈ 2.828.
        <br>θ = atan2(2, -2) = 135° or 3π/4 radians.
    </li>
    <li>Express e<sup>jπ/2</sup> in rectangular form.
        <br><strong>Answer</strong>: cos(π/2) + jsin(π/2) = 0 + j1 = j.
    </li>
</ol>

<h4>🔹 Level 2 – Intermediate:</h4>
<ol start="3">
    <li>Calculate (1+j)<sup>5</sup> using polar/exponential form.
        <br><strong>Hint</strong>: 1+j = √2 ∠ 45° = √2 e<sup>jπ/4</sup>.
        <br>(√2 e<sup>jπ/4</sup>)<sup>5</sup> = (√2)<sup>5</sup> e<sup>j5π/4</sup> = 4√2 e<sup>j5π/4</sup>.
        <br>5π/4 = 225° or -135°. cos(225°)=-√2/2, sin(225°)=-√2/2.
        <br>4√2 (-√2/2 - j√2/2) = 4(-1 - j1) = -4 - j4.
    </li>
</ol>

<h4>🔹 Level 3 – Advanced:</h4>
<ol start="4">
    <li>Find all cube roots of z = 8j.
        <br><strong>Hint</strong>: 8j = 8 ∠ 90° = 8e<sup>jπ/2</sup>.
        <br>w<sub>k</sub> = 8<sup>1/3</sup> e<sup>j(π/2 + 2πk)/3</sup> for k=0, 1, 2.
        <br>w<sub>0</sub> = 2 e<sup>jπ/6</sup> = 2(cos30° + jsin30°) = 2(√3/2 + j1/2) = √3 + j.
        <br>w<sub>1</sub> = 2 e<sup>j(π/2 + 2π)/3</sup> = 2 e<sup>j5π/6</sup> = 2(cos150° + jsin150°) = 2(-√3/2 + j1/2) = -√3 + j.
        <br>w<sub>2</sub> = 2 e<sup>j(π/2 + 4π)/3</sup> = 2 e<sup>j9π/6</sup> = 2 e<sup>j3π/2</sup> = 2(cos270° + jsin270°) = 2(0 - j1) = -j2.
    </li>
</ol>

<hr style="margin: 20px 0; border-color: var(--border-color);">
<h3>Interactive Demo: Complex Number Operations</h3>
<p>Enter two complex numbers (z1, z2) in rectangular form. See results of addition, multiplication, and z1/z2, along with polar forms.</p>
<div class="simulator-container" style="background-color: var(--primary-color); padding:15px; border-radius:5px;">
    <div class="controls" style="display:grid; grid-template-columns: auto 1fr auto 1fr; gap:5px 10px; align-items: center;">
        <label for="z1_re">z1 Real:</label> <input type="number" id="z1_re" value="3" step="0.1" style="width:60px;">
        <label for="z1_im">z1 Imag:</label> <input type="number" id="z1_im" value="4" step="0.1" style="width:60px;">
        
        <label for="z2_re">z2 Real:</label> <input type="number" id="z2_re" value="1" step="0.1" style="width:60px;">
        <label for="z2_im">z2 Imag:</label> <input type="number" id="z2_im" value="-1" step="0.1" style="width:60px;">
        
        <button id="complexOpBtn" style="grid-column: span 4; margin-top:10px;">Calculate Operations</button>
    </div>
    <div class="results" id="complexResults" style="flex-basis: 100%; margin-top:15px; background-color:var(--code-bg); padding:10px; border-radius:4px; font-size:0.9em;">
        <p><strong>z1:</strong> <span id="z1_display">N/A</span>   |   Polar: <span id="z1_polar_display">N/A</span></p>
        <p><strong>z2:</strong> <span id="z2_display">N/A</span>   |   Polar: <span id="z2_polar_display">N/A</span></p>
        <hr style="margin:5px 0; border-color: var(--highlight-color);">
        <p><strong>z1 + z2:</strong> <span id="z_add_display">N/A</span></p>
        <p><strong>z1 - z2:</strong> <span id="z_sub_display">N/A</span></p>
        <p><strong>z1 * z2:</strong> <span id="z_mul_display">N/A</span>   |   Polar: <span id="z_mul_polar_display">N/A</span></p>
        <p><strong>z1 / z2:</strong> <span id="z_div_display">N/A</span>   |   Polar: <span id="z_div_polar_display">N/A</span></p>
    </div>
</div>

<h3>🎯 Tips for Mastery:</h3>
<ul>
    <li>Be fluent in converting between rectangular, polar, and exponential forms. This is crucial for choosing the easiest method for an operation (e.g., addition/subtraction in rectangular, multiplication/division in polar/exponential).</li>
    <li>Understand Euler's identity <code>e<sup>jθ</sup> = cos(θ) + jsin(θ)</code> deeply, as it's the bridge between exponential and trigonometric representations.</li>
    <li>Graph complex numbers on the Argand diagram to build intuition about their magnitude and phase.</li>
    <li>When calculating arguments (angles), always use <code>atan2(b,a)</code> or be mindful of the quadrant to get the correct angle.</li>
    <li>Mastering complex arithmetic is essential for AC circuit analysis (phasors and impedance), as well as understanding s-plane plots for Laplace transforms and frequency response.</li>
</ul>
</section>
        </section>




        <section id="appendixC">
            <h2>C: Mathematical Formulas</h2>
            <h3>📚 Overview:</h3>
<p>This appendix provides a quick reference to common mathematical formulas and identities frequently encountered in electrical engineering, circuit analysis, and signal processing. It is not exhaustive but covers key areas including algebra, trigonometry, calculus, series expansions, and essential transform pairs.</p>

<h3>🔑 1. Algebraic Identities</h3>
<ul>
    <li><code>(a + b)<sup>2</sup> = a<sup>2</sup> + 2ab + b<sup>2</sup></code></li>
    <li><code>(a - b)<sup>2</sup> = a<sup>2</sup> - 2ab + b<sup>2</sup></code></li>
    <li><code>(a + b)(a - b) = a<sup>2</sup> - b<sup>2</sup></code></li>
    <li><code>(a + b)<sup>3</sup> = a<sup>3</sup> + 3a<sup>2</sup>b + 3ab<sup>2</sup> + b<sup>3</sup></code></li>
    <li><code>(a - b)<sup>3</sup> = a<sup>3</sup> - 3a<sup>2</sup>b + 3ab<sup>2</sup> - b<sup>3</sup></code></li>
    <li><code>a<sup>3</sup> + b<sup>3</sup> = (a + b)(a<sup>2</sup> - ab + b<sup>2</sup>)</code></li>
    <li><code>a<sup>3</sup> - b<sup>3</sup> = (a - b)(a<sup>2</sup> + ab + b<sup>2</sup>)</code></li>
</ul>
<h4>Quadratic Formula:</h4>
<p>For an equation <code>ax<sup>2</sup> + bx + c = 0</code>, the solutions for x are:</p>
<p><code>x = [-b ± √(b<sup>2</sup> - 4ac)] / (2a)</code></p>
<h4>Logarithms:</h4>
<ul>
    <li><code>log<sub>b</sub>(xy) = log<sub>b</sub>x + log<sub>b</sub>y</code></li>
    <li><code>log<sub>b</sub>(x/y) = log<sub>b</sub>x - log<sub>b</sub>y</code></li>
    <li><code>log<sub>b</sub>(x<sup>p</sup>) = p log<sub>b</sub>x</code></li>
    <li><code>log<sub>b</sub>x = log<sub>c</sub>x / log<sub>c</sub>b</code> (Change of base)</li>
    <li><code>ln(x)</code> denotes log<sub>e</sub>(x) where <code>e ≈ 2.71828</code></li>
    <li><code>ln(e<sup>x</sup>) = x</code>; <code>e<sup>ln(x)</sup> = x</code> (for x > 0)</li>
</ul>

<h3>🔑 2. Trigonometric Identities</h3>
<h4>Basic Definitions (for angle θ in a right triangle):</h4>
<ul>
    <li><code>sin(θ) = opposite/hypotenuse</code></li>
    <li><code>cos(θ) = adjacent/hypotenuse</code></li>
    <li><code>tan(θ) = opposite/adjacent = sin(θ)/cos(θ)</code></li>
    <li><code>csc(θ) = 1/sin(θ)</code></li>
    <li><code>sec(θ) = 1/cos(θ)</code></li>
    <li><code>cot(θ) = 1/tan(θ) = cos(θ)/sin(θ)</code></li>
</ul>
<h4>Pythagorean Identities:</h4>
<ul>
    <li><code>sin<sup>2</sup>(θ) + cos<sup>2</sup>(θ) = 1</code></li>
    <li><code>1 + tan<sup>2</sup>(θ) = sec<sup>2</sup>(θ)</code></li>
    <li><code>1 + cot<sup>2</sup>(θ) = csc<sup>2</sup>(θ)</code></li>
</ul>
<h4>Angle Sum and Difference Identities:</h4>
<ul>
    <li><code>sin(A ± B) = sinA cosB ± cosA sinB</code></li>
    <li><code>cos(A ± B) = cosA cosB ∓ sinA sinB</code></li>
    <li><code>tan(A ± B) = (tanA ± tanB) / (1 ∓ tanA tanB)</code></li>
</ul>
<h4>Double Angle Formulas:</h4>
<ul>
    <li><code>sin(2θ) = 2sinθcosθ</code></li>
    <li><code>cos(2θ) = cos<sup>2</sup>θ - sin<sup>2</sup>θ = 2cos<sup>2</sup>θ - 1 = 1 - 2sin<sup>2</sup>θ</code></li>
    <li><code>tan(2θ) = (2tanθ) / (1 - tan<sup>2</sup>θ)</code></li>
</ul>
<h4>Half Angle Formulas:</h4>
<ul>
    <li><code>sin<sup>2</sup>(θ/2) = (1 - cosθ)/2</code></li>
    <li><code>cos<sup>2</sup>(θ/2) = (1 + cosθ)/2</code></li>
</ul>
<h4>Product-to-Sum and Sum-to-Product:</h4>
<ul>
    <li><code>sinA cosB = (1/2)[sin(A+B) + sin(A-B)]</code></li>
    <li><code>cosA cosB = (1/2)[cos(A+B) + cos(A-B)]</code></li>
    <li><code>sinA sinB = (1/2)[cos(A-B) - cos(A+B)]</code></li>
    <li><code>sinX + sinY = 2sin((X+Y)/2)cos((X-Y)/2)</code></li>
    <li><code>cosX + cosY = 2cos((X+Y)/2)cos((X-Y)/2)</code></li>
</ul>
<h4>Euler's Identity:</h4>
<p><code>e<sup>jθ</sup> = cos(θ) + jsin(θ)</code></p>
<p><code>cos(θ) = (e<sup>jθ</sup> + e<sup>-jθ</sup>)/2</code></p>
<p><code>sin(θ) = (e<sup>jθ</sup> - e<sup>-jθ</sup>)/(2j)</code></p>

<h3>🔑 3. Calculus - Derivatives</h3>
<p>(u and v are functions of x; a and n are constants)</p>
<ul>
    <li><code>d/dx (c) = 0</code> (c is a constant)</li>
    <li><code>d/dx (x<sup>n</sup>) = nx<sup>n-1</sup></code></li>
    <li><code>d/dx (e<sup>ax</sup>) = ae<sup>ax</sup></code></li>
    <li><code>d/dx (a<sup>x</sup>) = a<sup>x</sup>ln(a)</code></li>
    <li><code>d/dx (ln|x|) = 1/x</code></li>
    <li><code>d/dx (log<sub>a</sub>|x|) = 1/(x ln a)</code></li>
    <li><code>d/dx (sin(ax)) = a cos(ax)</code></li>
    <li><code>d/dx (cos(ax)) = -a sin(ax)</code></li>
    <li><code>d/dx (tan(ax)) = a sec<sup>2</sup>(ax)</code></li>
    <li>Product Rule: <code>d/dx (uv) = u(dv/dx) + v(du/dx)</code></li>
    <li>Quotient Rule: <code>d/dx (u/v) = [v(du/dx) - u(dv/dx)] / v<sup>2</sup></code></li>
    <li>Chain Rule: If y=f(u) and u=g(x), then <code>dy/dx = (dy/du)(du/dx)</code></li>
</ul>

<h3>🔑 4. Calculus - Integrals</h3>
<p>(C is the constant of integration)</p>
<ul>
    <li><code>∫ k dx = kx + C</code></li>
    <li><code>∫ x<sup>n</sup> dx = x<sup>n+1</sup>/(n+1) + C</code> (for n ≠ -1)</li>
    <li><code>∫ (1/x) dx = ln|x| + C</code></li>
    <li><code>∫ e<sup>ax</sup> dx = (1/a)e<sup>ax</sup> + C</code></li>
    <li><code>∫ a<sup>x</sup> dx = a<sup>x</sup>/ln(a) + C</code></li>
    <li><code>∫ ln(x) dx = xln(x) - x + C</code></li>
    <li><code>∫ sin(ax) dx = -(1/a)cos(ax) + C</code></li>
    <li><code>∫ cos(ax) dx = (1/a)sin(ax) + C</code></li>
    <li><code>∫ tan(x) dx = ln|sec(x)| + C = -ln|cos(x)| + C</code></li>
    <li><code>∫ sec<sup>2</sup>(x) dx = tan(x) + C</code></li>
    <li>Integration by Parts: <code>∫ u dv = uv - ∫ v du</code></li>
</ul>

<h3>🔑 5. Series Expansions (Maclaurin Series - Taylor series around a=0)</h3>
<ul>
    <li><code>e<sup>x</sup> = 1 + x + x<sup>2</sup>/2! + x<sup>3</sup>/3! + ... = ∑<sub>n=0</sub><sup>∞</sup> x<sup>n</sup>/n!</code> (for all x)</li>
    <li><code>sin(x) = x - x<sup>3</sup>/3! + x<sup>5</sup>/5! - x<sup>7</sup>/7! + ... = ∑<sub>n=0</sub><sup>∞</sup> (-1)<sup>n</sup>x<sup>2n+1</sup>/(2n+1)!</code> (for all x)</li>
    <li><code>cos(x) = 1 - x<sup>2</sup>/2! + x<sup>4</sup>/4! - x<sup>6</sup>/6! + ... = ∑<sub>n=0</sub><sup>∞</sup> (-1)<sup>n</sup>x<sup>2n</sup>/(2n)!</code> (for all x)</li>
    <li><code>ln(1+x) = x - x<sup>2</sup>/2 + x<sup>3</sup>/3 - x<sup>4</sup>/4 + ... = ∑<sub>n=1</sub><sup>∞</sup> (-1)<sup>n-1</sup>x<sup>n</sup>/n</code> (for -1 < x ≤ 1)</li>
    <li><code>(1+x)<sup>p</sup> = 1 + px + p(p-1)x<sup>2</sup>/2! + p(p-1)(p-2)x<sup>3</sup>/3! + ...</code> (Binomial series, for |x| < 1)</li>
    <li>Geometric Series: <code>a + ar + ar<sup>2</sup> + ... + ar<sup>n-1</sup> = a(1-r<sup>n</sup>)/(1-r)</code>
        <br>Infinite Geometric Series: <code>∑<sub>n=0</sub><sup>∞</sup> ar<sup>n</sup> = a/(1-r)</code> (for |r| < 1)
    </li>
</ul>

<h3>🔑 6. Key Laplace Transform Pairs (Unilateral, f(t)=0 for t<0)</h3>
<ul>
    <li><code>δ(t) ↔ 1</code></li>
    <li><code>u(t) ↔ 1/s</code></li>
    <li><code>t<sup>n</sup>u(t) ↔ n!/s<sup>n+1</sup></code></li>
    <li><code>e<sup>-at</sup>u(t) ↔ 1/(s+a)</code></li>
    <li><code>sin(ωt)u(t) ↔ ω/(s<sup>2</sup>+ω<sup>2</sup>)</code></li>
    <li><code>cos(ωt)u(t) ↔ s/(s<sup>2</sup>+ω<sup>2</sup>)</code></li>
    <li><code>e<sup>-at</sup>sin(ωt)u(t) ↔ ω/((s+a)<sup>2</sup>+ω<sup>2</sup>)</code></li>
    <li><code>e<sup>-at</sup>cos(ωt)u(t) ↔ (s+a)/((s+a)<sup>2</sup>+ω<sup>2</sup>)</code></li>
</ul>

<h3>🔑 7. Key Fourier Transform Pairs</h3>
<ul>
    <li><code>δ(t) ↔ 1</code></li>
    <li><code>1 ↔ 2πδ(ω)</code></li>
    <li><code>u(t) ↔ πδ(ω) + 1/(jω)</code></li>
    <li><code>e<sup>-at</sup>u(t) (a>0) ↔ 1/(a+jω)</code></li>
    <li><code>e<sup>jω<sub>0</sub>t</sup> ↔ 2πδ(ω - ω<sub>0</sub>)</code></li>
    <li><code>cos(ω<sub>0</sub>t) ↔ π[δ(ω - ω<sub>0</sub>) + δ(ω + ω<sub>0</sub>)]</code></li>
    <li><code>rect(t/T) ↔ T sinc(ωT/(2π))</code>   (sinc(x) = sin(πx)/(πx))</li>
</ul>

<h3>🔑 8. Matrix Operations (for a 2x2 matrix A = [[a,b],[c,d]])</h3>
<ul>
    <li>Determinant: <code>det(A) = ad - bc</code></li>
    <li>Inverse: <code>A<sup>-1</sup> = (1/det(A)) * [[d, -b], [-c, a]]</code> (if det(A) ≠ 0)</li>
</ul>

<p><em>This list provides common formulas. For specific advanced topics or derivations, consult dedicated mathematical texts or relevant chapters within this guide.</em></p>
</section>
        </section>



        <section id="finalThoughts" style="text-align:center; padding: 30px; background-color: var(--primary-color); border-radius:8px; margin-top: 40px;">
    <h2>🎉 End of Study Guide! 🎉</h2>
    <p>Congratulations on reaching the end of this comprehensive guide to Electrical Circuits!</p>
    <p>You've journeyed from basic concepts through advanced analysis techniques like Laplace and Fourier transforms, explored key components, and seen how these principles apply to various circuit configurations including two-port networks and three-phase systems.</p>
    <p>The interactive demos for Ohm's Law, RLC step response, Fourier Series synthesis, Fourier Transform of a pulse, 2x2 system solving, and complex number operations were designed to provide a hands-on feel for these concepts.</p>
    <p><strong>Key takeaways for mastery:</strong></p>
    <ul style="list-style:none; padding-left:0; margin-top:15px; margin-bottom:15px;">
        <li>✔️ Practice consistently with problems of varying difficulty.</li>
        <li>✔️ Understand the "why" behind formulas, not just memorization.</li>
        <li>✔️ Use simulation tools (like the simple ones here, or more advanced software) to verify your analytical solutions and build intuition.</li>
        <li>✔️ Relate theoretical concepts to real-world applications.</li>
    </ul>
    <p>This guide provides a strong foundation. Continue to explore, experiment, and apply what you've learned!</p>
    <p>Feel free to revisit any section using the navigation panel.</p>
</section>





        <footer>
            <p>&copy; 2025 Interactive Guides. Education and passion for electronics. -Sebastian</p>
        </footer>
    </main>

    <script>
        // --- Smooth Scrolling for Navigation ---
        document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
                // Optional: Highlight active link
                document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // --- Simple Ohm's Law Simulator Logic ---
        const voltageInput = document.getElementById('voltage');
        const resistanceInput = document.getElementById('resistance');
        // const resistance2Input = document.getElementById('resistance2');
        // const connectionTypeSelect = document.getElementById('connectionType');
        const simulateBtn = document.getElementById('simulateBtn');
        
        const currentValDisplay = document.getElementById('currentVal');
        const powerValDisplay = document.getElementById('powerVal');
        // const totalResistanceValDisplay = document.getElementById('totalResistanceVal');

        const circuitCanvas = document.getElementById('circuitCanvas');
        const ctx = circuitCanvas.getContext('2d');

        function drawSimpleCircuit(voltage, resistance, current) {
            ctx.clearRect(0, 0, circuitCanvas.width, circuitCanvas.height);
            
            // Style
            ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color').trim();
            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color').trim();
            ctx.lineWidth = 2;
            ctx.font = "12px Segoe UI";

            // Battery
            ctx.beginPath();
            ctx.moveTo(50, 50); ctx.lineTo(50, 150); // Left plate
            ctx.moveTo(40, 60); ctx.lineTo(60, 60); // Top small plate
            ctx.moveTo(40, 75); ctx.lineTo(60, 75); // Top long plate
            ctx.fillText("+", 65, 70);
            ctx.fillText("-", 65, 140);
            ctx.stroke();
            
            // Wires
            ctx.beginPath();
            ctx.moveTo(50, 50); ctx.lineTo(150, 50); // Top wire
            ctx.moveTo(50, 150); ctx.lineTo(150, 150); // Bottom wire
            ctx.moveTo(150, 50); ctx.lineTo(150, 70); // Wire to resistor top
            ctx.moveTo(150, 130); ctx.lineTo(150, 150); // Wire from resistor bottom
            ctx.stroke();

            // Resistor (simple box)
            ctx.strokeRect(140, 70, 20, 60); // x, y, width, height
            ctx.fillText(`${resistance.toFixed(1)}Ω`, 170, 105);
            
            // Voltage source label
            ctx.fillText(`${voltage.toFixed(1)}V`, 10, 100);

            // Current arrow (simple) & label
            if (current > 0) {
                ctx.beginPath();
                ctx.moveTo(100, 40); ctx.lineTo(120, 40); // Arrow line
                ctx.lineTo(115, 35); ctx.moveTo(120, 40); ctx.lineTo(115, 45); // Arrow head
                ctx.stroke();
                ctx.fillText(`${current.toFixed(3)}A`, 95, 30);
            }
        }

        function calculateAndDisplay() {
            const V = parseFloat(voltageInput.value);
            const R1 = parseFloat(resistanceInput.value);
            // const R2 = parseFloat(resistance2Input.value);
            // const connection = connectionTypeSelect.value;

            if (isNaN(V) || isNaN(R1) || R1 <= 0) {
                currentValDisplay.textContent = "Invalid Input";
                powerValDisplay.textContent = "Invalid Input";
                // totalResistanceValDisplay.textContent = "N/A";
                drawSimpleCircuit(0,0,0);
                return;
            }

            let Rt = R1; // For now, only single resistor
            // Example for series/parallel (if you extend)
            /*
            if (R2 > 0) {
                if (connection === 'series') {
                    Rt = R1 + R2;
                } else if (connection === 'parallel') {
                    if (R1 > 0 && R2 > 0) Rt = (R1 * R2) / (R1 + R2);
                    else if (R1 > 0) Rt = R1;
                    else Rt = R2; // only one is >0
                }
            }
            */
            
            const I = V / Rt;
            const P = V * I; // or I*I*R or V*V/R

            currentValDisplay.textContent = `${I.toFixed(3)} A`;
            powerValDisplay.textContent = `${P.toFixed(3)} W`;
            // totalResistanceValDisplay.textContent = `${Rt.toFixed(2)} Ω`;

            drawSimpleCircuit(V, Rt, I);
        }

        simulateBtn.addEventListener('click', calculateAndDisplay);
        // Initial calculation and draw
        calculateAndDisplay();

        // Update on input change for "real-time" feel
        voltageInput.addEventListener('input', calculateAndDisplay);
        resistanceInput.addEventListener('input', calculateAndDisplay);
        // resistance2Input.addEventListener('input', calculateAndDisplay);
        // connectionTypeSelect.addEventListener('change', calculateAndDisplay);


        // --- Active Nav Link on Scroll (More advanced, optional) ---
        const sections = document.querySelectorAll('main section');
        const navLinks = document.querySelectorAll('nav ul li a');

        window.addEventListener('scroll', () => {
            let currentSectionId = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= (sectionTop - sectionHeight / 3)) { // Adjust threshold as needed
                    currentSectionId = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${currentSectionId}`) {
                    link.classList.add('active');
                }
            });
        });

        // --- KCL Visualizer Demo (Chapter 2) ---
        const kclIs1Input = document.getElementById('kclIs1');
        const kclIs2Input = document.getElementById('kclIs2');
        const kclR1Input = document.getElementById('kclR1');
        const kclSimulateBtn = document.getElementById('kclSimulateBtn');

        const kclVnodeDisplay = document.getElementById('kclVnode');
        const kclIr1Display = document.getElementById('kclIr1');
        const kclSumInDisplay = document.getElementById('kclSumIn');
        const kclSumOutDisplay = document.getElementById('kclSumOut');
        const kclBalanceDisplay = document.getElementById('kclBalance');
        const kclCanvas = document.getElementById('kclCanvas');

        if (kclCanvas) { // Ensure canvas element exists
            const kclCtx = kclCanvas.getContext('2d');

            function drawKCLDiagram(is1, is2, ir1, vNode) {
                if (!kclCtx) return;
                kclCtx.clearRect(0, 0, kclCanvas.width, kclCanvas.height);
                kclCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color').trim();
                kclCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color').trim();
                kclCtx.lineWidth = 1.5;
                kclCtx.font = "10px Segoe UI";
                
                const nodeX = kclCanvas.width / 2;
                const nodeY = kclCanvas.height / 2 - 10; // Central node slightly up

                // Node
                kclCtx.beginPath();
                kclCtx.arc(nodeX, nodeY, 5, 0, 2 * Math.PI);
                kclCtx.fill();
                kclCtx.fillText(`Vnode=${vNode.toFixed(2)}V`, nodeX + 8, nodeY - 5);

                // Current Source 1 (Is1) - from left
                const is1StartX = nodeX - 80;
                const is1StartY = nodeY;
                kclCtx.beginPath();
                kclCtx.arc(is1StartX, is1StartY, 15, 0, 2 * Math.PI); // Circle for current source
                kclCtx.moveTo(is1StartX + 7, is1StartY - 7); kclCtx.lineTo(is1StartX + 7, is1StartY + 7); // Arrow inside
                kclCtx.moveTo(is1StartX + 7, is1StartY); kclCtx.lineTo(is1StartX + 13, is1StartY - 5); 
                kclCtx.moveTo(is1StartX + 7, is1StartY); kclCtx.lineTo(is1StartX + 13, is1StartY + 5);
                kclCtx.moveTo(is1StartX + 15, is1StartY); kclCtx.lineTo(nodeX - 5, nodeY); // Wire to node
                kclCtx.stroke();
                kclCtx.fillText(`Is1=${is1.toFixed(2)}A ->`, is1StartX - 35, is1StartY + 4);

                // Current Source 2 (Is2) - from top
                const is2StartX = nodeX;
                const is2StartY = nodeY - 60;
                kclCtx.beginPath();
                kclCtx.arc(is2StartX, is2StartY, 15, 0, 2 * Math.PI);
                kclCtx.moveTo(is2StartX - 7, is2StartY + 7); kclCtx.lineTo(is2StartX + 7, is2StartY + 7); // Arrow inside (vertical)
                kclCtx.moveTo(is2StartX, is2StartY + 7); kclCtx.lineTo(is2StartX - 5, is2StartY + 13);
                kclCtx.moveTo(is2StartX, is2StartY + 7); kclCtx.lineTo(is2StartX + 5, is2StartY + 13);
                kclCtx.moveTo(is2StartX, is2StartY + 15); kclCtx.lineTo(nodeX, nodeY - 5); // Wire to node
                kclCtx.stroke();
                kclCtx.fillText(`Is2=${is2.toFixed(2)}A`, is2StartX + 20, is2StartY + 4);
                kclCtx.fillText(`↓`, is2StartX -3, is2StartY +30);


                // Resistor R1 - down to ground
                const r1TopY = nodeY + 5;
                const r1BottomY = kclCanvas.height - 20;
                const r1MidY = (r1TopY + r1BottomY) / 2;
                kclCtx.beginPath();
                kclCtx.moveTo(nodeX, r1TopY); kclCtx.lineTo(nodeX, r1MidY - 10);
                kclCtx.rect(nodeX - 10, r1MidY - 10, 20, 20); // Resistor box
                kclCtx.moveTo(nodeX, r1MidY + 10); kclCtx.lineTo(nodeX, r1BottomY);
                // Ground symbol
                kclCtx.moveTo(nodeX - 10, r1BottomY); kclCtx.lineTo(nodeX + 10, r1BottomY);
                kclCtx.moveTo(nodeX - 6, r1BottomY + 4); kclCtx.lineTo(nodeX + 6, r1BottomY + 4);
                kclCtx.moveTo(nodeX - 2, r1BottomY + 8); kclCtx.lineTo(nodeX + 2, r1BottomY + 8);
                kclCtx.stroke();
                kclCtx.fillText(`R1=${kclR1Input.value}Ω`, nodeX + 15, r1MidY + 5);
                kclCtx.fillText(`-> Ir1=${ir1.toFixed(2)}A`, nodeX + 15, r1TopY + 15);
            }


            function analyzeKCLNode() {
                if (!kclIs1Input || !kclIs2Input || !kclR1Input || !kclVnodeDisplay || !kclIr1Display ||
                    !kclSumInDisplay || !kclSumOutDisplay || !kclBalanceDisplay) {
                    console.error("KCL demo elements not found.");
                    return;
                }

                const Is1 = parseFloat(kclIs1Input.value);
                const Is2 = parseFloat(kclIs2Input.value);
                const R1 = parseFloat(kclR1Input.value);

                if (isNaN(Is1) || isNaN(Is2) || isNaN(R1) || R1 <= 0) {
                    kclVnodeDisplay.textContent = "Invalid";
                    kclIr1Display.textContent = "Invalid Input";
                    kclSumInDisplay.textContent = "N/A";
                    kclSumOutDisplay.textContent = "N/A";
                    kclBalanceDisplay.textContent = "Invalid Input";
                    if (kclCtx) kclCtx.clearRect(0, 0, kclCanvas.width, kclCanvas.height);
                    return;
                }

                // KCL at the node: Is1 + Is2 = Ir1
                // Ir1 = Vnode / R1
                // So, Is1 + Is2 = Vnode / R1
                // Vnode = (Is1 + Is2) * R1
                const Vnode = (Is1 + Is2) * R1;
                const Ir1 = Vnode / R1; // Which should be Is1 + Is2

                const sumIn = Is1 + Is2;
                const sumOut = Ir1;

                kclVnodeDisplay.textContent = Vnode.toFixed(3);
                kclIr1Display.textContent = Ir1.toFixed(3);
                kclSumInDisplay.textContent = sumIn.toFixed(3);
                kclSumOutDisplay.textContent = sumOut.toFixed(3);

                if (Math.abs(sumIn - sumOut) < 1e-6) { // Check for balance within tolerance
                    kclBalanceDisplay.textContent = "Balanced ✔️";
                    kclBalanceDisplay.style.color = "lightgreen";
                } else {
                    kclBalanceDisplay.textContent = "Not Balanced ❌";
                    kclBalanceDisplay.style.color = "var(--accent-color)";
                }
                
                drawKCLDiagram(Is1, Is2, Ir1, Vnode);
            }

            if (kclSimulateBtn) kclSimulateBtn.addEventListener('click', analyzeKCLNode);
            const kclInputs = [kclIs1Input, kclIs2Input, kclR1Input];
            kclInputs.forEach(input => {
                if(input) input.addEventListener('input', analyzeKCLNode);
            });

            analyzeKCLNode(); // Initial analysis
        } else {
            console.error("KCL Canvas element not found!");
        }

        // --- Op-Amp Amplifier Demo (Chapter 5) ---
        const opampVinInput = document.getElementById('opampVin');
        const opampR1Input = document.getElementById('opampR1');
        const opampRfInput = document.getElementById('opampRf');
        const opampConfigSelect = document.getElementById('opampConfig');
        const opampSimulateBtn = document.getElementById('opampSimulateBtn');

        const opampVoutDisplay = document.getElementById('opampVout');
        const opampGainDisplay = document.getElementById('opampGain');
        const opampFormulaDisplay = document.getElementById('opampFormulaDisplay');
        const opampCanvas = document.getElementById('opampCanvas');

        if (opampCanvas) { // Ensure canvas element exists
            const opampCtx = opampCanvas.getContext('2d');

            function drawOpAmpDiagram(config, r1Val, rfVal, vinVal, voutVal) {
                if (!opampCtx) return;
                opampCtx.clearRect(0, 0, opampCanvas.width, opampCanvas.height);
                opampCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color').trim();
                opampCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color').trim();
                opampCtx.lineWidth = 1.5;
                opampCtx.font = "10px Segoe UI";

                // Op-amp triangle
                opampCtx.beginPath();
                opampCtx.moveTo(100, 40); // Top point
                opampCtx.lineTo(100, 110); // Bottom point
                opampCtx.lineTo(180, 75); // Output point
                opampCtx.closePath();
                opampCtx.stroke();

                // Inputs and output lines
                opampCtx.beginPath();
                opampCtx.moveTo(50, 55); opampCtx.lineTo(100, 55); // Non-inverting input line
                opampCtx.moveTo(50, 95); opampCtx.lineTo(100, 95); // Inverting input line
                opampCtx.moveTo(180, 75); opampCtx.lineTo(220, 75); // Output line
                opampCtx.stroke();

                // Labels: -, + inside triangle
                opampCtx.fillText("-", 105, 98);
                opampCtx.fillText("+", 105, 60);
                opampCtx.fillText("Vout", 225, 78);
                if (isFinite(voutVal)) opampCtx.fillText(voutVal.toFixed(2)+"V", 225, 90);


                // Components based on config
                if (config === "inverting") {
                    opampCtx.fillText("Vin", 10, 98);
                    if (isFinite(vinVal)) opampCtx.fillText(vinVal.toFixed(2)+"V", 10, 110);

                    // R1
                    opampCtx.strokeRect(40, 90, 30, 10); // x,y,w,h from Vin to inverting input
                    opampCtx.fillText("R1", 48, 85);
                    if (isFinite(r1Val)) opampCtx.fillText(r1Val+"kΩ", 45, 113);


                    // Rf (feedback)
                    opampCtx.beginPath();
                    opampCtx.moveTo(100, 95); opampCtx.lineTo(140, 95); opampCtx.lineTo(140, 45); opampCtx.lineTo(190, 45); opampCtx.lineTo(190,75); opampCtx.lineTo(180,75);
                    opampCtx.stroke();
                    opampCtx.strokeRect(130, 30, 30, 10); // Rf on feedback path
                    opampCtx.fillText("Rf", 138, 25);
                    if (isFinite(rfVal)) opampCtx.fillText(rfVal+"kΩ", 135, 53);


                    // Ground non-inverting input
                    opampCtx.moveTo(100, 55); opampCtx.lineTo(120, 55); 
                    opampCtx.moveTo(120,55); opampCtx.lineTo(120,65); // Ground symbol
                    opampCtx.moveTo(115,65); opampCtx.lineTo(125,65);
                    opampCtx.moveTo(117,70); opampCtx.lineTo(123,70);
                    opampCtx.moveTo(119,75); opampCtx.lineTo(121,75);
                    opampCtx.stroke();

                } else if (config === "non-inverting") {
                    opampCtx.fillText("Vin", 10, 58);
                    if (isFinite(vinVal)) opampCtx.fillText(vinVal.toFixed(2)+"V", 10, 70);

                    // R1 from inverting input to ground
                    opampCtx.beginPath();
                    opampCtx.moveTo(100, 95); opampCtx.lineTo(120, 95); 
                    opampCtx.strokeRect(120, 90, 30, 10); 
                    opampCtx.moveTo(150,95); opampCtx.lineTo(160,95);opampCtx.lineTo(160,105); // to ground
                    opampCtx.moveTo(155,105); opampCtx.lineTo(165,105);
                    opampCtx.moveTo(157,110); opampCtx.lineTo(163,110);
                    opampCtx.moveTo(159,115); opampCtx.lineTo(161,115);
                    opampCtx.stroke();
                    opampCtx.fillText("R1", 128, 85);
                    if (isFinite(r1Val)) opampCtx.fillText(r1Val+"kΩ", 125, 113);


                    // Rf from output to inverting input
                    opampCtx.beginPath();
                    opampCtx.moveTo(100, 95); opampCtx.lineTo(140, 95); opampCtx.lineTo(140, 45); opampCtx.lineTo(190, 45); opampCtx.lineTo(190,75); opampCtx.lineTo(180,75);
                    opampCtx.stroke();
                    opampCtx.strokeRect(130, 30, 30, 10); 
                    opampCtx.fillText("Rf", 138, 25);
                    if (isFinite(rfVal)) opampCtx.fillText(rfVal+"kΩ", 135, 53);

                }
            }

            function calculateOpAmp() {
                if (!opampVinInput || !opampR1Input || !opampRfInput || !opampConfigSelect || !opampVoutDisplay || !opampGainDisplay || !opampFormulaDisplay) return;

                const Vin = parseFloat(opampVinInput.value);
                const R1 = parseFloat(opampR1Input.value); // Assuming kOhms from label
                const Rf = parseFloat(opampRfInput.value); // Assuming kOhms
                const config = opampConfigSelect.value;

                if (isNaN(Vin) || isNaN(R1) || isNaN(Rf) || R1 <= 0 || Rf < 0) {
                    opampVoutDisplay.textContent = "Invalid";
                    opampGainDisplay.textContent = "Invalid";
                    opampFormulaDisplay.textContent = "Formula: Invalid Input";
                    drawOpAmpDiagram(config, NaN, NaN, NaN, NaN);
                    return;
                }

                let Vout, Gain, formula;

                if (config === "inverting") {
                    Gain = -Rf / R1;
                    Vout = Gain * Vin;
                    formula = "Vout = -(Rf / R1) * Vin";
                } else { // non-inverting
                    Gain = 1 + (Rf / R1);
                    Vout = Gain * Vin;
                    formula = "Vout = (1 + Rf / R1) * Vin";
                }

                opampVoutDisplay.textContent = Vout.toFixed(3);
                opampGainDisplay.textContent = Gain.toFixed(3);
                opampFormulaDisplay.textContent = `Formula: ${formula}`;
                drawOpAmpDiagram(config, R1, Rf, Vin, Vout);
            }

            if (opampSimulateBtn) opampSimulateBtn.addEventListener('click', calculateOpAmp);
            if (opampVinInput) opampVinInput.addEventListener('input', calculateOpAmp);
            if (opampR1Input) opampR1Input.addEventListener('input', calculateOpAmp);
            if (opampRfInput) opampRfInput.addEventListener('input', calculateOpAmp);
            if (opampConfigSelect) opampConfigSelect.addEventListener('change', calculateOpAmp);

            calculateOpAmp(); // Initial calculation
        } else {
            console.error("Op-amp canvas element not found!");
        }

        // --- RLC Circuit Step Response Demo Logic (Chapter 16) ---
        const rlcRInput = document.getElementById('rlcR');
        const rlcLInput = document.getElementById('rlcL');
        const rlcCInput = document.getElementById('rlcC');
        const rlcSimulateBtn = document.getElementById('rlcSimulateBtn');

        const alphaValDisplay = document.getElementById('alphaVal');
        const omega0ValDisplay = document.getElementById('omega0Val');
        const dampingTypeDisplay = document.getElementById('dampingType');
        const rootsValDisplay = document.getElementById('rootsVal');
        const solutionFormVcDisplay = document.getElementById('solutionFormVc');
        const rlcCanvas = document.getElementById('rlcResponseCanvas');

        if (rlcCanvas) { // Check if element exists before getting context
            const rlcCtx = rlcCanvas.getContext('2d');

            function analyzeRLC() {
                if (!rlcRInput || !rlcLInput || !rlcCInput || !alphaValDisplay || !omega0ValDisplay || !dampingTypeDisplay || !rootsValDisplay || !solutionFormVcDisplay) {
                    console.error("RLC demo elements not found or missing.");
                    return;
                }
                const R = parseFloat(rlcRInput.value);
                const L = parseFloat(rlcLInput.value);
                const C = parseFloat(rlcCInput.value);
                const Vs = 1; // Step input of 1V for v_C(t) response

                if (isNaN(R) || isNaN(L) || isNaN(C) || L <= 0 || C <= 0 || R < 0) {
                    alphaValDisplay.textContent = "Invalid";
                    omega0ValDisplay.textContent = "Invalid";
                    dampingTypeDisplay.textContent = "Invalid Input";
                    rootsValDisplay.textContent = "N/A";
                    solutionFormVcDisplay.textContent = "v_C(t) = Invalid Input";
                    clearRLCCanvas();
                    return;
                }

                const alpha = R / (2 * L);
                const omega0 = 1 / Math.sqrt(L * C);

                alphaValDisplay.textContent = alpha.toFixed(3);
                omega0ValDisplay.textContent = omega0.toFixed(3);

                let dampingType = "";
                let rootsDesc = "";
                let solutionForm = `v<sub>C</sub>(t) = ${Vs}`; // Start with final value for step response to Vs
                let plotTimeMaxFactor = 5; // General factor for plot duration relative to characteristic time
                let responseFunction;

                const discriminant = alpha * alpha - omega0 * omega0;

                if (discriminant > 0) { // Overdamped
                    dampingType = "Overdamped";
                    const s1 = -alpha + Math.sqrt(discriminant);
                    const s2 = -alpha - Math.sqrt(discriminant);
                    rootsDesc = `s1 = ${s1.toFixed(3)}, s2 = ${s2.toFixed(3)} (real, distinct)`;
                    solutionForm += ` + A₁e<sup>${s1.toFixed(2)}t</sup> + A₂e<sup>${s2.toFixed(2)}t</sup>`;
                    const A1 = Vs * s2 / (s1 - s2); // For vC(0)=0, vC'(0)=0
                    const A2 = -Vs * s1 / (s1 - s2);
                    responseFunction = t => Vs + A1 * Math.exp(s1 * t) + A2 * Math.exp(s2 * t);
                    plotTimeMaxFactor = (s2 !== 0) ? 1 / Math.abs(s2) : ( (s1 !==0) ? 1/Math.abs(s1) : 1); // Based on slower pole
                } else if (Math.abs(discriminant) < 1e-9 * (omega0*omega0)) { // Critically Damped (check with tolerance relative to omega0^2)
                    dampingType = "Critically Damped";
                    const s_crit = -alpha;
                    rootsDesc = `s1 = s2 = ${s_crit.toFixed(3)} (real, repeated)`;
                    solutionForm += ` + (A₁ + A₂t)e<sup>${s_crit.toFixed(2)}t</sup>`;
                    const A1_crit = -Vs; // For vC(0)=0, vC'(0)=0
                    const A2_crit = -Vs * alpha;
                    responseFunction = t => Vs + (A1_crit + A2_crit * t) * Math.exp(s_crit * t);
                    plotTimeMaxFactor = (alpha !==0) ? 1 / alpha : 1;
                } else { // Underdamped
                    dampingType = "Underdamped";
                    const omega_d = Math.sqrt(-discriminant);
                    rootsDesc = `s1,2 = ${(-alpha).toFixed(3)} ± j${omega_d.toFixed(3)} (complex)`;
                    solutionForm += ` + e<sup>${(-alpha).toFixed(2)}t</sup>(A₁cos(${omega_d.toFixed(2)}t) + A₂sin(${omega_d.toFixed(2)}t))`;
                    const A1_under = -Vs; // For vC(0)=0, vC'(0)=0
                    const A2_under = (omega_d !== 0) ? (-Vs * alpha / omega_d) : 0;
                    responseFunction = t => Vs + Math.exp(-alpha * t) * (A1_under * Math.cos(omega_d * t) + A2_under * Math.sin(omega_d * t));
                    plotTimeMaxFactor = (omega_d !== 0) ? (2 * Math.PI / omega_d) : ((alpha !==0) ? 1/alpha : 1); // One period or characteristic time
                }

                dampingTypeDisplay.textContent = dampingType;
                rootsValDisplay.textContent = rootsDesc;
                solutionFormVcDisplay.innerHTML = solutionForm.replace(/A₁/g, 'A<sub>1</sub>').replace(/A₂/g, 'A<sub>2</sub>');
                
                plotRLCResponse(responseFunction, plotTimeMaxFactor * (dampingType === "Underdamped" ? 3 : 5)); // Plot a few cycles/time constants
            }

            function plotRLCResponse(responseFunc, tMax) {
                if (!rlcCtx || !responseFunc) return;
                rlcCtx.clearRect(0, 0, rlcCanvas.width, rlcCanvas.height);
                rlcCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent-color').trim();
                rlcCtx.lineWidth = 1.5;

                const padding = 25;
                const plotWidth = rlcCanvas.width - 2 * padding;
                const plotHeight = rlcCanvas.height - 2 * padding;
                const Vs_plot = 1; // Normalized to Vs=1 for plotting reference for y-axis scaling

                // Determine Y scale - allow for some overshoot in underdamped case
                const yMaxVisual = Vs_plot * 1.8; 
                const yMinVisual = Vs_plot * -0.2; // Allow a little undershoot to be visible
                const plotYRange = yMaxVisual - yMinVisual;
                const scaleY = plotHeight / plotYRange;

                rlcCtx.beginPath();
                const numPoints = 250;
                for (let i = 0; i <= numPoints; i++) {
                    const t = (i / numPoints) * tMax;
                    let v_c_val = responseFunc(t);
                    
                    const xPlot = padding + (t / tMax) * plotWidth;
                    // Map v_c_val from [yMinVisual, yMaxVisual] to canvas y-coordinates
                    const yPlot = (rlcCanvas.height - padding) - ((v_c_val - yMinVisual) * scaleY);


                    if (i === 0) rlcCtx.moveTo(xPlot, yPlot);
                    else rlcCtx.lineTo(xPlot, yPlot);
                }
                rlcCtx.stroke();

                // Draw Axes
                rlcCtx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--highlight-color').trim();
                rlcCtx.lineWidth = 1;
                rlcCtx.beginPath();
                // X-axis (represents y=0 of the value, or can be bottom of plot)
                const yZeroLine = (rlcCanvas.height - padding) - ((0 - yMinVisual) * scaleY);
                rlcCtx.moveTo(padding, yZeroLine); 
                rlcCtx.lineTo(rlcCanvas.width - padding, yZeroLine);
                // Y-axis
                rlcCtx.moveTo(padding, padding); 
                rlcCtx.lineTo(padding, rlcCanvas.height - padding);
                rlcCtx.stroke();
                
                rlcCtx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-color').trim();
                rlcCtx.font = "10px Segoe UI";
                rlcCtx.fillText("t", rlcCanvas.width - padding, yZeroLine +10);
                rlcCtx.fillText("vC(t)", padding -20 , padding -5);
                rlcCtx.fillText("0", padding - 10, yZeroLine + 3);
                // Label Vs line if within plot
                const yVsLine = (rlcCanvas.height - padding) - ((Vs_plot - yMinVisual) * scaleY);
                if (yVsLine > padding && yVsLine < rlcCanvas.height - padding) {
                    rlcCtx.fillText(Vs_plot.toFixed(1) + "V", padding -20, yVsLine + 3);
                    rlcCtx.beginPath();
                    rlcCtx.moveTo(padding-2, yVsLine); rlcCtx.lineTo(padding+2, yVsLine);
                    rlcCtx.stroke();
                }
            }

            function clearRLCCanvas(){
                if(rlcCtx) rlcCtx.clearRect(0, 0, rlcCanvas.width, rlcCanvas.height);
            }

            if (rlcSimulateBtn) rlcSimulateBtn.addEventListener('click', analyzeRLC);
            if (rlcRInput) rlcRInput.addEventListener('input', analyzeRLC);
            if (rlcLInput) rlcLInput.addEventListener('input', analyzeRLC);
            if (rlcCInput) rlcCInput.addEventListener('input', analyzeRLC);
            
            analyzeRLC(); // Initial analysis
        } else {
            console.error("RLC Canvas element not found!");
        }

        // --- Fourier Series Demo Logic (Chapter 17) - FULL ENHANCED ---
        const numHarmonicsInput = document.getElementById('numHarmonics');
        const amplitudeFSInput = document.getElementById('amplitudeFS');
        const fsSimulateBtn = document.getElementById('fsSimulateBtn');
        const fsCanvas = document.getElementById('fourierSeriesCanvas');
        const fsCtx = fsCanvas.getContext('2d');

        const fourierEquationShortDisplay = document.getElementById('fourierEquationShort');
        const fourierEquationFullDisplay = document.getElementById('fourierEquationFull');
        const toggleEquationViewBtn = document.getElementById('toggleEquationViewBtn');

        const harmonicCheckboxesContainer = document.getElementById('harmonicCheckboxes');
        const individualHarmonicsCanvas = document.getElementById('individualHarmonicsCanvas');
        const individualFsCtx = individualHarmonicsCanvas.getContext('2d');

        let currentHarmonicsDataFs = []; // Renamed to avoid conflict if other demos use similar var names

        function generateHarmonicCheckboxesFs(numTermsInSeries) {
            harmonicCheckboxesContainer.innerHTML = ''; 
            currentHarmonicsDataFs = []; 

            const A = parseFloat(amplitudeFSInput.value);
            if (isNaN(A) || A <= 0) return;
            const omega0 = 1; // Assuming T = 2*PI for simplicity

            for (let k = 0; k < numTermsInSeries; k++) {
                const n_harmonic = 2 * k + 1; // Square wave uses odd harmonics: 1, 3, 5...
                const harmonicAmplitude = (4 * A / (n_harmonic * Math.PI));
                
                // Store data for this specific harmonic for later plotting
                currentHarmonicsDataFs.push({ 
                    n: n_harmonic, 
                    amplitude: harmonicAmplitude, 
                    omega0: omega0, 
                    color: getRandomColorFs(), // Each harmonic gets a color
                    isChecked: true // Initially checked
                });

                const checkboxId = `fs_harmonic_n${n_harmonic}`;
                const label = document.createElement('label');
                label.htmlFor = checkboxId;
                label.style.marginRight = '10px';
                label.style.display = 'inline-block'; // Better layout for multiple checkboxes
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = checkboxId;
                checkbox.value = n_harmonic;
                checkbox.checked = true; 
                checkbox.dataset.index = k; // Store index to link to currentHarmonicsDataFs
                checkbox.addEventListener('change', (event) => {
                    const changedIndex = parseInt(event.target.dataset.index);
                    currentHarmonicsDataFs[changedIndex].isChecked = event.target.checked;
                    plotIndividualHarmonicsFs(); // Replot individual harmonics
                });
                
                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(` n=${n_harmonic} (Amp ~${harmonicAmplitude.toFixed(2)})`));
                harmonicCheckboxesContainer.appendChild(label);
                if ((k + 1) % 2 === 0 && k < numTermsInSeries -1) harmonicCheckboxesContainer.appendChild(document.createElement('br'));
            }
            plotIndividualHarmonicsFs(); 
        }

        function getRandomColorFs() {
            const r = Math.floor(Math.random() * 180 + 75); // Brighter colors
            const g = Math.floor(Math.random() * 180 + 75);
            const b = Math.floor(Math.random() * 180 + 75);
            return `rgb(${r},${g},${b})`;
        }

        function plotIndividualHarmonicsFs() {
            individualFsCtx.clearRect(0, 0, individualHarmonicsCanvas.width, individualHarmonicsCanvas.height);
            const A_overall = parseFloat(amplitudeFSInput.value);

            const padding = 15; // Smaller padding for this smaller canvas
            const plotWidth = individualHarmonicsCanvas.width - 2 * padding;
            const plotHeight = individualHarmonicsCanvas.height - 2 * padding;
            
            const maxPossibleFundamentalAmp = (A_overall > 0) ? (4 * A_overall / Math.PI) : 1; // Ensure not zero
            const scaleY = (plotHeight / 2) / (maxPossibleFundamentalAmp * 1.1); 

            const T_fundamental = 2 * Math.PI; // Omega0 = 1

            // Axes for individual harmonics plot
            individualFsCtx.strokeStyle = 'var(--highlight-color)';
            individualFsCtx.lineWidth = 0.5;
            individualFsCtx.beginPath();
            individualFsCtx.moveTo(padding, padding/2); individualFsCtx.lineTo(padding, individualHarmonicsCanvas.height - padding/2);
            individualFsCtx.moveTo(padding, individualHarmonicsCanvas.height / 2); individualFsCtx.lineTo(individualHarmonicsCanvas.width - padding, individualHarmonicsCanvas.height / 2);
            individualFsCtx.stroke();
            individualFsCtx.fillStyle = 'var(--text-color)';
            individualFsCtx.font = "8px Segoe UI";
            individualFsCtx.fillText("t", individualHarmonicsCanvas.width - padding + 3, individualHarmonicsCanvas.height / 2 + 3);
            individualFsCtx.fillText("h(t)", padding -12, padding/2 + 3);

            if (!currentHarmonicsDataFs) return;

            currentHarmonicsDataFs.forEach(harmonic => {
                if (harmonic.isChecked) {
                    individualFsCtx.strokeStyle = harmonic.color;
                    individualFsCtx.lineWidth = 1;
                    individualFsCtx.beginPath();
                    const points = 150;
                    for (let i = 0; i <= points; i++) {
                        const t = (i / points) * (1 * T_fundamental); // Plot one period of fundamental
                        const val = harmonic.amplitude * Math.sin(harmonic.n * harmonic.omega0 * t);
                        const xPlot = padding + (t / (1 * T_fundamental)) * plotWidth;
                        const yPlot = (individualHarmonicsCanvas.height / 2) - val * scaleY;

                        if (i === 0) individualFsCtx.moveTo(xPlot, yPlot);
                        else individualFsCtx.lineTo(xPlot, yPlot);
                    }
                    individualFsCtx.stroke();
                }
            });
        }

        function synthesizeSquareWaveFs() {
            const numTermsForSeries = parseInt(numHarmonicsInput.value);
            const A = parseFloat(amplitudeFSInput.value);
            const T_period = 2 * Math.PI; 
            const omega0 = 2 * Math.PI / T_period; // omega0 = 1

            if (isNaN(numTermsForSeries) || isNaN(A) || numTermsForSeries < 1 || A <= 0) {
                fourierEquationShortDisplay.innerHTML = "Invalid Input";
                fourierEquationFullDisplay.innerHTML = "";
                toggleEquationViewBtn.style.display = "none";
                fsCtx.clearRect(0, 0, fsCanvas.width, fsCanvas.height);
                harmonicCheckboxesContainer.innerHTML = ''; 
                individualFsCtx.clearRect(0, 0, individualHarmonicsCanvas.width, individualHarmonicsCanvas.height);
                currentHarmonicsDataFs = [];
                return;
            }
            
            generateHarmonicCheckboxesFs(numTermsForSeries); 

            let fullEqStr = `f(t) ≈ <sup>(4${A.toFixed(2)})</sup>/<sub>π</sub> · [`;
            let shortEqStr = `f(t) ≈ <sup>(4${A.toFixed(2)})</sup>/<sub>π</sub> · [`;
            
            fsCtx.clearRect(0, 0, fsCanvas.width, fsCanvas.height);
            fsCtx.strokeStyle = 'var(--accent-color)';
            fsCtx.lineWidth = 1.5;

            const padding = 20;
            const plotWidth = fsCanvas.width - 2 * padding;
            const plotHeight = fsCanvas.height - 2 * padding;
            const scaleY = (plotHeight / 2) / (A * 1.4);  // Give some headroom

            fsCtx.beginPath();
            const points = 300;
            for (let i = 0; i <= points; i++) {
                const t = (i / points) * (2 * T_period); 
                let ft_sum = 0;
                
                for (let k = 0; k < numTermsForSeries; k++) {
                    const n_harmonic_val = 2 * k + 1; 
                    ft_sum += (4 * A / (n_harmonic_val * Math.PI)) * Math.sin(n_harmonic_val * omega0 * t);
                }

                const xPlot = padding + (t / (2 * T_period)) * plotWidth;
                const yPlot = (fsCanvas.height / 2) - ft_sum * scaleY;

                if (i === 0) fsCtx.moveTo(xPlot, yPlot);
                else fsCtx.lineTo(xPlot, yPlot);
            }
            fsCtx.stroke();

            // Construct equation strings carefully
            const maxTermsInShort = 2;
            for (let k = 0; k < numTermsForSeries; k++) {
                const n_h = 2 * k + 1;
                const termStr = `<sup>1</sup>/<sub>${n_h}</sub>sin(${n_h}ω<sub>0</sub>t)`;
                if (k > 0) {
                    fullEqStr += " + ";
                    if (k < maxTermsInShort) shortEqStr += " + ";
                }
                fullEqStr += termStr;
                if (k < maxTermsInShort) shortEqStr += termStr;
            }

            if (numTermsForSeries > maxTermsInShort) {
                shortEqStr += " + …";
            }
            fullEqStr += "]";
            shortEqStr += "]";

            fourierEquationShortDisplay.innerHTML = shortEqStr.replace(/ω0/g, 'ω<sub>0</sub>');
            fourierEquationFullDisplay.innerHTML = fullEqStr.replace(/ω0/g, 'ω<sub>0</sub>');


            if (numTermsForSeries > maxTermsInShort) {
                toggleEquationViewBtn.style.display = "inline-block";
                fourierEquationFullDisplay.style.display = "none";
                fourierEquationShortDisplay.style.display = "inline-block";
                toggleEquationViewBtn.textContent = "View More";
            } else {
                toggleEquationViewBtn.style.display = "none";
                fourierEquationFullDisplay.style.display = "none";
                fourierEquationShortDisplay.style.display = "inline-block";
            }
            
            // Draw Axes for combined plot
            fsCtx.strokeStyle = 'var(--highlight-color)';
            fsCtx.lineWidth = 1;
            fsCtx.beginPath();
            fsCtx.moveTo(padding, padding/2); fsCtx.lineTo(padding, fsCanvas.height - padding/2); // Y
            fsCtx.moveTo(padding, fsCanvas.height / 2); fsCtx.lineTo(fsCanvas.width - padding, fsCanvas.height / 2); // X
            fsCtx.stroke();
            fsCtx.fillStyle = 'var(--text-color)';
            fsCtx.font = "10px Segoe UI";
            fsCtx.fillText("t", fsCanvas.width - padding + 5, fsCanvas.height / 2 + 10);
            fsCtx.fillText("f(t)", padding - 18, padding/2 + 5 );
        }

        toggleEquationViewBtn.addEventListener('click', () => {
            const isShortCurrentlyVisible = fourierEquationShortDisplay.style.display !== "none";
            const numTerms = parseInt(numHarmonicsInput.value);
            if (isShortCurrentlyVisible && numTerms > 2) { // Only toggle if full is different
                fourierEquationShortDisplay.style.display = "none";
                fourierEquationFullDisplay.style.display = "inline-block";
                toggleEquationViewBtn.textContent = "View Less";
            } else {
                fourierEquationShortDisplay.style.display = "inline-block";
                fourierEquationFullDisplay.style.display = "none";
                toggleEquationViewBtn.textContent = "View More";
            }
        });

        // Event listeners
        fsSimulateBtn.addEventListener('click', synthesizeSquareWaveFs);
        numHarmonicsInput.addEventListener('input', synthesizeSquareWaveFs); // Using 'input' for more responsiveness
        amplitudeFSInput.addEventListener('input', synthesizeSquareWaveFs);

        // Initial synthesis call
        synthesizeSquareWaveFs();

        // --- Fourier Transform of Rectangular Pulse Demo (Chapter 18) ---
        const pulseWidthTInput = document.getElementById('pulseWidthT');
        const ftRectSimulateBtn = document.getElementById('ftRectSimulateBtn');
        const timeDomainPulseCanvas = document.getElementById('timeDomainPulseCanvas');
        const freqDomainSpectrumCanvas = document.getElementById('freqDomainSpectrumCanvas');
        const timeCtx = timeDomainPulseCanvas.getContext('2d');
        const freqCtx = freqDomainSpectrumCanvas.getContext('2d');

        function drawRectPulseAndSpectrum() {
            const T = parseFloat(pulseWidthTInput.value);
            if (isNaN(T) || T <= 0) {
                timeCtx.clearRect(0, 0, timeDomainPulseCanvas.width, timeDomainPulseCanvas.height);
                freqCtx.clearRect(0, 0, freqDomainSpectrumCanvas.width, freqDomainSpectrumCanvas.height);
                return;
            }

            // --- Time Domain Plot (Rectangular Pulse) ---
            timeCtx.clearRect(0, 0, timeDomainPulseCanvas.width, timeDomainPulseCanvas.height);
            const timePadding = 20;
            const timePlotWidth = timeDomainPulseCanvas.width - 2 * timePadding;
            const timePlotHeight = timeDomainPulseCanvas.height - 2 * timePadding;
            const timeScaleX = timePlotWidth / (2 * T); // Show from -T to T
            const pulseHeight = timePlotHeight * 0.6; // Height of pulse for visual

            // Axes for time domain
            timeCtx.strokeStyle = 'var(--highlight-color)';
            timeCtx.lineWidth = 1;
            timeCtx.beginPath();
            timeCtx.moveTo(timePadding, timeDomainPulseCanvas.height - timePadding); // X-axis (t)
            timeCtx.lineTo(timeDomainPulseCanvas.width - timePadding, timeDomainPulseCanvas.height - timePadding);
            timeCtx.moveTo(timeDomainPulseCanvas.width / 2, timePadding); // Y-axis (f(t))
            timeCtx.lineTo(timeDomainPulseCanvas.width / 2, timeDomainPulseCanvas.height - timePadding);
            timeCtx.stroke();
            timeCtx.fillStyle = 'var(--text-color)';
            timeCtx.font = "10px Segoe UI";
            timeCtx.fillText("t", timeDomainPulseCanvas.width - timePadding + 5, timeDomainPulseCanvas.height - timePadding - 5);
            timeCtx.fillText("f(t)", timeDomainPulseCanvas.width/2 + 5, timePadding + 5);
            timeCtx.fillText("0", timeDomainPulseCanvas.width/2 - 10, timeDomainPulseCanvas.height - timePadding + 10);
            timeCtx.fillText("-T/2", timeDomainPulseCanvas.width/2 - (T/2)*timeScaleX -10 , timeDomainPulseCanvas.height - timePadding +10);
            timeCtx.fillText("T/2", timeDomainPulseCanvas.width/2 + (T/2)*timeScaleX -5, timeDomainPulseCanvas.height - timePadding +10);


            // Draw pulse
            timeCtx.fillStyle = 'var(--accent-color)';
            timeCtx.fillRect(
                timeDomainPulseCanvas.width / 2 - (T / 2) * timeScaleX, // x start
                timeDomainPulseCanvas.height - timePadding - pulseHeight,      // y start
                T * timeScaleX,                                           // width
                pulseHeight                                               // height
            );
            timeCtx.fillStyle = 'var(--text-color)';
            timeCtx.fillText("1", timeDomainPulseCanvas.width / 2 -15 , timeDomainPulseCanvas.height - timePadding - pulseHeight - 2);


            // --- Frequency Domain Plot (Magnitude of Sinc) ---
            freqCtx.clearRect(0, 0, freqDomainSpectrumCanvas.width, freqDomainSpectrumCanvas.height);
            const freqPadding = 20;
            const freqPlotWidth = freqDomainSpectrumCanvas.width - 2 * freqPadding;
            const freqPlotHeight = freqDomainSpectrumCanvas.height - 2 * freqPadding;
            
            // Omega range for plotting - where sinc has a few lobes
            // Zeros of sinc(omega*T/2) occur when omega*T/2 = n*pi, so omega = 2*n*pi/T
            const omegaMax = (4 * Math.PI * 2) / T; // Show a few main lobes
            const scaleXFreq = freqPlotWidth / (2 * omegaMax); // from -omegaMax to +omegaMax
            const scaleYFreq = freqPlotHeight / (T * 1.1); // Max value of T*sinc(0) is T

            // Axes for frequency domain
            freqCtx.strokeStyle = 'var(--highlight-color)';
            freqCtx.lineWidth = 1;
            freqCtx.beginPath();
            freqCtx.moveTo(freqPadding, freqDomainSpectrumCanvas.height - freqPadding); // X-axis (omega)
            freqCtx.lineTo(freqDomainSpectrumCanvas.width - freqPadding, freqDomainSpectrumCanvas.height - freqPadding);
            freqCtx.moveTo(freqDomainSpectrumCanvas.width / 2, freqPadding); // Y-axis |F(jw)|
            freqCtx.lineTo(freqDomainSpectrumCanvas.width / 2, freqDomainSpectrumCanvas.height - freqPadding);
            freqCtx.stroke();
            freqCtx.fillStyle = 'var(--text-color)';
            freqCtx.font = "10px Segoe UI";
            freqCtx.fillText("ω", freqDomainSpectrumCanvas.width - freqPadding + 5, freqDomainSpectrumCanvas.height - freqPadding - 5);
            freqCtx.fillText("|F(jω)|", freqDomainSpectrumCanvas.width/2 + 5, freqPadding + 5);
            freqCtx.fillText("0", freqDomainSpectrumCanvas.width/2 - 10, freqDomainSpectrumCanvas.height - freqPadding + 10);


            freqCtx.strokeStyle = 'var(--accent-color)';
            freqCtx.lineWidth = 1.5;
            freqCtx.beginPath();

            const numFreqPoints = 400;
            for (let i = 0; i <= numFreqPoints; i++) {
                const omega = -omegaMax + (i / numFreqPoints) * (2 * omegaMax);
                let sincVal;
                if (omega === 0) {
                    sincVal = T; // Limit of T * sin(x)/x as x->0 is T
                } else {
                    sincVal = T * (Math.sin(omega * T / 2) / (omega * T / 2));
                }
                
                const xPlotFreq = freqDomainSpectrumCanvas.width / 2 + omega * scaleXFreq;
                const yPlotFreq = freqDomainSpectrumCanvas.height - freqPadding - Math.abs(sincVal) * scaleYFreq; // Plotting magnitude

                if (i === 0 || Math.abs(omega * scaleXFreq) < 0.1 ) { // handle move to for omega near 0 due to discrete points
                    freqCtx.moveTo(xPlotFreq, yPlotFreq);
                } else {
                    freqCtx.lineTo(xPlotFreq, yPlotFreq);
                }
            }
            freqCtx.stroke();
            freqCtx.fillStyle = 'var(--text-color)';
            freqCtx.fillText(T.toFixed(1), freqDomainSpectrumCanvas.width / 2 + 3 , freqDomainSpectrumCanvas.height - freqPadding - T * scaleYFreq - 2);
            freqCtx.fillText(`2π/T`, freqDomainSpectrumCanvas.width / 2 + (2*Math.PI/T)*scaleXFreq -10 , freqDomainSpectrumCanvas.height - freqPadding + 10);
            freqCtx.fillText(`-2π/T`, freqDomainSpectrumCanvas.width / 2 - (2*Math.PI/T)*scaleXFreq -15 , freqDomainSpectrumCanvas.height - freqPadding + 10);


        }

        ftRectSimulateBtn.addEventListener('click', drawRectPulseAndSpectrum);
        pulseWidthTInput.addEventListener('input', drawRectPulseAndSpectrum);

        // Initial draw
        drawRectPulseAndSpectrum();

        // --- Two-Port Network Demo (Voltage Divider Z11, Z21) - Chapter 19 ---
        const tpR1Input = document.getElementById('tpR1');
        const tpR2Input = document.getElementById('tpR2');
        const tpV1Input = document.getElementById('tpV1');
        const tpSimulateBtn = document.getElementById('tpSimulateBtn');

        const tpZ11Display = document.getElementById('tpZ11');
        const tpZ21Display = document.getElementById('tpZ21');
        const tpI1CalcDisplay = document.getElementById('tpI1_calc');
        const tpV2CalcDisplay = document.getElementById('tpV2_calc');

        function calculateTwoPortVoltageDivider() {
            if (!tpR1Input || !tpR2Input || !tpV1Input || !tpZ11Display || !tpZ21Display || !tpI1CalcDisplay || !tpV2CalcDisplay) {
                console.error("Two-port demo elements not found");
                return;
            }

            const R1 = parseFloat(tpR1Input.value);
            const R2 = parseFloat(tpR2Input.value);
            const V1_applied = parseFloat(tpV1Input.value);

            if (isNaN(R1) || isNaN(R2) || R1 <= 0 || R2 <= 0 || isNaN(V1_applied)) {
                tpZ11Display.textContent = "Invalid";
                tpZ21Display.textContent = "Invalid";
                tpI1CalcDisplay.textContent = "Invalid";
                tpV2CalcDisplay.textContent = "Invalid";
                return;
            }

            // Calculate Z11 and Z21 (when I2 = 0, i.e., Port 2 is open)
            // Z11 = V1/I1 | I2=0
            // When I2=0, R1 and R2 are in series from Port 1's perspective.
            // I1 = V1 / (R1 + R2)
            // So, Z11 = V1 / (V1 / (R1 + R2)) = R1 + R2
            const Z11 = R1 + R2;
            tpZ11Display.textContent = Z11.toFixed(2);

            // Z21 = V2/I1 | I2=0
            // V2 (open circuit voltage at Port 2) is the voltage across R2.
            // V2 = I1 * R2
            // So, Z21 = (I1 * R2) / I1 = R2
            const Z21 = R2;
            tpZ21Display.textContent = Z21.toFixed(2);

            // Now, if V1_applied is the input voltage V1 for this condition (I2=0):
            const I1_calculated = V1_applied / Z11; // Since Z11 is input impedance when I2=0
            const V2_calculated = I1_calculated * Z21; // Since Z21 = V2/I1 when I2=0

            tpI1CalcDisplay.textContent = I1_calculated.toFixed(3);
            tpV2CalcDisplay.textContent = V2_calculated.toFixed(3);
        }

        if (tpSimulateBtn) {
            tpSimulateBtn.addEventListener('click', calculateTwoPortVoltageDivider);
        }
        if (tpR1Input) tpR1Input.addEventListener('input', calculateTwoPortVoltageDivider);
        if (tpR2Input) tpR2Input.addEventListener('input', calculateTwoPortVoltageDivider);
        if (tpV1Input) tpV1Input.addEventListener('input', calculateTwoPortVoltageDivider);


        // Initial calculation for two-port demo
        if (typeof calculateTwoPortVoltageDivider === 'function') {
            calculateTwoPortVoltageDivider();
        }

        // --- 2x2 System Solver Demo (Appendix A) ---
        const matA11_input = document.getElementById('matA11');
        const matA12_input = document.getElementById('matA12');
        const matB1_input = document.getElementById('matB1');
        const matA21_input = document.getElementById('matA21');
        const matA22_input = document.getElementById('matA22');
        const matB2_input = document.getElementById('matB2');
        const solveMatrixBtn = document.getElementById('solveMatrixBtn');

        const detAValDisplay = document.getElementById('detAVal');
        const solXDisplay = document.getElementById('solX');
        const solYDisplay = document.getElementById('solY');
        const matrixInverseDisplay = document.getElementById('matrixInverseDisplay');

        function solve2x2System() {
            if (!matA11_input || !matA12_input || !matB1_input || !matA21_input || !matA22_input || !matB2_input ||
                !detAValDisplay || !solXDisplay || !solYDisplay || !matrixInverseDisplay) {
                console.error("Matrix demo elements not found.");
                return;
            }

            const a = parseFloat(matA11_input.value);
            const b = parseFloat(matA12_input.value);
            const e_val = parseFloat(matB1_input.value); // Using e_val to avoid conflict with exp function 'e'
            const c = parseFloat(matA21_input.value);
            const d = parseFloat(matA22_input.value);
            const f_val = parseFloat(matB2_input.value); // Using f_val

            if (isNaN(a) || isNaN(b) || isNaN(e_val) || isNaN(c) || isNaN(d) || isNaN(f_val)) {
                detAValDisplay.textContent = "Invalid";
                solXDisplay.textContent = "Invalid Input";
                solYDisplay.textContent = "Invalid Input";
                matrixInverseDisplay.innerHTML = "";
                return;
            }

            const detA = a * d - b * c;
            detAValDisplay.textContent = detA.toFixed(4);

            if (Math.abs(detA) < 1e-9) { // Determinant is (close to) zero
                solXDisplay.textContent = "No unique solution (det A = 0)";
                solYDisplay.textContent = "";
                matrixInverseDisplay.innerHTML = "Matrix A is singular (no inverse).";
                return;
            }

            // Using matrix inversion: X = A_inv * B
            // A_inv = (1/detA) * [[d, -b], [-c, a]]
            const x_sol = (1 / detA) * (d * e_val - b * f_val);
            const y_sol = (1 / detA) * (-c * e_val + a * f_val);

            solXDisplay.textContent = x_sol.toFixed(4);
            solYDisplay.textContent = y_sol.toFixed(4);

            // Display inverse matrix A_inv
            const inv_d = d / detA;
            const inv_neg_b = -b / detA;
            const inv_neg_c = -c / detA;
            const inv_a = a / detA;

            matrixInverseDisplay.innerHTML = `
                <p>Inverse Matrix A<sup>-1</sup> = (1/${detA.toFixed(2)}) · 
                <table style="display:inline-block; vertical-align:middle; border: 1px solid var(--text-color); margin-left:5px;">
                    <tr><td style="padding:3px;">${d.toFixed(2)}</td><td style="padding:3px;">${(-b).toFixed(2)}</td></tr>
                    <tr><td style="padding:3px;">${(-c).toFixed(2)}</td><td style="padding:3px;">${a.toFixed(2)}</td></tr>
                </table>
                = 
                <table style="display:inline-block; vertical-align:middle; border: 1px solid var(--text-color); margin-left:5px;">
                    <tr><td style="padding:3px;">${inv_d.toFixed(3)}</td><td style="padding:3px;">${inv_neg_b.toFixed(3)}</td></tr>
                    <tr><td style="padding:3px;">${inv_neg_c.toFixed(3)}</td><td style="padding:3px;">${inv_a.toFixed(3)}</td></tr>
                </table>
                </p>
            `;
        }

        if (solveMatrixBtn) {
            solveMatrixBtn.addEventListener('click', solve2x2System);
        }
        // Add event listeners to inputs to recalculate on change
        const matrixDemoInputs = [matA11_input, matA12_input, matB1_input, matA21_input, matA22_input, matB2_input];
        matrixDemoInputs.forEach(input => {
            if (input) input.addEventListener('input', solve2x2System);
        });

        // Initial calculation for matrix demo
        if (typeof solve2x2System === 'function') { // Check if function is defined
            solve2x2System();
        }

        // --- Complex Number Operations Demo (Appendix B) ---
        const z1ReInput = document.getElementById('z1_re');
        const z1ImInput = document.getElementById('z1_im');
        const z2ReInput = document.getElementById('z2_re');
        const z2ImInput = document.getElementById('z2_im');
        const complexOpBtn = document.getElementById('complexOpBtn');

        const z1Display = document.getElementById('z1_display');
        const z1PolarDisplay = document.getElementById('z1_polar_display');
        const z2Display = document.getElementById('z2_display');
        const z2PolarDisplay = document.getElementById('z2_polar_display');
        const zAddDisplay = document.getElementById('z_add_display');
        const zSubDisplay = document.getElementById('z_sub_display');
        const zMulDisplay = document.getElementById('z_mul_display');
        const zMulPolarDisplay = document.getElementById('z_mul_polar_display');
        const zDivDisplay = document.getElementById('z_div_display');
        const zDivPolarDisplay = document.getElementById('z_div_polar_display');

        // Helper class for complex numbers
        class Complex {
            constructor(re = 0, im = 0) {
                this.re = re;
                this.im = im;
            }

            static fromPolar(r, thetaRad) {
                return new Complex(r * Math.cos(thetaRad), r * Math.sin(thetaRad));
            }

            get magnitude() {
                return Math.sqrt(this.re * this.re + this.im * this.im);
            }

            get angleRad() {
                return Math.atan2(this.im, this.re);
            }

            get angleDeg() {
                return this.angleRad * 180 / Math.PI;
            }

            add(other) {
                return new Complex(this.re + other.re, this.im + other.im);
            }

            subtract(other) {
                return new Complex(this.re - other.re, this.im - other.im);
            }

            multiply(other) {
                // (a+jb)(c+jd) = (ac-bd) + j(ad+bc)
                const re = this.re * other.re - this.im * other.im;
                const im = this.re * other.im + this.im * other.re;
                return new Complex(re, im);
            }

            conjugate() {
                return new Complex(this.re, -this.im);
            }

            divide(other) {
                const denominator = other.re * other.re + other.im * other.im;
                if (denominator === 0) return new Complex(NaN, NaN); // Division by zero
                const numerator = this.multiply(other.conjugate());
                return new Complex(numerator.re / denominator, numerator.im / denominator);
            }

            toString(digits = 2) {
                const imSign = this.im < 0 ? "-" : "+";
                return `${this.re.toFixed(digits)} ${imSign} j${Math.abs(this.im).toFixed(digits)}`;
            }

            toPolarString(digits = 2) {
                return `${this.magnitude.toFixed(digits)} ∠ ${this.angleDeg.toFixed(digits)}°`;
            }
        }


        function calculateComplexOperations() {
            if(!z1ReInput || !z1Display ) { // Quick check if elements exist
                console.error("Complex number demo elements not found!");
                return;
            }

            const z1 = new Complex(parseFloat(z1ReInput.value), parseFloat(z1ImInput.value));
            const z2 = new Complex(parseFloat(z2ReInput.value), parseFloat(z2ImInput.value));

            if (isNaN(z1.re) || isNaN(z1.im) || isNaN(z2.re) || isNaN(z2.im)) {
                z1Display.textContent = "Invalid"; z1PolarDisplay.textContent = "";
                z2Display.textContent = "Invalid"; z2PolarDisplay.textContent = "";
                zAddDisplay.textContent = "Invalid Input"; zSubDisplay.textContent = "";
                zMulDisplay.textContent = ""; zMulPolarDisplay.textContent = "";
                zDivDisplay.textContent = ""; zDivPolarDisplay.textContent = "";
                return;
            }

            z1Display.textContent = z1.toString();
            z1PolarDisplay.textContent = z1.toPolarString();
            z2Display.textContent = z2.toString();
            z2PolarDisplay.textContent = z2.toPolarString();

            const sum = z1.add(z2);
            zAddDisplay.textContent = sum.toString();

            const diff = z1.subtract(z2);
            zSubDisplay.textContent = diff.toString();

            const prod = z1.multiply(z2);
            zMulDisplay.textContent = prod.toString();
            zMulPolarDisplay.textContent = prod.toPolarString();

            const quot = z1.divide(z2);
            if (isNaN(quot.re)) {
                zDivDisplay.textContent = "Div by zero";
                zDivPolarDisplay.textContent = "";
            } else {
                zDivDisplay.textContent = quot.toString();
                zDivPolarDisplay.textContent = quot.toPolarString();
            }
        }

        if (complexOpBtn) {
            complexOpBtn.addEventListener('click', calculateComplexOperations);
        }
        const complexInputs = [z1ReInput, z1ImInput, z2ReInput, z2ImInput];
        complexInputs.forEach(input => {
            if(input) input.addEventListener('input', calculateComplexOperations);
        });

        // Initial calculation for complex demo
        if (typeof calculateComplexOperations === "function") {
            calculateComplexOperations();
        }

    </script>
</body>
</html>